function B0(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function $0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ed={exports:{}},Aa={},td={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=Symbol.for("react.element"),U0=Symbol.for("react.portal"),z0=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),V0=Symbol.for("react.profiler"),q0=Symbol.for("react.provider"),H0=Symbol.for("react.context"),G0=Symbol.for("react.forward_ref"),Q0=Symbol.for("react.suspense"),J0=Symbol.for("react.memo"),Y0=Symbol.for("react.lazy"),Po=Symbol.iterator;function K0(e){return e===null||typeof e!="object"?null:(e=Po&&e[Po]||e["@@iterator"],typeof e=="function"?e:null)}var rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nd=Object.assign,sd={};function Sn(e,t,n){this.props=e,this.context=t,this.refs=sd,this.updater=n||rd}Sn.prototype.isReactComponent={};Sn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ad(){}ad.prototype=Sn.prototype;function Ei(e,t,n){this.props=e,this.context=t,this.refs=sd,this.updater=n||rd}var Pi=Ei.prototype=new ad;Pi.constructor=Ei;nd(Pi,Sn.prototype);Pi.isPureReactComponent=!0;var To=Array.isArray,ld=Object.prototype.hasOwnProperty,Ti={current:null},id={key:!0,ref:!0,__self:!0,__source:!0};function od(e,t,n){var s,a={},l=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)ld.call(t,s)&&!id.hasOwnProperty(s)&&(a[s]=t[s]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var o=Array(c),u=0;u<c;u++)o[u]=arguments[u+2];a.children=o}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:ys,type:e,key:l,ref:i,props:a,_owner:Ti.current}}function X0(e,t){return{$$typeof:ys,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Di(e){return typeof e=="object"&&e!==null&&e.$$typeof===ys}function Z0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Do=/\/+/g;function Za(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Z0(""+e.key):t.toString(36)}function qs(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ys:case U0:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+Za(i,0):s,To(a)?(n="",e!=null&&(n=e.replace(Do,"$&/")+"/"),qs(a,t,n,"",function(u){return u})):a!=null&&(Di(a)&&(a=X0(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Do,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",To(e))for(var c=0;c<e.length;c++){l=e[c];var o=s+Za(l,c);i+=qs(l,t,n,o,a)}else if(o=K0(e),typeof o=="function")for(e=o.call(e),c=0;!(l=e.next()).done;)l=l.value,o=s+Za(l,c++),i+=qs(l,t,n,o,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Cs(e,t,n){if(e==null)return e;var s=[],a=0;return qs(e,s,"","",function(l){return t.call(n,l,a++)}),s}function em(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},Hs={transition:null},tm={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:Ti};function cd(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Cs,forEach:function(e,t,n){Cs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cs(e,function(){t++}),t},toArray:function(e){return Cs(e,function(t){return t})||[]},only:function(e){if(!Di(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Sn;ae.Fragment=z0;ae.Profiler=V0;ae.PureComponent=Ei;ae.StrictMode=W0;ae.Suspense=Q0;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tm;ae.act=cd;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=nd({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Ti.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)ld.call(t,o)&&!id.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){c=Array(o);for(var u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:ys,type:e.type,key:a,ref:l,props:s,_owner:i}};ae.createContext=function(e){return e={$$typeof:H0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:q0,_context:e},e.Consumer=e};ae.createElement=od;ae.createFactory=function(e){var t=od.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:G0,render:e}};ae.isValidElement=Di;ae.lazy=function(e){return{$$typeof:Y0,_payload:{_status:-1,_result:e},_init:em}};ae.memo=function(e,t){return{$$typeof:J0,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Hs.transition;Hs.transition={};try{e()}finally{Hs.transition=t}};ae.unstable_act=cd;ae.useCallback=function(e,t){return et.current.useCallback(e,t)};ae.useContext=function(e){return et.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return et.current.useDeferredValue(e)};ae.useEffect=function(e,t){return et.current.useEffect(e,t)};ae.useId=function(){return et.current.useId()};ae.useImperativeHandle=function(e,t,n){return et.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return et.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return et.current.useReducer(e,t,n)};ae.useRef=function(e){return et.current.useRef(e)};ae.useState=function(e){return et.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return et.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return et.current.useTransition()};ae.version="18.3.1";td.exports=ae;var m=td.exports;const dd=$0(m),rm=B0({__proto__:null,default:dd},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=m,sm=Symbol.for("react.element"),am=Symbol.for("react.fragment"),lm=Object.prototype.hasOwnProperty,im=nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,om={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,n){var s,a={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)lm.call(t,s)&&!om.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:sm,type:e,key:l,ref:i,props:a,_owner:im.current}}Aa.Fragment=am;Aa.jsx=ud;Aa.jsxs=ud;ed.exports=Aa;var r=ed.exports,Pl={},md={exports:{}},pt={},fd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,_){var F=E.length;E.push(_);e:for(;0<F;){var te=F-1>>>1,R=E[te];if(0<a(R,_))E[te]=_,E[F]=R,F=te;else break e}}function n(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var _=E[0],F=E.pop();if(F!==_){E[0]=F;e:for(var te=0,R=E.length,j=R>>>1;te<j;){var W=2*(te+1)-1,Q=E[W],A=W+1,Y=E[A];if(0>a(Q,F))A<R&&0>a(Y,Q)?(E[te]=Y,E[A]=F,te=A):(E[te]=Q,E[W]=F,te=W);else if(A<R&&0>a(Y,F))E[te]=Y,E[A]=F,te=A;else break e}}return _}function a(E,_){var F=E.sortIndex-_.sortIndex;return F!==0?F:E.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var o=[],u=[],f=1,g=null,y=3,v=!1,k=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(E){for(var _=n(u);_!==null;){if(_.callback===null)s(u);else if(_.startTime<=E)s(u),_.sortIndex=_.expirationTime,t(o,_);else break;_=n(u)}}function C(E){if(b=!1,w(E),!k)if(n(o)!==null)k=!0,K(M);else{var _=n(u);_!==null&&ie(C,_.startTime-E)}}function M(E,_){k=!1,b&&(b=!1,p(D),D=-1),v=!0;var F=y;try{for(w(_),g=n(o);g!==null&&(!(g.expirationTime>_)||E&&!X());){var te=g.callback;if(typeof te=="function"){g.callback=null,y=g.priorityLevel;var R=te(g.expirationTime<=_);_=e.unstable_now(),typeof R=="function"?g.callback=R:g===n(o)&&s(o),w(_)}else s(o);g=n(o)}if(g!==null)var j=!0;else{var W=n(u);W!==null&&ie(C,W.startTime-_),j=!1}return j}finally{g=null,y=F,v=!1}}var O=!1,P=null,D=-1,B=5,z=-1;function X(){return!(e.unstable_now()-z<B)}function U(){if(P!==null){var E=e.unstable_now();z=E;var _=!0;try{_=P(!0,E)}finally{_?q():(O=!1,P=null)}}else O=!1}var q;if(typeof h=="function")q=function(){h(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Z=V.port2;V.port1.onmessage=U,q=function(){Z.postMessage(null)}}else q=function(){N(U,0)};function K(E){P=E,O||(O=!0,q())}function ie(E,_){D=N(function(){E(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,K(M))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(E){switch(y){case 1:case 2:case 3:var _=3;break;default:_=y}var F=y;y=_;try{return E()}finally{y=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,_){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=y;y=E;try{return _()}finally{y=F}},e.unstable_scheduleCallback=function(E,_,F){var te=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?te+F:te):F=te,E){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=F+R,E={id:f++,callback:_,priorityLevel:E,startTime:F,expirationTime:R,sortIndex:-1},F>te?(E.sortIndex=F,t(u,E),n(o)===null&&E===n(u)&&(b?(p(D),D=-1):b=!0,ie(C,F-te))):(E.sortIndex=R,t(o,E),k||v||(k=!0,K(M))),E},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(E){var _=y;return function(){var F=y;y=_;try{return E.apply(this,arguments)}finally{y=F}}}})(gd);fd.exports=gd;var cm=fd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=m,ht=cm;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hd=new Set,Zn={};function zr(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(Zn[e]=t,e=0;e<t.length;e++)hd.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tl=Object.prototype.hasOwnProperty,um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fo={},Ao={};function mm(e){return Tl.call(Ao,e)?!0:Tl.call(Fo,e)?!1:um.test(e)?Ao[e]=!0:(Fo[e]=!0,!1)}function fm(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gm(e,t,n,s){if(t===null||typeof t>"u"||fm(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,n,s,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fi=/[\-:]([a-z])/g;function Ai(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fi,Ai);ze[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fi,Ai);ze[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fi,Ai);ze[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Li(e,t,n,s){var a=ze.hasOwnProperty(t)?ze[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gm(t,n,a,s)&&(n=null),s||a===null?mm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Jt=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Es=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Ri=Symbol.for("react.strict_mode"),Dl=Symbol.for("react.profiler"),pd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),Mi=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),Oi=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),yd=Symbol.for("react.offscreen"),Lo=Symbol.iterator;function Dn(e){return e===null||typeof e!="object"?null:(e=Lo&&e[Lo]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,el;function $n(e){if(el===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);el=t&&t[1]||""}return`
`+el+e}var tl=!1;function rl(e,t){if(!e||tl)return"";tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=s.stack.split(`
`),i=a.length-1,c=l.length-1;1<=i&&0<=c&&a[i]!==l[c];)c--;for(;1<=i&&0<=c;i--,c--)if(a[i]!==l[c]){if(i!==1||c!==1)do if(i--,c--,0>c||a[i]!==l[c]){var o=`
`+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=i&&0<=c);break}}}finally{tl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$n(e):""}function hm(e){switch(e.tag){case 5:return $n(e.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 2:case 15:return e=rl(e.type,!1),e;case 11:return e=rl(e.type.render,!1),e;case 1:return e=rl(e.type,!0),e;default:return""}}function Ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case Jr:return"Portal";case Dl:return"Profiler";case Ri:return"StrictMode";case Fl:return"Suspense";case Al:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case pd:return(e._context.displayName||"Context")+".Provider";case Mi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oi:return t=e.displayName||null,t!==null?t:Ll(e.type)||"Memo";case Zt:t=e._payload,e=e._init;try{return Ll(e(t))}catch{}}return null}function pm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ll(t);case 8:return t===Ri?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xm(e){var t=vd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ps(e){e._valueTracker||(e._valueTracker=xm(e))}function bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=vd(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rl(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ro(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=pr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wd(e,t){t=t.checked,t!=null&&Li(e,"checked",t,!1)}function Ml(e,t){wd(e,t);var n=pr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ol(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ol(e,t.type,pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mo(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ol(e,t,n){(t!=="number"||sa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Un=Array.isArray;function dn(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+pr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Il(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oo(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Un(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pr(n)}}function jd(e,t){var n=pr(t.value),s=pr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Io(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _l(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ts,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function es(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ym=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(e){ym.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vn[t]=Vn[e]})});function Sd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vn.hasOwnProperty(e)&&Vn[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Sd(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var vm=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(e,t){if(t){if(vm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function $l(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=null;function Ii(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zl=null,un=null,mn=null;function _o(e){if(e=ws(e)){if(typeof zl!="function")throw Error($(280));var t=e.stateNode;t&&(t=Ia(t),zl(e.stateNode,e.type,t))}}function Ed(e){un?mn?mn.push(e):mn=[e]:un=e}function Pd(){if(un){var e=un,t=mn;if(mn=un=null,_o(e),t)for(e=0;e<t.length;e++)_o(t[e])}}function Td(e,t){return e(t)}function Dd(){}var nl=!1;function Fd(e,t,n){if(nl)return e(t,n);nl=!0;try{return Td(e,t,n)}finally{nl=!1,(un!==null||mn!==null)&&(Dd(),Pd())}}function ts(e,t){var n=e.stateNode;if(n===null)return null;var s=Ia(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Wl=!1;if(qt)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Wl=!1}function bm(e,t,n,s,a,l,i,c,o){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var qn=!1,aa=null,la=!1,Vl=null,wm={onError:function(e){qn=!0,aa=e}};function jm(e,t,n,s,a,l,i,c,o){qn=!1,aa=null,bm.apply(wm,arguments)}function km(e,t,n,s,a,l,i,c,o){if(jm.apply(this,arguments),qn){if(qn){var u=aa;qn=!1,aa=null}else throw Error($(198));la||(la=!0,Vl=u)}}function Wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bo(e){if(Wr(e)!==e)throw Error($(188))}function Nm(e){var t=e.alternate;if(!t){if(t=Wr(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Bo(a),e;if(l===s)return Bo(a),t;l=l.sibling}throw Error($(188))}if(n.return!==s.return)n=a,s=l;else{for(var i=!1,c=a.child;c;){if(c===n){i=!0,n=a,s=l;break}if(c===s){i=!0,s=a,n=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===n){i=!0,n=l,s=a;break}if(c===s){i=!0,s=l,n=a;break}c=c.sibling}if(!i)throw Error($(189))}}if(n.alternate!==s)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Ld(e){return e=Nm(e),e!==null?Rd(e):null}function Rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rd(e);if(t!==null)return t;e=e.sibling}return null}var Md=ht.unstable_scheduleCallback,$o=ht.unstable_cancelCallback,Sm=ht.unstable_shouldYield,Cm=ht.unstable_requestPaint,Ee=ht.unstable_now,Em=ht.unstable_getCurrentPriorityLevel,_i=ht.unstable_ImmediatePriority,Od=ht.unstable_UserBlockingPriority,ia=ht.unstable_NormalPriority,Pm=ht.unstable_LowPriority,Id=ht.unstable_IdlePriority,La=null,Ot=null;function Tm(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(La,e,void 0,(e.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Am,Dm=Math.log,Fm=Math.LN2;function Am(e){return e>>>=0,e===0?32:31-(Dm(e)/Fm|0)|0}var Ds=64,Fs=4194304;function zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oa(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~a;c!==0?s=zn(c):(l&=i,l!==0&&(s=zn(l)))}else i=n&~a,i!==0?s=zn(i):l!==0&&(s=zn(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Dt(t),a=1<<n,s|=e[n],t&=~a;return s}function Lm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rm(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Dt(l),c=1<<i,o=a[i];o===-1?(!(c&n)||c&s)&&(a[i]=Lm(c,t)):o<=t&&(e.expiredLanes|=c),l&=~c}}function ql(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _d(){var e=Ds;return Ds<<=1,!(Ds&4194240)&&(Ds=64),e}function sl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dt(t),e[t]=n}function Mm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Dt(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function Bi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Dt(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var de=0;function Bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $d,$i,Ud,zd,Wd,Hl=!1,As=[],ir=null,or=null,cr=null,rs=new Map,ns=new Map,tr=[],Om="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uo(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":rs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function An(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=ws(t),t!==null&&$i(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Im(e,t,n,s,a){switch(t){case"focusin":return ir=An(ir,e,t,n,s,a),!0;case"dragenter":return or=An(or,e,t,n,s,a),!0;case"mouseover":return cr=An(cr,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return rs.set(l,An(rs.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,ns.set(l,An(ns.get(l)||null,e,t,n,s,a)),!0}return!1}function Vd(e){var t=Dr(e.target);if(t!==null){var n=Wr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ad(n),t!==null){e.blockedOn=t,Wd(e.priority,function(){Ud(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ul=s,n.target.dispatchEvent(s),Ul=null}else return t=ws(n),t!==null&&$i(t),e.blockedOn=n,!1;t.shift()}return!0}function zo(e,t,n){Gs(e)&&n.delete(t)}function _m(){Hl=!1,ir!==null&&Gs(ir)&&(ir=null),or!==null&&Gs(or)&&(or=null),cr!==null&&Gs(cr)&&(cr=null),rs.forEach(zo),ns.forEach(zo)}function Ln(e,t){e.blockedOn===t&&(e.blockedOn=null,Hl||(Hl=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,_m)))}function ss(e){function t(a){return Ln(a,e)}if(0<As.length){Ln(As[0],e);for(var n=1;n<As.length;n++){var s=As[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ir!==null&&Ln(ir,e),or!==null&&Ln(or,e),cr!==null&&Ln(cr,e),rs.forEach(t),ns.forEach(t),n=0;n<tr.length;n++)s=tr[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)Vd(n),n.blockedOn===null&&tr.shift()}var fn=Jt.ReactCurrentBatchConfig,ca=!0;function Bm(e,t,n,s){var a=de,l=fn.transition;fn.transition=null;try{de=1,Ui(e,t,n,s)}finally{de=a,fn.transition=l}}function $m(e,t,n,s){var a=de,l=fn.transition;fn.transition=null;try{de=4,Ui(e,t,n,s)}finally{de=a,fn.transition=l}}function Ui(e,t,n,s){if(ca){var a=Gl(e,t,n,s);if(a===null)gl(e,t,s,da,n),Uo(e,s);else if(Im(a,e,t,n,s))s.stopPropagation();else if(Uo(e,s),t&4&&-1<Om.indexOf(e)){for(;a!==null;){var l=ws(a);if(l!==null&&$d(l),l=Gl(e,t,n,s),l===null&&gl(e,t,s,da,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else gl(e,t,s,null,n)}}var da=null;function Gl(e,t,n,s){if(da=null,e=Ii(s),e=Dr(e),e!==null)if(t=Wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return da=e,null}function qd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Em()){case _i:return 1;case Od:return 4;case ia:case Pm:return 16;case Id:return 536870912;default:return 16}default:return 16}}var nr=null,zi=null,Qs=null;function Hd(){if(Qs)return Qs;var e,t=zi,n=t.length,s,a="value"in nr?nr.value:nr.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[l-s];s++);return Qs=a.slice(e,1<s?1-s:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ls(){return!0}function Wo(){return!1}function xt(e){function t(n,s,a,l,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ls:Wo,this.isPropagationStopped=Wo,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),t}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=xt(Cn),bs=ye({},Cn,{view:0,detail:0}),Um=xt(bs),al,ll,Rn,Ra=ye({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(al=e.screenX-Rn.screenX,ll=e.screenY-Rn.screenY):ll=al=0,Rn=e),al)},movementY:function(e){return"movementY"in e?e.movementY:ll}}),Vo=xt(Ra),zm=ye({},Ra,{dataTransfer:0}),Wm=xt(zm),Vm=ye({},bs,{relatedTarget:0}),il=xt(Vm),qm=ye({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),Hm=xt(qm),Gm=ye({},Cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=xt(Gm),Jm=ye({},Cn,{data:0}),qo=xt(Jm),Ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xm[e])?!!t[e]:!1}function Vi(){return Zm}var ef=ye({},bs,{key:function(e){if(e.key){var t=Ym[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Km[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vi,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tf=xt(ef),rf=ye({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=xt(rf),nf=ye({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vi}),sf=xt(nf),af=ye({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),lf=xt(af),of=ye({},Ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=xt(of),df=[9,13,27,32],qi=qt&&"CompositionEvent"in window,Hn=null;qt&&"documentMode"in document&&(Hn=document.documentMode);var uf=qt&&"TextEvent"in window&&!Hn,Gd=qt&&(!qi||Hn&&8<Hn&&11>=Hn),Go=" ",Qo=!1;function Qd(e,t){switch(e){case"keyup":return df.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function mf(e,t){switch(e){case"compositionend":return Jd(t);case"keypress":return t.which!==32?null:(Qo=!0,Go);case"textInput":return e=t.data,e===Go&&Qo?null:e;default:return null}}function ff(e,t){if(Kr)return e==="compositionend"||!qi&&Qd(e,t)?(e=Hd(),Qs=zi=nr=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gf[e.type]:t==="textarea"}function Yd(e,t,n,s){Ed(s),t=ua(t,"onChange"),0<t.length&&(n=new Wi("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Gn=null,as=null;function hf(e){iu(e,0)}function Ma(e){var t=en(e);if(bd(t))return e}function pf(e,t){if(e==="change")return t}var Kd=!1;if(qt){var ol;if(qt){var cl="oninput"in document;if(!cl){var Yo=document.createElement("div");Yo.setAttribute("oninput","return;"),cl=typeof Yo.oninput=="function"}ol=cl}else ol=!1;Kd=ol&&(!document.documentMode||9<document.documentMode)}function Ko(){Gn&&(Gn.detachEvent("onpropertychange",Xd),as=Gn=null)}function Xd(e){if(e.propertyName==="value"&&Ma(as)){var t=[];Yd(t,as,e,Ii(e)),Fd(hf,t)}}function xf(e,t,n){e==="focusin"?(Ko(),Gn=t,as=n,Gn.attachEvent("onpropertychange",Xd)):e==="focusout"&&Ko()}function yf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ma(as)}function vf(e,t){if(e==="click")return Ma(t)}function bf(e,t){if(e==="input"||e==="change")return Ma(t)}function wf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:wf;function ls(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Tl.call(t,a)||!At(e[a],t[a]))return!1}return!0}function Xo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zo(e,t){var n=Xo(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xo(n)}}function Zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eu(){for(var e=window,t=sa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sa(e.document)}return t}function Hi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jf(e){var t=eu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zd(n.ownerDocument.documentElement,n)){if(s!==null&&Hi(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Zo(n,l);var i=Zo(n,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kf=qt&&"documentMode"in document&&11>=document.documentMode,Xr=null,Ql=null,Qn=null,Jl=!1;function ec(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jl||Xr==null||Xr!==sa(s)||(s=Xr,"selectionStart"in s&&Hi(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qn&&ls(Qn,s)||(Qn=s,s=ua(Ql,"onSelect"),0<s.length&&(t=new Wi("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Xr)))}function Rs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zr={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionend:Rs("Transition","TransitionEnd")},dl={},tu={};qt&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Oa(e){if(dl[e])return dl[e];if(!Zr[e])return e;var t=Zr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tu)return dl[e]=t[n];return e}var ru=Oa("animationend"),nu=Oa("animationiteration"),su=Oa("animationstart"),au=Oa("transitionend"),lu=new Map,tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){lu.set(e,t),zr(t,[e])}for(var ul=0;ul<tc.length;ul++){var ml=tc[ul],Nf=ml.toLowerCase(),Sf=ml[0].toUpperCase()+ml.slice(1);yr(Nf,"on"+Sf)}yr(ru,"onAnimationEnd");yr(nu,"onAnimationIteration");yr(su,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(au,"onTransitionEnd");pn("onMouseEnter",["mouseout","mouseover"]);pn("onMouseLeave",["mouseout","mouseover"]);pn("onPointerEnter",["pointerout","pointerover"]);pn("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wn));function rc(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,km(s,t,void 0,e),e.currentTarget=null}function iu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var i=s.length-1;0<=i;i--){var c=s[i],o=c.instance,u=c.currentTarget;if(c=c.listener,o!==l&&a.isPropagationStopped())break e;rc(a,c,u),l=o}else for(i=0;i<s.length;i++){if(c=s[i],o=c.instance,u=c.currentTarget,c=c.listener,o!==l&&a.isPropagationStopped())break e;rc(a,c,u),l=o}}}if(la)throw e=Vl,la=!1,Vl=null,e}function me(e,t){var n=t[ei];n===void 0&&(n=t[ei]=new Set);var s=e+"__bubble";n.has(s)||(ou(t,e,2,!1),n.add(s))}function fl(e,t,n){var s=0;t&&(s|=4),ou(n,e,s,t)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function is(e){if(!e[Ms]){e[Ms]=!0,hd.forEach(function(n){n!=="selectionchange"&&(Cf.has(n)||fl(n,!1,e),fl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ms]||(t[Ms]=!0,fl("selectionchange",!1,t))}}function ou(e,t,n,s){switch(qd(t)){case 1:var a=Bm;break;case 4:a=$m;break;default:a=Ui}n=a.bind(null,t,n,e),a=void 0,!Wl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function gl(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;i=i.return}for(;c!==null;){if(i=Dr(c),i===null)return;if(o=i.tag,o===5||o===6){s=l=i;continue e}c=c.parentNode}}s=s.return}Fd(function(){var u=l,f=Ii(n),g=[];e:{var y=lu.get(e);if(y!==void 0){var v=Wi,k=e;switch(e){case"keypress":if(Js(n)===0)break e;case"keydown":case"keyup":v=tf;break;case"focusin":k="focus",v=il;break;case"focusout":k="blur",v=il;break;case"beforeblur":case"afterblur":v=il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=sf;break;case ru:case nu:case su:v=Hm;break;case au:v=lf;break;case"scroll":v=Um;break;case"wheel":v=cf;break;case"copy":case"cut":case"paste":v=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ho}var b=(t&4)!==0,N=!b&&e==="scroll",p=b?y!==null?y+"Capture":null:y;b=[];for(var h=u,w;h!==null;){w=h;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,p!==null&&(C=ts(h,p),C!=null&&b.push(os(h,C,w)))),N)break;h=h.return}0<b.length&&(y=new v(y,k,null,n,f),g.push({event:y,listeners:b}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",y&&n!==Ul&&(k=n.relatedTarget||n.fromElement)&&(Dr(k)||k[Ht]))break e;if((v||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,v?(k=n.relatedTarget||n.toElement,v=u,k=k?Dr(k):null,k!==null&&(N=Wr(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=u),v!==k)){if(b=Vo,C="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(b=Ho,C="onPointerLeave",p="onPointerEnter",h="pointer"),N=v==null?y:en(v),w=k==null?y:en(k),y=new b(C,h+"leave",v,n,f),y.target=N,y.relatedTarget=w,C=null,Dr(f)===u&&(b=new b(p,h+"enter",k,n,f),b.target=w,b.relatedTarget=N,C=b),N=C,v&&k)t:{for(b=v,p=k,h=0,w=b;w;w=Hr(w))h++;for(w=0,C=p;C;C=Hr(C))w++;for(;0<h-w;)b=Hr(b),h--;for(;0<w-h;)p=Hr(p),w--;for(;h--;){if(b===p||p!==null&&b===p.alternate)break t;b=Hr(b),p=Hr(p)}b=null}else b=null;v!==null&&nc(g,y,v,b,!1),k!==null&&N!==null&&nc(g,N,k,b,!0)}}e:{if(y=u?en(u):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var M=pf;else if(Jo(y))if(Kd)M=bf;else{M=yf;var O=xf}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=vf);if(M&&(M=M(e,u))){Yd(g,M,n,f);break e}O&&O(e,y,u),e==="focusout"&&(O=y._wrapperState)&&O.controlled&&y.type==="number"&&Ol(y,"number",y.value)}switch(O=u?en(u):window,e){case"focusin":(Jo(O)||O.contentEditable==="true")&&(Xr=O,Ql=u,Qn=null);break;case"focusout":Qn=Ql=Xr=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,ec(g,n,f);break;case"selectionchange":if(kf)break;case"keydown":case"keyup":ec(g,n,f)}var P;if(qi)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Kr?Qd(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Gd&&n.locale!=="ko"&&(Kr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Kr&&(P=Hd()):(nr=f,zi="value"in nr?nr.value:nr.textContent,Kr=!0)),O=ua(u,D),0<O.length&&(D=new qo(D,e,null,n,f),g.push({event:D,listeners:O}),P?D.data=P:(P=Jd(n),P!==null&&(D.data=P)))),(P=uf?mf(e,n):ff(e,n))&&(u=ua(u,"onBeforeInput"),0<u.length&&(f=new qo("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:u}),f.data=P))}iu(g,t)})}function os(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ua(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ts(e,n),l!=null&&s.unshift(os(e,l,a)),l=ts(e,t),l!=null&&s.push(os(e,l,a))),e=e.return}return s}function Hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nc(e,t,n,s,a){for(var l=t._reactName,i=[];n!==null&&n!==s;){var c=n,o=c.alternate,u=c.stateNode;if(o!==null&&o===s)break;c.tag===5&&u!==null&&(c=u,a?(o=ts(n,l),o!=null&&i.unshift(os(n,o,c))):a||(o=ts(n,l),o!=null&&i.push(os(n,o,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Ef=/\r\n?/g,Pf=/\u0000|\uFFFD/g;function sc(e){return(typeof e=="string"?e:""+e).replace(Ef,`
`).replace(Pf,"")}function Os(e,t,n){if(t=sc(t),sc(e)!==t&&n)throw Error($(425))}function ma(){}var Yl=null,Kl=null;function Xl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zl=typeof setTimeout=="function"?setTimeout:void 0,Tf=typeof clearTimeout=="function"?clearTimeout:void 0,ac=typeof Promise=="function"?Promise:void 0,Df=typeof queueMicrotask=="function"?queueMicrotask:typeof ac<"u"?function(e){return ac.resolve(null).then(e).catch(Ff)}:Zl;function Ff(e){setTimeout(function(){throw e})}function hl(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),ss(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);ss(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),Mt="__reactFiber$"+En,cs="__reactProps$"+En,Ht="__reactContainer$"+En,ei="__reactEvents$"+En,Af="__reactListeners$"+En,Lf="__reactHandles$"+En;function Dr(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lc(e);e!==null;){if(n=e[Mt])return n;e=lc(e)}return t}e=n,n=e.parentNode}return null}function ws(e){return e=e[Mt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function en(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Ia(e){return e[cs]||null}var ti=[],tn=-1;function vr(e){return{current:e}}function fe(e){0>tn||(e.current=ti[tn],ti[tn]=null,tn--)}function ue(e,t){tn++,ti[tn]=e.current,e.current=t}var xr={},Je=vr(xr),it=vr(!1),Ir=xr;function xn(e,t){var n=e.type.contextTypes;if(!n)return xr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ot(e){return e=e.childContextTypes,e!=null}function fa(){fe(it),fe(Je)}function ic(e,t,n){if(Je.current!==xr)throw Error($(168));ue(Je,t),ue(it,n)}function cu(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error($(108,pm(e)||"Unknown",a));return ye({},n,s)}function ga(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xr,Ir=Je.current,ue(Je,e),ue(it,it.current),!0}function oc(e,t,n){var s=e.stateNode;if(!s)throw Error($(169));n?(e=cu(e,t,Ir),s.__reactInternalMemoizedMergedChildContext=e,fe(it),fe(Je),ue(Je,e)):fe(it),ue(it,n)}var Ut=null,_a=!1,pl=!1;function du(e){Ut===null?Ut=[e]:Ut.push(e)}function Rf(e){_a=!0,du(e)}function br(){if(!pl&&Ut!==null){pl=!0;var e=0,t=de;try{var n=Ut;for(de=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ut=null,_a=!1}catch(a){throw Ut!==null&&(Ut=Ut.slice(e+1)),Md(_i,br),a}finally{de=t,pl=!1}}return null}var rn=[],nn=0,ha=null,pa=0,vt=[],bt=0,_r=null,zt=1,Wt="";function Cr(e,t){rn[nn++]=pa,rn[nn++]=ha,ha=e,pa=t}function uu(e,t,n){vt[bt++]=zt,vt[bt++]=Wt,vt[bt++]=_r,_r=e;var s=zt;e=Wt;var a=32-Dt(s)-1;s&=~(1<<a),n+=1;var l=32-Dt(t)+a;if(30<l){var i=a-a%5;l=(s&(1<<i)-1).toString(32),s>>=i,a-=i,zt=1<<32-Dt(t)+a|n<<a|s,Wt=l+e}else zt=1<<l|n<<a|s,Wt=e}function Gi(e){e.return!==null&&(Cr(e,1),uu(e,1,0))}function Qi(e){for(;e===ha;)ha=rn[--nn],rn[nn]=null,pa=rn[--nn],rn[nn]=null;for(;e===_r;)_r=vt[--bt],vt[bt]=null,Wt=vt[--bt],vt[bt]=null,zt=vt[--bt],vt[bt]=null}var gt=null,ft=null,ge=!1,Tt=null;function mu(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,ft=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_r!==null?{id:zt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,ft=null,!0):!1;default:return!1}}function ri(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ni(e){if(ge){var t=ft;if(t){var n=t;if(!cc(e,t)){if(ri(e))throw Error($(418));t=dr(n.nextSibling);var s=gt;t&&cc(e,t)?mu(s,n):(e.flags=e.flags&-4097|2,ge=!1,gt=e)}}else{if(ri(e))throw Error($(418));e.flags=e.flags&-4097|2,ge=!1,gt=e}}}function dc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Is(e){if(e!==gt)return!1;if(!ge)return dc(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xl(e.type,e.memoizedProps)),t&&(t=ft)){if(ri(e))throw fu(),Error($(418));for(;t;)mu(e,t),t=dr(t.nextSibling)}if(dc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ft=dr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=gt?dr(e.stateNode.nextSibling):null;return!0}function fu(){for(var e=ft;e;)e=dr(e.nextSibling)}function yn(){ft=gt=null,ge=!1}function Ji(e){Tt===null?Tt=[e]:Tt.push(e)}var Mf=Jt.ReactCurrentBatchConfig;function Mn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var s=n.stateNode}if(!s)throw Error($(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var c=a.refs;i===null?delete c[l]:c[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function _s(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uc(e){var t=e._init;return t(e._payload)}function gu(e){function t(p,h){if(e){var w=p.deletions;w===null?(p.deletions=[h],p.flags|=16):w.push(h)}}function n(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function s(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function a(p,h){return p=gr(p,h),p.index=0,p.sibling=null,p}function l(p,h,w){return p.index=w,e?(w=p.alternate,w!==null?(w=w.index,w<h?(p.flags|=2,h):w):(p.flags|=2,h)):(p.flags|=1048576,h)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,h,w,C){return h===null||h.tag!==6?(h=kl(w,p.mode,C),h.return=p,h):(h=a(h,w),h.return=p,h)}function o(p,h,w,C){var M=w.type;return M===Yr?f(p,h,w.props.children,C,w.key):h!==null&&(h.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zt&&uc(M)===h.type)?(C=a(h,w.props),C.ref=Mn(p,h,w),C.return=p,C):(C=ra(w.type,w.key,w.props,null,p.mode,C),C.ref=Mn(p,h,w),C.return=p,C)}function u(p,h,w,C){return h===null||h.tag!==4||h.stateNode.containerInfo!==w.containerInfo||h.stateNode.implementation!==w.implementation?(h=Nl(w,p.mode,C),h.return=p,h):(h=a(h,w.children||[]),h.return=p,h)}function f(p,h,w,C,M){return h===null||h.tag!==7?(h=Or(w,p.mode,C,M),h.return=p,h):(h=a(h,w),h.return=p,h)}function g(p,h,w){if(typeof h=="string"&&h!==""||typeof h=="number")return h=kl(""+h,p.mode,w),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Es:return w=ra(h.type,h.key,h.props,null,p.mode,w),w.ref=Mn(p,null,h),w.return=p,w;case Jr:return h=Nl(h,p.mode,w),h.return=p,h;case Zt:var C=h._init;return g(p,C(h._payload),w)}if(Un(h)||Dn(h))return h=Or(h,p.mode,w,null),h.return=p,h;_s(p,h)}return null}function y(p,h,w,C){var M=h!==null?h.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:c(p,h,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Es:return w.key===M?o(p,h,w,C):null;case Jr:return w.key===M?u(p,h,w,C):null;case Zt:return M=w._init,y(p,h,M(w._payload),C)}if(Un(w)||Dn(w))return M!==null?null:f(p,h,w,C,null);_s(p,w)}return null}function v(p,h,w,C,M){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(w)||null,c(h,p,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Es:return p=p.get(C.key===null?w:C.key)||null,o(h,p,C,M);case Jr:return p=p.get(C.key===null?w:C.key)||null,u(h,p,C,M);case Zt:var O=C._init;return v(p,h,w,O(C._payload),M)}if(Un(C)||Dn(C))return p=p.get(w)||null,f(h,p,C,M,null);_s(h,C)}return null}function k(p,h,w,C){for(var M=null,O=null,P=h,D=h=0,B=null;P!==null&&D<w.length;D++){P.index>D?(B=P,P=null):B=P.sibling;var z=y(p,P,w[D],C);if(z===null){P===null&&(P=B);break}e&&P&&z.alternate===null&&t(p,P),h=l(z,h,D),O===null?M=z:O.sibling=z,O=z,P=B}if(D===w.length)return n(p,P),ge&&Cr(p,D),M;if(P===null){for(;D<w.length;D++)P=g(p,w[D],C),P!==null&&(h=l(P,h,D),O===null?M=P:O.sibling=P,O=P);return ge&&Cr(p,D),M}for(P=s(p,P);D<w.length;D++)B=v(P,p,D,w[D],C),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?D:B.key),h=l(B,h,D),O===null?M=B:O.sibling=B,O=B);return e&&P.forEach(function(X){return t(p,X)}),ge&&Cr(p,D),M}function b(p,h,w,C){var M=Dn(w);if(typeof M!="function")throw Error($(150));if(w=M.call(w),w==null)throw Error($(151));for(var O=M=null,P=h,D=h=0,B=null,z=w.next();P!==null&&!z.done;D++,z=w.next()){P.index>D?(B=P,P=null):B=P.sibling;var X=y(p,P,z.value,C);if(X===null){P===null&&(P=B);break}e&&P&&X.alternate===null&&t(p,P),h=l(X,h,D),O===null?M=X:O.sibling=X,O=X,P=B}if(z.done)return n(p,P),ge&&Cr(p,D),M;if(P===null){for(;!z.done;D++,z=w.next())z=g(p,z.value,C),z!==null&&(h=l(z,h,D),O===null?M=z:O.sibling=z,O=z);return ge&&Cr(p,D),M}for(P=s(p,P);!z.done;D++,z=w.next())z=v(P,p,D,z.value,C),z!==null&&(e&&z.alternate!==null&&P.delete(z.key===null?D:z.key),h=l(z,h,D),O===null?M=z:O.sibling=z,O=z);return e&&P.forEach(function(U){return t(p,U)}),ge&&Cr(p,D),M}function N(p,h,w,C){if(typeof w=="object"&&w!==null&&w.type===Yr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Es:e:{for(var M=w.key,O=h;O!==null;){if(O.key===M){if(M=w.type,M===Yr){if(O.tag===7){n(p,O.sibling),h=a(O,w.props.children),h.return=p,p=h;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zt&&uc(M)===O.type){n(p,O.sibling),h=a(O,w.props),h.ref=Mn(p,O,w),h.return=p,p=h;break e}n(p,O);break}else t(p,O);O=O.sibling}w.type===Yr?(h=Or(w.props.children,p.mode,C,w.key),h.return=p,p=h):(C=ra(w.type,w.key,w.props,null,p.mode,C),C.ref=Mn(p,h,w),C.return=p,p=C)}return i(p);case Jr:e:{for(O=w.key;h!==null;){if(h.key===O)if(h.tag===4&&h.stateNode.containerInfo===w.containerInfo&&h.stateNode.implementation===w.implementation){n(p,h.sibling),h=a(h,w.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else t(p,h);h=h.sibling}h=Nl(w,p.mode,C),h.return=p,p=h}return i(p);case Zt:return O=w._init,N(p,h,O(w._payload),C)}if(Un(w))return k(p,h,w,C);if(Dn(w))return b(p,h,w,C);_s(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,h!==null&&h.tag===6?(n(p,h.sibling),h=a(h,w),h.return=p,p=h):(n(p,h),h=kl(w,p.mode,C),h.return=p,p=h),i(p)):n(p,h)}return N}var vn=gu(!0),hu=gu(!1),xa=vr(null),ya=null,sn=null,Yi=null;function Ki(){Yi=sn=ya=null}function Xi(e){var t=xa.current;fe(xa),e._currentValue=t}function si(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function gn(e,t){ya=e,Yi=sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Nt(e){var t=e._currentValue;if(Yi!==e)if(e={context:e,memoizedValue:t,next:null},sn===null){if(ya===null)throw Error($(308));sn=e,ya.dependencies={lanes:0,firstContext:e}}else sn=sn.next=e;return t}var Fr=null;function Zi(e){Fr===null?Fr=[e]:Fr.push(e)}function pu(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,Zi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Gt(e,s)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var er=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ce&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Gt(e,n)}return a=s.interleaved,a===null?(t.next=t,Zi(s)):(t.next=a.next,a.next=t),s.interleaved=t,Gt(e,n)}function Ys(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Bi(e,n)}}function mc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function va(e,t,n,s){var a=e.updateQueue;er=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,u=o.next;o.next=null,i===null?l=u:i.next=u,i=o;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==i&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=o))}if(l!==null){var g=a.baseState;i=0,f=u=o=null,c=l;do{var y=c.lane,v=c.eventTime;if((s&y)===y){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=e,b=c;switch(y=t,v=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(v,g,y);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,y=typeof k=="function"?k.call(v,g,y):k,y==null)break e;g=ye({},g,y);break e;case 2:er=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[c]:y.push(c))}else v={eventTime:v,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=v,o=g):f=f.next=v,i|=y;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;y=c,c=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(f===null&&(o=g),a.baseState=o,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);$r|=i,e.lanes=i,e.memoizedState=g}}function fc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error($(191,a));a.call(s)}}}var js={},It=vr(js),ds=vr(js),us=vr(js);function Ar(e){if(e===js)throw Error($(174));return e}function to(e,t){switch(ue(us,t),ue(ds,e),ue(It,js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_l(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_l(t,e)}fe(It),ue(It,t)}function bn(){fe(It),fe(ds),fe(us)}function yu(e){Ar(us.current);var t=Ar(It.current),n=_l(t,e.type);t!==n&&(ue(ds,e),ue(It,n))}function ro(e){ds.current===e&&(fe(It),fe(ds))}var pe=vr(0);function ba(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xl=[];function no(){for(var e=0;e<xl.length;e++)xl[e]._workInProgressVersionPrimary=null;xl.length=0}var Ks=Jt.ReactCurrentDispatcher,yl=Jt.ReactCurrentBatchConfig,Br=0,xe=null,Fe=null,Le=null,wa=!1,Jn=!1,ms=0,Of=0;function Ve(){throw Error($(321))}function so(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function ao(e,t,n,s,a,l){if(Br=l,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ks.current=e===null||e.memoizedState===null?$f:Uf,e=n(s,a),Jn){l=0;do{if(Jn=!1,ms=0,25<=l)throw Error($(301));l+=1,Le=Fe=null,t.updateQueue=null,Ks.current=zf,e=n(s,a)}while(Jn)}if(Ks.current=ja,t=Fe!==null&&Fe.next!==null,Br=0,Le=Fe=xe=null,wa=!1,t)throw Error($(300));return e}function lo(){var e=ms!==0;return ms=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?xe.memoizedState=Le=e:Le=Le.next=e,Le}function St(){if(Fe===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=Le===null?xe.memoizedState:Le.next;if(t!==null)Le=t,Fe=e;else{if(e===null)throw Error($(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Le===null?xe.memoizedState=Le=e:Le=Le.next=e}return Le}function fs(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=St(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=Fe,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var c=i=null,o=null,u=l;do{var f=u.lane;if((Br&f)===f)o!==null&&(o=o.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var g={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};o===null?(c=o=g,i=s):o=o.next=g,xe.lanes|=f,$r|=f}u=u.next}while(u!==null&&u!==l);o===null?i=s:o.next=c,At(s,t.memoizedState)||(lt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=o,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,xe.lanes|=l,$r|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bl(e){var t=St(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);At(l,t.memoizedState)||(lt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function vu(){}function bu(e,t){var n=xe,s=St(),a=t(),l=!At(s.memoizedState,a);if(l&&(s.memoizedState=a,lt=!0),s=s.queue,io(ku.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,gs(9,ju.bind(null,n,s,a,t),void 0,null),Re===null)throw Error($(349));Br&30||wu(n,t,a)}return a}function wu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ju(e,t,n,s){t.value=n,t.getSnapshot=s,Nu(t)&&Su(e)}function ku(e,t,n){return n(function(){Nu(t)&&Su(e)})}function Nu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function Su(e){var t=Gt(e,1);t!==null&&Ft(t,e,1,-1)}function gc(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=Bf.bind(null,xe,e),[t.memoizedState,e]}function gs(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Cu(){return St().memoizedState}function Xs(e,t,n,s){var a=Rt();xe.flags|=e,a.memoizedState=gs(1|t,n,void 0,s===void 0?null:s)}function Ba(e,t,n,s){var a=St();s=s===void 0?null:s;var l=void 0;if(Fe!==null){var i=Fe.memoizedState;if(l=i.destroy,s!==null&&so(s,i.deps)){a.memoizedState=gs(t,n,l,s);return}}xe.flags|=e,a.memoizedState=gs(1|t,n,l,s)}function hc(e,t){return Xs(8390656,8,e,t)}function io(e,t){return Ba(2048,8,e,t)}function Eu(e,t){return Ba(4,2,e,t)}function Pu(e,t){return Ba(4,4,e,t)}function Tu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Du(e,t,n){return n=n!=null?n.concat([e]):null,Ba(4,4,Tu.bind(null,t,e),n)}function oo(){}function Fu(e,t){var n=St();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&so(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Au(e,t){var n=St();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&so(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Lu(e,t,n){return Br&21?(At(n,t)||(n=_d(),xe.lanes|=n,$r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function If(e,t){var n=de;de=n!==0&&4>n?n:4,e(!0);var s=yl.transition;yl.transition={};try{e(!1),t()}finally{de=n,yl.transition=s}}function Ru(){return St().memoizedState}function _f(e,t,n){var s=fr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Mu(e))Ou(t,n);else if(n=pu(e,t,n,s),n!==null){var a=Ze();Ft(n,e,s,a),Iu(n,t,s)}}function Bf(e,t,n){var s=fr(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mu(e))Ou(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,c=l(i,n);if(a.hasEagerState=!0,a.eagerState=c,At(c,i)){var o=t.interleaved;o===null?(a.next=a,Zi(t)):(a.next=o.next,o.next=a),t.interleaved=a;return}}catch{}finally{}n=pu(e,t,a,s),n!==null&&(a=Ze(),Ft(n,e,s,a),Iu(n,t,s))}}function Mu(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Ou(e,t){Jn=wa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Iu(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Bi(e,n)}}var ja={readContext:Nt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},$f={readContext:Nt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xs(4194308,4,Tu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xs(4,2,e,t)},useMemo:function(e,t){var n=Rt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Rt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=_f.bind(null,xe,e),[s.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:gc,useDebugValue:oo,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=gc(!1),t=e[0];return e=If.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=xe,a=Rt();if(ge){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Re===null)throw Error($(349));Br&30||wu(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,hc(ku.bind(null,s,l,e),[e]),s.flags|=2048,gs(9,ju.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=Rt(),t=Re.identifierPrefix;if(ge){var n=Wt,s=zt;n=(s&~(1<<32-Dt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=ms++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Of++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Uf={readContext:Nt,useCallback:Fu,useContext:Nt,useEffect:io,useImperativeHandle:Du,useInsertionEffect:Eu,useLayoutEffect:Pu,useMemo:Au,useReducer:vl,useRef:Cu,useState:function(){return vl(fs)},useDebugValue:oo,useDeferredValue:function(e){var t=St();return Lu(t,Fe.memoizedState,e)},useTransition:function(){var e=vl(fs)[0],t=St().memoizedState;return[e,t]},useMutableSource:vu,useSyncExternalStore:bu,useId:Ru,unstable_isNewReconciler:!1},zf={readContext:Nt,useCallback:Fu,useContext:Nt,useEffect:io,useImperativeHandle:Du,useInsertionEffect:Eu,useLayoutEffect:Pu,useMemo:Au,useReducer:bl,useRef:Cu,useState:function(){return bl(fs)},useDebugValue:oo,useDeferredValue:function(e){var t=St();return Fe===null?t.memoizedState=e:Lu(t,Fe.memoizedState,e)},useTransition:function(){var e=bl(fs)[0],t=St().memoizedState;return[e,t]},useMutableSource:vu,useSyncExternalStore:bu,useId:Ru,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ai(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $a={isMounted:function(e){return(e=e._reactInternals)?Wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ze(),a=fr(e),l=Vt(s,a);l.payload=t,n!=null&&(l.callback=n),t=ur(e,l,a),t!==null&&(Ft(t,e,a,s),Ys(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ze(),a=fr(e),l=Vt(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=ur(e,l,a),t!==null&&(Ft(t,e,a,s),Ys(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ze(),s=fr(e),a=Vt(n,s);a.tag=2,t!=null&&(a.callback=t),t=ur(e,a,s),t!==null&&(Ft(t,e,s,n),Ys(t,e,s))}};function pc(e,t,n,s,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,i):t.prototype&&t.prototype.isPureReactComponent?!ls(n,s)||!ls(a,l):!0}function _u(e,t,n){var s=!1,a=xr,l=t.contextType;return typeof l=="object"&&l!==null?l=Nt(l):(a=ot(t)?Ir:Je.current,s=t.contextTypes,l=(s=s!=null)?xn(e,a):xr),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function xc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function li(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},eo(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Nt(l):(l=ot(t)?Ir:Je.current,a.context=xn(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ai(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&$a.enqueueReplaceState(a,a.state,null),va(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function wn(e,t){try{var n="",s=t;do n+=hm(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function wl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ii(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Wf=typeof WeakMap=="function"?WeakMap:Map;function Bu(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Na||(Na=!0,xi=s),ii(e,t)},n}function $u(e,t,n){n=Vt(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){ii(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ii(e,t),typeof s!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function yc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Wf;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=ng.bind(null,e,t,n),t.then(e,e))}function vc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bc(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,ur(n,t,1))),n.lanes|=1),e)}var Vf=Jt.ReactCurrentOwner,lt=!1;function Ke(e,t,n,s){t.child=e===null?hu(t,null,n,s):vn(t,e.child,n,s)}function wc(e,t,n,s,a){n=n.render;var l=t.ref;return gn(t,a),s=ao(e,t,n,s,l,a),n=lo(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qt(e,t,a)):(ge&&n&&Gi(t),t.flags|=1,Ke(e,t,s,a),t.child)}function jc(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!xo(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Uu(e,t,l,s,a)):(e=ra(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(i,s)&&e.ref===t.ref)return Qt(e,t,a)}return t.flags|=1,e=gr(l,s),e.ref=t.ref,e.return=t,t.child=e}function Uu(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(ls(l,s)&&e.ref===t.ref)if(lt=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,Qt(e,t,a)}return oi(e,t,n,s,a)}function zu(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(ln,ut),ut|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(ln,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,ue(ln,ut),ut|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,ue(ln,ut),ut|=s;return Ke(e,t,a,n),t.child}function Wu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function oi(e,t,n,s,a){var l=ot(n)?Ir:Je.current;return l=xn(t,l),gn(t,a),n=ao(e,t,n,s,l,a),s=lo(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qt(e,t,a)):(ge&&s&&Gi(t),t.flags|=1,Ke(e,t,n,a),t.child)}function kc(e,t,n,s,a){if(ot(n)){var l=!0;ga(t)}else l=!1;if(gn(t,a),t.stateNode===null)Zs(e,t),_u(t,n,s),li(t,n,s,a),s=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var o=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nt(u):(u=ot(n)?Ir:Je.current,u=xn(t,u));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";g||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==s||o!==u)&&xc(t,i,s,u),er=!1;var y=t.memoizedState;i.state=y,va(t,s,i,a),o=t.memoizedState,c!==s||y!==o||it.current||er?(typeof f=="function"&&(ai(t,n,f,s),o=t.memoizedState),(c=er||pc(t,n,c,s,y,o,u))?(g||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),i.props=s,i.state=o,i.context=u,s=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,xu(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Et(t.type,c),i.props=u,g=t.pendingProps,y=i.context,o=n.contextType,typeof o=="object"&&o!==null?o=Nt(o):(o=ot(n)?Ir:Je.current,o=xn(t,o));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==g||y!==o)&&xc(t,i,s,o),er=!1,y=t.memoizedState,i.state=y,va(t,s,i,a);var k=t.memoizedState;c!==g||y!==k||it.current||er?(typeof v=="function"&&(ai(t,n,v,s),k=t.memoizedState),(u=er||pc(t,n,u,s,y,k,o)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,k,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,k,o)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=k),i.props=s,i.state=k,i.context=o,s=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),s=!1)}return ci(e,t,n,s,l,a)}function ci(e,t,n,s,a,l){Wu(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&oc(t,n,!1),Qt(e,t,l);s=t.stateNode,Vf.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=vn(t,e.child,null,l),t.child=vn(t,null,c,l)):Ke(e,t,c,l),t.memoizedState=s.state,a&&oc(t,n,!0),t.child}function Vu(e){var t=e.stateNode;t.pendingContext?ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ic(e,t.context,!1),to(e,t.containerInfo)}function Nc(e,t,n,s,a){return yn(),Ji(a),t.flags|=256,Ke(e,t,n,s),t.child}var di={dehydrated:null,treeContext:null,retryLane:0};function ui(e){return{baseLanes:e,cachePool:null,transitions:null}}function qu(e,t,n){var s=t.pendingProps,a=pe.current,l=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ue(pe,a&1),e===null)return ni(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,l?(s=t.mode,l=t.child,i={mode:"hidden",children:i},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Wa(i,s,0,null),e=Or(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ui(n),t.memoizedState=di,e):co(t,i));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return qf(e,t,i,s,c,a,n);if(l){l=s.fallback,i=t.mode,a=e.child,c=a.sibling;var o={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=gr(a,o),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=gr(c,l):(l=Or(l,i,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,i=e.child.memoizedState,i=i===null?ui(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=di,s}return l=e.child,e=l.sibling,s=gr(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function co(e,t){return t=Wa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bs(e,t,n,s){return s!==null&&Ji(s),vn(t,e.child,null,n),e=co(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qf(e,t,n,s,a,l,i){if(n)return t.flags&256?(t.flags&=-257,s=wl(Error($(422))),Bs(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Wa({mode:"visible",children:s.children},a,0,null),l=Or(l,a,i,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&vn(t,e.child,null,i),t.child.memoizedState=ui(i),t.memoizedState=di,l);if(!(t.mode&1))return Bs(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,l=Error($(419)),s=wl(l,s,void 0),Bs(e,t,i,s)}if(c=(i&e.childLanes)!==0,lt||c){if(s=Re,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Gt(e,a),Ft(s,e,a,-1))}return po(),s=wl(Error($(421))),Bs(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=sg.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,ft=dr(a.nextSibling),gt=t,ge=!0,Tt=null,e!==null&&(vt[bt++]=zt,vt[bt++]=Wt,vt[bt++]=_r,zt=e.id,Wt=e.overflow,_r=t),t=co(t,s.children),t.flags|=4096,t)}function Sc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),si(e.return,t,n)}function jl(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Hu(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(Ke(e,t,s.children,n),s=pe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sc(e,n,t);else if(e.tag===19)Sc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ue(pe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ba(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jl(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ba(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jl(t,!0,n,null,l);break;case"together":jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=gr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hf(e,t,n){switch(t.tag){case 3:Vu(t),yn();break;case 5:yu(t);break;case 1:ot(t.type)&&ga(t);break;case 4:to(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ue(xa,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ue(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?qu(e,t,n):(ue(pe,pe.current&1),e=Qt(e,t,n),e!==null?e.sibling:null);ue(pe,pe.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Hu(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ue(pe,pe.current),s)break;return null;case 22:case 23:return t.lanes=0,zu(e,t,n)}return Qt(e,t,n)}var Gu,mi,Qu,Ju;Gu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mi=function(){};Qu=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Ar(It.current);var l=null;switch(n){case"input":a=Rl(e,a),s=Rl(e,s),l=[];break;case"select":a=ye({},a,{value:void 0}),s=ye({},s,{value:void 0}),l=[];break;case"textarea":a=Il(e,a),s=Il(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ma)}Bl(n,s);var i;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zn.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in s){var o=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&o!==c&&(o!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(n||(n={}),n[i]=o[i])}else n||(l||(l=[]),l.push(u,n)),n=o;else u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(l=l||[]).push(u,o)):u==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(u,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zn.hasOwnProperty(u)?(o!=null&&u==="onScroll"&&me("scroll",e),l||c===o||(l=[])):(l=l||[]).push(u,o))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Ju=function(e,t,n,s){n!==s&&(t.flags|=4)};function On(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Gf(e,t,n){var s=t.pendingProps;switch(Qi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return ot(t.type)&&fa(),qe(t),null;case 3:return s=t.stateNode,bn(),fe(it),fe(Je),no(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(bi(Tt),Tt=null))),mi(e,t),qe(t),null;case 5:ro(t);var a=Ar(us.current);if(n=t.type,e!==null&&t.stateNode!=null)Qu(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error($(166));return qe(t),null}if(e=Ar(It.current),Is(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[Mt]=t,s[cs]=l,e=(t.mode&1)!==0,n){case"dialog":me("cancel",s),me("close",s);break;case"iframe":case"object":case"embed":me("load",s);break;case"video":case"audio":for(a=0;a<Wn.length;a++)me(Wn[a],s);break;case"source":me("error",s);break;case"img":case"image":case"link":me("error",s),me("load",s);break;case"details":me("toggle",s);break;case"input":Ro(s,l),me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},me("invalid",s);break;case"textarea":Oo(s,l),me("invalid",s)}Bl(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="children"?typeof c=="string"?s.textContent!==c&&(l.suppressHydrationWarning!==!0&&Os(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Os(s.textContent,c,e),a=["children",""+c]):Zn.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&me("scroll",s)}switch(n){case"input":Ps(s),Mo(s,l,!0);break;case"textarea":Ps(s),Io(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=ma)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[Mt]=t,e[cs]=s,Gu(e,t,!1,!1),t.stateNode=e;e:{switch(i=$l(n,s),n){case"dialog":me("cancel",e),me("close",e),a=s;break;case"iframe":case"object":case"embed":me("load",e),a=s;break;case"video":case"audio":for(a=0;a<Wn.length;a++)me(Wn[a],e);a=s;break;case"source":me("error",e),a=s;break;case"img":case"image":case"link":me("error",e),me("load",e),a=s;break;case"details":me("toggle",e),a=s;break;case"input":Ro(e,s),a=Rl(e,s),me("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=ye({},s,{value:void 0}),me("invalid",e);break;case"textarea":Oo(e,s),a=Il(e,s),me("invalid",e);break;default:a=s}Bl(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var o=c[l];l==="style"?Cd(e,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Nd(e,o)):l==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&es(e,o):typeof o=="number"&&es(e,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Zn.hasOwnProperty(l)?o!=null&&l==="onScroll"&&me("scroll",e):o!=null&&Li(e,l,o,i))}switch(n){case"input":Ps(e),Mo(e,s,!1);break;case"textarea":Ps(e),Io(e);break;case"option":s.value!=null&&e.setAttribute("value",""+pr(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?dn(e,!!s.multiple,l,!1):s.defaultValue!=null&&dn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ma)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qe(t),null;case 6:if(e&&t.stateNode!=null)Ju(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error($(166));if(n=Ar(us.current),Ar(It.current),Is(t)){if(s=t.stateNode,n=t.memoizedProps,s[Mt]=t,(l=s.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:Os(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Mt]=t,t.stateNode=s}return qe(t),null;case 13:if(fe(pe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&ft!==null&&t.mode&1&&!(t.flags&128))fu(),yn(),t.flags|=98560,l=!1;else if(l=Is(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error($(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[Mt]=t}else yn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qe(t),l=!1}else Tt!==null&&(bi(Tt),Tt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Ae===0&&(Ae=3):po())),t.updateQueue!==null&&(t.flags|=4),qe(t),null);case 4:return bn(),mi(e,t),e===null&&is(t.stateNode.containerInfo),qe(t),null;case 10:return Xi(t.type._context),qe(t),null;case 17:return ot(t.type)&&fa(),qe(t),null;case 19:if(fe(pe),l=t.memoizedState,l===null)return qe(t),null;if(s=(t.flags&128)!==0,i=l.rendering,i===null)if(s)On(l,!1);else{if(Ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ba(e),i!==null){for(t.flags|=128,On(l,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(pe,pe.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ee()>jn&&(t.flags|=128,s=!0,On(l,!1),t.lanes=4194304)}else{if(!s)if(e=ba(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),On(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ge)return qe(t),null}else 2*Ee()-l.renderingStartTime>jn&&n!==1073741824&&(t.flags|=128,s=!0,On(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ee(),t.sibling=null,n=pe.current,ue(pe,s?n&1|2:n&1),t):(qe(t),null);case 22:case 23:return ho(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ut&1073741824&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function Qf(e,t){switch(Qi(t),t.tag){case 1:return ot(t.type)&&fa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bn(),fe(it),fe(Je),no(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ro(t),null;case 13:if(fe(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(pe),null;case 4:return bn(),null;case 10:return Xi(t.type._context),null;case 22:case 23:return ho(),null;case 24:return null;default:return null}}var $s=!1,Ge=!1,Jf=typeof WeakSet=="function"?WeakSet:Set,J=null;function an(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){be(e,t,s)}else n.current=null}function fi(e,t,n){try{n()}catch(s){be(e,t,s)}}var Cc=!1;function Yf(e,t){if(Yl=ca,e=eu(),Hi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,c=-1,o=-1,u=0,f=0,g=e,y=null;t:for(;;){for(var v;g!==n||a!==0&&g.nodeType!==3||(c=i+a),g!==l||s!==0&&g.nodeType!==3||(o=i+s),g.nodeType===3&&(i+=g.nodeValue.length),(v=g.firstChild)!==null;)y=g,g=v;for(;;){if(g===e)break t;if(y===n&&++u===a&&(c=i),y===l&&++f===s&&(o=i),(v=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=v}n=c===-1||o===-1?null:{start:c,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kl={focusedElem:e,selectionRange:n},ca=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,N=k.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:Et(t.type,b),N);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){be(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return k=Cc,Cc=!1,k}function Yn(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&fi(t,n,l)}a=a.next}while(a!==s)}}function Ua(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function gi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Yu(e){var t=e.alternate;t!==null&&(e.alternate=null,Yu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[cs],delete t[ei],delete t[Af],delete t[Lf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ku(e){return e.tag===5||e.tag===3||e.tag===4}function Ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ku(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ma));else if(s!==4&&(e=e.child,e!==null))for(hi(e,t,n),e=e.sibling;e!==null;)hi(e,t,n),e=e.sibling}function pi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var Be=null,Pt=!1;function Kt(e,t,n){for(n=n.child;n!==null;)Xu(e,t,n),n=n.sibling}function Xu(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(La,n)}catch{}switch(n.tag){case 5:Ge||an(n,t);case 6:var s=Be,a=Pt;Be=null,Kt(e,t,n),Be=s,Pt=a,Be!==null&&(Pt?(e=Be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Pt?(e=Be,n=n.stateNode,e.nodeType===8?hl(e.parentNode,n):e.nodeType===1&&hl(e,n),ss(e)):hl(Be,n.stateNode));break;case 4:s=Be,a=Pt,Be=n.stateNode.containerInfo,Pt=!0,Kt(e,t,n),Be=s,Pt=a;break;case 0:case 11:case 14:case 15:if(!Ge&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&fi(n,t,i),a=a.next}while(a!==s)}Kt(e,t,n);break;case 1:if(!Ge&&(an(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){be(n,t,c)}Kt(e,t,n);break;case 21:Kt(e,t,n);break;case 22:n.mode&1?(Ge=(s=Ge)||n.memoizedState!==null,Kt(e,t,n),Ge=s):Kt(e,t,n);break;default:Kt(e,t,n)}}function Pc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Jf),t.forEach(function(s){var a=ag.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:Be=c.stateNode,Pt=!1;break e;case 3:Be=c.stateNode.containerInfo,Pt=!0;break e;case 4:Be=c.stateNode.containerInfo,Pt=!0;break e}c=c.return}if(Be===null)throw Error($(160));Xu(l,i,a),Be=null,Pt=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(u){be(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zu(t,e),t=t.sibling}function Zu(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Lt(e),s&4){try{Yn(3,e,e.return),Ua(3,e)}catch(b){be(e,e.return,b)}try{Yn(5,e,e.return)}catch(b){be(e,e.return,b)}}break;case 1:Ct(t,e),Lt(e),s&512&&n!==null&&an(n,n.return);break;case 5:if(Ct(t,e),Lt(e),s&512&&n!==null&&an(n,n.return),e.flags&32){var a=e.stateNode;try{es(a,"")}catch(b){be(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&wd(a,l),$l(c,i);var u=$l(c,l);for(i=0;i<o.length;i+=2){var f=o[i],g=o[i+1];f==="style"?Cd(a,g):f==="dangerouslySetInnerHTML"?Nd(a,g):f==="children"?es(a,g):Li(a,f,g,u)}switch(c){case"input":Ml(a,l);break;case"textarea":jd(a,l);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?dn(a,!!l.multiple,v,!1):y!==!!l.multiple&&(l.defaultValue!=null?dn(a,!!l.multiple,l.defaultValue,!0):dn(a,!!l.multiple,l.multiple?[]:"",!1))}a[cs]=l}catch(b){be(e,e.return,b)}}break;case 6:if(Ct(t,e),Lt(e),s&4){if(e.stateNode===null)throw Error($(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(b){be(e,e.return,b)}}break;case 3:if(Ct(t,e),Lt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ss(t.containerInfo)}catch(b){be(e,e.return,b)}break;case 4:Ct(t,e),Lt(e);break;case 13:Ct(t,e),Lt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(fo=Ee())),s&4&&Pc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(u=Ge)||f,Ct(t,e),Ge=u):Ct(t,e),Lt(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(g=J=f;J!==null;){switch(y=J,v=y.child,y.tag){case 0:case 11:case 14:case 15:Yn(4,y,y.return);break;case 1:an(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){s=y,n=y.return;try{t=s,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(b){be(s,n,b)}}break;case 5:an(y,y.return);break;case 22:if(y.memoizedState!==null){Dc(g);continue}}v!==null?(v.return=y,J=v):Dc(g)}f=f.sibling}e:for(f=null,g=e;;){if(g.tag===5){if(f===null){f=g;try{a=g.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=g.stateNode,o=g.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Sd("display",i))}catch(b){be(e,e.return,b)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(b){be(e,e.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ct(t,e),Lt(e),s&4&&Pc(e);break;case 21:break;default:Ct(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ku(n)){var s=n;break e}n=n.return}throw Error($(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(es(a,""),s.flags&=-33);var l=Ec(e);pi(e,l,a);break;case 3:case 4:var i=s.stateNode.containerInfo,c=Ec(e);hi(e,c,i);break;default:throw Error($(161))}}catch(o){be(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kf(e,t,n){J=e,e0(e)}function e0(e,t,n){for(var s=(e.mode&1)!==0;J!==null;){var a=J,l=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||$s;if(!i){var c=a.alternate,o=c!==null&&c.memoizedState!==null||Ge;c=$s;var u=Ge;if($s=i,(Ge=o)&&!u)for(J=a;J!==null;)i=J,o=i.child,i.tag===22&&i.memoizedState!==null?Fc(a):o!==null?(o.return=i,J=o):Fc(a);for(;l!==null;)J=l,e0(l),l=l.sibling;J=a,$s=c,Ge=u}Tc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,J=l):Tc(e)}}function Tc(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Ua(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ge)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Et(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&fc(t,l,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fc(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&ss(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ge||t.flags&512&&gi(t)}catch(y){be(t,t.return,y)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function Dc(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function Fc(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ua(4,t)}catch(o){be(t,n,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(o){be(t,a,o)}}var l=t.return;try{gi(t)}catch(o){be(t,l,o)}break;case 5:var i=t.return;try{gi(t)}catch(o){be(t,i,o)}}}catch(o){be(t,t.return,o)}if(t===e){J=null;break}var c=t.sibling;if(c!==null){c.return=t.return,J=c;break}J=t.return}}var Xf=Math.ceil,ka=Jt.ReactCurrentDispatcher,uo=Jt.ReactCurrentOwner,kt=Jt.ReactCurrentBatchConfig,ce=0,Re=null,Te=null,Ue=0,ut=0,ln=vr(0),Ae=0,hs=null,$r=0,za=0,mo=0,Kn=null,at=null,fo=0,jn=1/0,$t=null,Na=!1,xi=null,mr=null,Us=!1,sr=null,Sa=0,Xn=0,yi=null,ea=-1,ta=0;function Ze(){return ce&6?Ee():ea!==-1?ea:ea=Ee()}function fr(e){return e.mode&1?ce&2&&Ue!==0?Ue&-Ue:Mf.transition!==null?(ta===0&&(ta=_d()),ta):(e=de,e!==0||(e=window.event,e=e===void 0?16:qd(e.type)),e):1}function Ft(e,t,n,s){if(50<Xn)throw Xn=0,yi=null,Error($(185));vs(e,n,s),(!(ce&2)||e!==Re)&&(e===Re&&(!(ce&2)&&(za|=n),Ae===4&&rr(e,Ue)),ct(e,s),n===1&&ce===0&&!(t.mode&1)&&(jn=Ee()+500,_a&&br()))}function ct(e,t){var n=e.callbackNode;Rm(e,t);var s=oa(e,e===Re?Ue:0);if(s===0)n!==null&&$o(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&$o(n),t===1)e.tag===0?Rf(Ac.bind(null,e)):du(Ac.bind(null,e)),Df(function(){!(ce&6)&&br()}),n=null;else{switch(Bd(s)){case 1:n=_i;break;case 4:n=Od;break;case 16:n=ia;break;case 536870912:n=Id;break;default:n=ia}n=o0(n,t0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function t0(e,t){if(ea=-1,ta=0,ce&6)throw Error($(327));var n=e.callbackNode;if(hn()&&e.callbackNode!==n)return null;var s=oa(e,e===Re?Ue:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ca(e,s);else{t=s;var a=ce;ce|=2;var l=n0();(Re!==e||Ue!==t)&&($t=null,jn=Ee()+500,Mr(e,t));do try{tg();break}catch(c){r0(e,c)}while(!0);Ki(),ka.current=l,ce=a,Te!==null?t=0:(Re=null,Ue=0,t=Ae)}if(t!==0){if(t===2&&(a=ql(e),a!==0&&(s=a,t=vi(e,a))),t===1)throw n=hs,Mr(e,0),rr(e,s),ct(e,Ee()),n;if(t===6)rr(e,s);else{if(a=e.current.alternate,!(s&30)&&!Zf(a)&&(t=Ca(e,s),t===2&&(l=ql(e),l!==0&&(s=l,t=vi(e,l))),t===1))throw n=hs,Mr(e,0),rr(e,s),ct(e,Ee()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error($(345));case 2:Er(e,at,$t);break;case 3:if(rr(e,s),(s&130023424)===s&&(t=fo+500-Ee(),10<t)){if(oa(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ze(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Zl(Er.bind(null,e,at,$t),t);break}Er(e,at,$t);break;case 4:if(rr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-Dt(s);l=1<<i,i=t[i],i>a&&(a=i),s&=~l}if(s=a,s=Ee()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Xf(s/1960))-s,10<s){e.timeoutHandle=Zl(Er.bind(null,e,at,$t),s);break}Er(e,at,$t);break;case 5:Er(e,at,$t);break;default:throw Error($(329))}}}return ct(e,Ee()),e.callbackNode===n?t0.bind(null,e):null}function vi(e,t){var n=Kn;return e.current.memoizedState.isDehydrated&&(Mr(e,t).flags|=256),e=Ca(e,t),e!==2&&(t=at,at=n,t!==null&&bi(t)),e}function bi(e){at===null?at=e:at.push.apply(at,e)}function Zf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!At(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~mo,t&=~za,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Dt(t),s=1<<n;e[n]=-1,t&=~s}}function Ac(e){if(ce&6)throw Error($(327));hn();var t=oa(e,0);if(!(t&1))return ct(e,Ee()),null;var n=Ca(e,t);if(e.tag!==0&&n===2){var s=ql(e);s!==0&&(t=s,n=vi(e,s))}if(n===1)throw n=hs,Mr(e,0),rr(e,t),ct(e,Ee()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Er(e,at,$t),ct(e,Ee()),null}function go(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(jn=Ee()+500,_a&&br())}}function Ur(e){sr!==null&&sr.tag===0&&!(ce&6)&&hn();var t=ce;ce|=1;var n=kt.transition,s=de;try{if(kt.transition=null,de=1,e)return e()}finally{de=s,kt.transition=n,ce=t,!(ce&6)&&br()}}function ho(){ut=ln.current,fe(ln)}function Mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Tf(n)),Te!==null)for(n=Te.return;n!==null;){var s=n;switch(Qi(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&fa();break;case 3:bn(),fe(it),fe(Je),no();break;case 5:ro(s);break;case 4:bn();break;case 13:fe(pe);break;case 19:fe(pe);break;case 10:Xi(s.type._context);break;case 22:case 23:ho()}n=n.return}if(Re=e,Te=e=gr(e.current,null),Ue=ut=t,Ae=0,hs=null,mo=za=$r=0,at=Kn=null,Fr!==null){for(t=0;t<Fr.length;t++)if(n=Fr[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,s.next=i}n.pending=s}Fr=null}return e}function r0(e,t){do{var n=Te;try{if(Ki(),Ks.current=ja,wa){for(var s=xe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}wa=!1}if(Br=0,Le=Fe=xe=null,Jn=!1,ms=0,uo.current=null,n===null||n.return===null){Ae=1,hs=t,Te=null;break}e:{var l=e,i=n.return,c=n,o=t;if(t=Ue,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=o,f=c,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=vc(i);if(v!==null){v.flags&=-257,bc(v,i,c,l,t),v.mode&1&&yc(l,u,t),t=v,o=u;var k=t.updateQueue;if(k===null){var b=new Set;b.add(o),t.updateQueue=b}else k.add(o);break e}else{if(!(t&1)){yc(l,u,t),po();break e}o=Error($(426))}}else if(ge&&c.mode&1){var N=vc(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),bc(N,i,c,l,t),Ji(wn(o,c));break e}}l=o=wn(o,c),Ae!==4&&(Ae=2),Kn===null?Kn=[l]:Kn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var p=Bu(l,o,t);mc(l,p);break e;case 1:c=o;var h=l.type,w=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mr===null||!mr.has(w)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=$u(l,c,t);mc(l,C);break e}}l=l.return}while(l!==null)}a0(n)}catch(M){t=M,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function n0(){var e=ka.current;return ka.current=ja,e===null?ja:e}function po(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),Re===null||!($r&268435455)&&!(za&268435455)||rr(Re,Ue)}function Ca(e,t){var n=ce;ce|=2;var s=n0();(Re!==e||Ue!==t)&&($t=null,Mr(e,t));do try{eg();break}catch(a){r0(e,a)}while(!0);if(Ki(),ce=n,ka.current=s,Te!==null)throw Error($(261));return Re=null,Ue=0,Ae}function eg(){for(;Te!==null;)s0(Te)}function tg(){for(;Te!==null&&!Sm();)s0(Te)}function s0(e){var t=i0(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?a0(e):Te=t,uo.current=null}function a0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Qf(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ae=6,Te=null;return}}else if(n=Gf(n,t,ut),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Ae===0&&(Ae=5)}function Er(e,t,n){var s=de,a=kt.transition;try{kt.transition=null,de=1,rg(e,t,n,s)}finally{kt.transition=a,de=s}return null}function rg(e,t,n,s){do hn();while(sr!==null);if(ce&6)throw Error($(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Mm(e,l),e===Re&&(Te=Re=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Us||(Us=!0,o0(ia,function(){return hn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=kt.transition,kt.transition=null;var i=de;de=1;var c=ce;ce|=4,uo.current=null,Yf(e,n),Zu(n,e),jf(Kl),ca=!!Yl,Kl=Yl=null,e.current=n,Kf(n),Cm(),ce=c,de=i,kt.transition=l}else e.current=n;if(Us&&(Us=!1,sr=e,Sa=a),l=e.pendingLanes,l===0&&(mr=null),Tm(n.stateNode),ct(e,Ee()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Na)throw Na=!1,e=xi,xi=null,e;return Sa&1&&e.tag!==0&&hn(),l=e.pendingLanes,l&1?e===yi?Xn++:(Xn=0,yi=e):Xn=0,br(),null}function hn(){if(sr!==null){var e=Bd(Sa),t=kt.transition,n=de;try{if(kt.transition=null,de=16>e?16:e,sr===null)var s=!1;else{if(e=sr,sr=null,Sa=0,ce&6)throw Error($(331));var a=ce;for(ce|=4,J=e.current;J!==null;){var l=J,i=l.child;if(J.flags&16){var c=l.deletions;if(c!==null){for(var o=0;o<c.length;o++){var u=c[o];for(J=u;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Yn(8,f,l)}var g=f.child;if(g!==null)g.return=f,J=g;else for(;J!==null;){f=J;var y=f.sibling,v=f.return;if(Yu(f),f===u){J=null;break}if(y!==null){y.return=v,J=y;break}J=v}}}var k=l.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}J=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,J=i;else e:for(;J!==null;){if(l=J,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Yn(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,J=p;break e}J=l.return}}var h=e.current;for(J=h;J!==null;){i=J;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,J=w;else e:for(i=h;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ua(9,c)}}catch(M){be(c,c.return,M)}if(c===i){J=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,J=C;break e}J=c.return}}if(ce=a,br(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(La,e)}catch{}s=!0}return s}finally{de=n,kt.transition=t}}return!1}function Lc(e,t,n){t=wn(n,t),t=Bu(e,t,1),e=ur(e,t,1),t=Ze(),e!==null&&(vs(e,1,t),ct(e,t))}function be(e,t,n){if(e.tag===3)Lc(e,e,n);else for(;t!==null;){if(t.tag===3){Lc(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(mr===null||!mr.has(s))){e=wn(n,e),e=$u(t,e,1),t=ur(t,e,1),e=Ze(),t!==null&&(vs(t,1,e),ct(t,e));break}}t=t.return}}function ng(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ze(),e.pingedLanes|=e.suspendedLanes&n,Re===e&&(Ue&n)===n&&(Ae===4||Ae===3&&(Ue&130023424)===Ue&&500>Ee()-fo?Mr(e,0):mo|=n),ct(e,t)}function l0(e,t){t===0&&(e.mode&1?(t=Fs,Fs<<=1,!(Fs&130023424)&&(Fs=4194304)):t=1);var n=Ze();e=Gt(e,t),e!==null&&(vs(e,t,n),ct(e,n))}function sg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),l0(e,n)}function ag(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error($(314))}s!==null&&s.delete(t),l0(e,n)}var i0;i0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,Hf(e,t,n);lt=!!(e.flags&131072)}else lt=!1,ge&&t.flags&1048576&&uu(t,pa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Zs(e,t),e=t.pendingProps;var a=xn(t,Je.current);gn(t,n),a=ao(null,t,s,e,a,n);var l=lo();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(s)?(l=!0,ga(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eo(t),a.updater=$a,t.stateNode=a,a._reactInternals=t,li(t,s,e,n),t=ci(null,t,s,!0,l,n)):(t.tag=0,ge&&l&&Gi(t),Ke(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=ig(s),e=Et(s,e),a){case 0:t=oi(null,t,s,e,n);break e;case 1:t=kc(null,t,s,e,n);break e;case 11:t=wc(null,t,s,e,n);break e;case 14:t=jc(null,t,s,Et(s.type,e),n);break e}throw Error($(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Et(s,a),oi(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Et(s,a),kc(e,t,s,a,n);case 3:e:{if(Vu(t),e===null)throw Error($(387));s=t.pendingProps,l=t.memoizedState,a=l.element,xu(e,t),va(t,s,null,n);var i=t.memoizedState;if(s=i.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=wn(Error($(423)),t),t=Nc(e,t,s,n,a);break e}else if(s!==a){a=wn(Error($(424)),t),t=Nc(e,t,s,n,a);break e}else for(ft=dr(t.stateNode.containerInfo.firstChild),gt=t,ge=!0,Tt=null,n=hu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yn(),s===a){t=Qt(e,t,n);break e}Ke(e,t,s,n)}t=t.child}return t;case 5:return yu(t),e===null&&ni(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Xl(s,a)?i=null:l!==null&&Xl(s,l)&&(t.flags|=32),Wu(e,t),Ke(e,t,i,n),t.child;case 6:return e===null&&ni(t),null;case 13:return qu(e,t,n);case 4:return to(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=vn(t,null,s,n):Ke(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Et(s,a),wc(e,t,s,a,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,ue(xa,s._currentValue),s._currentValue=i,l!==null)if(At(l.value,i)){if(l.children===a.children&&!it.current){t=Qt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){i=l.child;for(var o=c.firstContext;o!==null;){if(o.context===s){if(l.tag===1){o=Vt(-1,n&-n),o.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?o.next=o:(o.next=f.next,f.next=o),u.pending=o}}l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),si(l.return,n,t),c.lanes|=n;break}o=o.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error($(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),si(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Ke(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,gn(t,n),a=Nt(a),s=s(a),t.flags|=1,Ke(e,t,s,n),t.child;case 14:return s=t.type,a=Et(s,t.pendingProps),a=Et(s.type,a),jc(e,t,s,a,n);case 15:return Uu(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Et(s,a),Zs(e,t),t.tag=1,ot(s)?(e=!0,ga(t)):e=!1,gn(t,n),_u(t,s,a),li(t,s,a,n),ci(null,t,s,!0,e,n);case 19:return Hu(e,t,n);case 22:return zu(e,t,n)}throw Error($(156,t.tag))};function o0(e,t){return Md(e,t)}function lg(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,s){return new lg(e,t,n,s)}function xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ig(e){if(typeof e=="function")return xo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mi)return 11;if(e===Oi)return 14}return 2}function gr(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ra(e,t,n,s,a,l){var i=2;if(s=e,typeof e=="function")xo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yr:return Or(n.children,a,l,t);case Ri:i=8,a|=8;break;case Dl:return e=jt(12,n,t,a|2),e.elementType=Dl,e.lanes=l,e;case Fl:return e=jt(13,n,t,a),e.elementType=Fl,e.lanes=l,e;case Al:return e=jt(19,n,t,a),e.elementType=Al,e.lanes=l,e;case yd:return Wa(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pd:i=10;break e;case xd:i=9;break e;case Mi:i=11;break e;case Oi:i=14;break e;case Zt:i=16,s=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=jt(i,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function Or(e,t,n,s){return e=jt(7,e,s,t),e.lanes=n,e}function Wa(e,t,n,s){return e=jt(22,e,s,t),e.elementType=yd,e.lanes=n,e.stateNode={isHidden:!1},e}function kl(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function Nl(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function og(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sl(0),this.expirationTimes=sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function yo(e,t,n,s,a,l,i,c,o){return e=new og(e,t,n,c,o),t===1?(t=1,l===!0&&(t|=8)):t=0,l=jt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eo(l),e}function cg(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function c0(e){if(!e)return xr;e=e._reactInternals;e:{if(Wr(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(ot(n))return cu(e,n,t)}return t}function d0(e,t,n,s,a,l,i,c,o){return e=yo(n,s,!0,e,a,l,i,c,o),e.context=c0(null),n=e.current,s=Ze(),a=fr(n),l=Vt(s,a),l.callback=t??null,ur(n,l,a),e.current.lanes=a,vs(e,a,s),ct(e,s),e}function Va(e,t,n,s){var a=t.current,l=Ze(),i=fr(a);return n=c0(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(l,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ur(a,t,i),e!==null&&(Ft(e,a,i,l),Ys(e,a,i)),i}function Ea(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vo(e,t){Rc(e,t),(e=e.alternate)&&Rc(e,t)}function dg(){return null}var u0=typeof reportError=="function"?reportError:function(e){console.error(e)};function bo(e){this._internalRoot=e}qa.prototype.render=bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Va(e,t,null,null)};qa.prototype.unmount=bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){Va(null,e,null,null)}),t[Ht]=null}};function qa(e){this._internalRoot=e}qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=zd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tr.length&&t!==0&&t<tr[n].priority;n++);tr.splice(n,0,e),n===0&&Vd(e)}};function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ha(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mc(){}function ug(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var u=Ea(i);l.call(u)}}var i=d0(t,s,e,0,null,!1,!1,"",Mc);return e._reactRootContainer=i,e[Ht]=i.current,is(e.nodeType===8?e.parentNode:e),Ur(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=Ea(o);c.call(u)}}var o=yo(e,0,!1,null,null,!1,!1,"",Mc);return e._reactRootContainer=o,e[Ht]=o.current,is(e.nodeType===8?e.parentNode:e),Ur(function(){Va(t,o,n,s)}),o}function Ga(e,t,n,s,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var c=a;a=function(){var o=Ea(i);c.call(o)}}Va(t,i,e,a)}else i=ug(n,t,e,a,s);return Ea(i)}$d=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zn(t.pendingLanes);n!==0&&(Bi(t,n|1),ct(t,Ee()),!(ce&6)&&(jn=Ee()+500,br()))}break;case 13:Ur(function(){var s=Gt(e,1);if(s!==null){var a=Ze();Ft(s,e,1,a)}}),vo(e,1)}};$i=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=Ze();Ft(t,e,134217728,n)}vo(e,134217728)}};Ud=function(e){if(e.tag===13){var t=fr(e),n=Gt(e,t);if(n!==null){var s=Ze();Ft(n,e,t,s)}vo(e,t)}};zd=function(){return de};Wd=function(e,t){var n=de;try{return de=e,t()}finally{de=n}};zl=function(e,t,n){switch(t){case"input":if(Ml(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Ia(s);if(!a)throw Error($(90));bd(s),Ml(s,a)}}}break;case"textarea":jd(e,n);break;case"select":t=n.value,t!=null&&dn(e,!!n.multiple,t,!1)}};Td=go;Dd=Ur;var mg={usingClientEntryPoint:!1,Events:[ws,en,Ia,Ed,Pd,go]},In={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fg={bundleType:In.bundleType,version:In.version,rendererPackageName:In.rendererPackageName,rendererConfig:In.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ld(e),e===null?null:e.stateNode},findFiberByHostInstance:In.findFiberByHostInstance||dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{La=zs.inject(fg),Ot=zs}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg;pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wo(t))throw Error($(200));return cg(e,t,null,n)};pt.createRoot=function(e,t){if(!wo(e))throw Error($(299));var n=!1,s="",a=u0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=yo(e,1,!1,null,null,n,!1,s,a),e[Ht]=t.current,is(e.nodeType===8?e.parentNode:e),new bo(t)};pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Ld(t),e=e===null?null:e.stateNode,e};pt.flushSync=function(e){return Ur(e)};pt.hydrate=function(e,t,n){if(!Ha(t))throw Error($(200));return Ga(null,e,t,!0,n)};pt.hydrateRoot=function(e,t,n){if(!wo(e))throw Error($(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",i=u0;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=d0(t,null,e,1,n??null,a,!1,l,i),e[Ht]=t.current,is(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new qa(t)};pt.render=function(e,t,n){if(!Ha(t))throw Error($(200));return Ga(null,e,t,!1,n)};pt.unmountComponentAtNode=function(e){if(!Ha(e))throw Error($(40));return e._reactRootContainer?(Ur(function(){Ga(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};pt.unstable_batchedUpdates=go;pt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Ha(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Ga(e,t,n,!1,s)};pt.version="18.3.1-next-f1338f8080-20240426";function m0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m0)}catch(e){console.error(e)}}m0(),md.exports=pt;var gg=md.exports,Oc=gg;Pl.createRoot=Oc.createRoot,Pl.hydrateRoot=Oc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ps.apply(this,arguments)}var ar;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ar||(ar={}));const Ic="popstate";function hg(e){e===void 0&&(e={});function t(s,a){let{pathname:l,search:i,hash:c}=s.location;return wi("",{pathname:l,search:i,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Pa(a)}return xg(t,n,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function f0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pg(){return Math.random().toString(36).substr(2,8)}function _c(e,t){return{usr:e.state,key:e.key,idx:t}}function wi(e,t,n,s){return n===void 0&&(n=null),ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pn(t):t,{state:n,key:t&&t.key||s||pg()})}function Pa(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Pn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function xg(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,i=a.history,c=ar.Pop,o=null,u=f();u==null&&(u=0,i.replaceState(ps({},i.state,{idx:u}),""));function f(){return(i.state||{idx:null}).idx}function g(){c=ar.Pop;let N=f(),p=N==null?null:N-u;u=N,o&&o({action:c,location:b.location,delta:p})}function y(N,p){c=ar.Push;let h=wi(b.location,N,p);u=f()+1;let w=_c(h,u),C=b.createHref(h);try{i.pushState(w,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(C)}l&&o&&o({action:c,location:b.location,delta:1})}function v(N,p){c=ar.Replace;let h=wi(b.location,N,p);u=f();let w=_c(h,u),C=b.createHref(h);i.replaceState(w,"",C),l&&o&&o({action:c,location:b.location,delta:0})}function k(N){let p=a.location.origin!=="null"?a.location.origin:a.location.href,h=typeof N=="string"?N:Pa(N);return h=h.replace(/ $/,"%20"),je(p,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,p)}let b={get action(){return c},get location(){return e(a,i)},listen(N){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(Ic,g),o=N,()=>{a.removeEventListener(Ic,g),o=null}},createHref(N){return t(a,N)},createURL:k,encodeLocation(N){let p=k(N);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:y,replace:v,go(N){return i.go(N)}};return b}var Bc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Bc||(Bc={}));function yg(e,t,n){return n===void 0&&(n="/"),vg(e,t,n)}function vg(e,t,n,s){let a=typeof t=="string"?Pn(t):t,l=kn(a.pathname||"/",n);if(l==null)return null;let i=g0(e);bg(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let u=Fg(l);c=Tg(i[o],u)}return c}function g0(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,i,c)=>{let o={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};o.relativePath.startsWith("/")&&(je(o.relativePath.startsWith(s),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(s.length));let u=hr([s,o.relativePath]),f=n.concat(o);l.children&&l.children.length>0&&(je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),g0(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Eg(u,l.index),routesMeta:f})};return e.forEach((l,i)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,i);else for(let o of h0(l.path))a(l,i,o)}),t}function h0(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let i=h0(s.join("/")),c=[];return c.push(...i.map(o=>o===""?l:[l,o].join("/"))),a&&c.push(...i),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function bg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Pg(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const wg=/^:[\w-]+$/,jg=3,kg=2,Ng=1,Sg=10,Cg=-2,$c=e=>e==="*";function Eg(e,t){let n=e.split("/"),s=n.length;return n.some($c)&&(s+=Cg),t&&(s+=kg),n.filter(a=>!$c(a)).reduce((a,l)=>a+(wg.test(l)?jg:l===""?Ng:Sg),s)}function Pg(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Tg(e,t,n){let{routesMeta:s}=e,a={},l="/",i=[];for(let c=0;c<s.length;++c){let o=s[c],u=c===s.length-1,f=l==="/"?t:t.slice(l.length)||"/",g=ji({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},f),y=o.route;if(!g)return null;Object.assign(a,g.params),i.push({params:a,pathname:hr([l,g.pathname]),pathnameBase:Mg(hr([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=hr([l,g.pathnameBase]))}return i}function ji(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=Dg(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((u,f,g)=>{let{paramName:y,isOptional:v}=f;if(y==="*"){let b=c[g]||"";i=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const k=c[g];return v&&!k?u[y]=void 0:u[y]=(k||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:e}}function Dg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),f0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(s.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Fg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return f0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function Ag(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?Pn(e):e;return{pathname:n?n.startsWith("/")?n:Lg(n,t):t,search:Og(s),hash:Ig(a)}}function Lg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Sl(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Rg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function p0(e,t){let n=Rg(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function x0(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Pn(e):(a=ps({},e),je(!a.pathname||!a.pathname.includes("?"),Sl("?","pathname","search",a)),je(!a.pathname||!a.pathname.includes("#"),Sl("#","pathname","hash",a)),je(!a.search||!a.search.includes("#"),Sl("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,c;if(i==null)c=n;else{let g=t.length-1;if(!s&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}c=g>=0?t[g]:"/"}let o=Ag(a,c),u=i&&i!=="/"&&i.endsWith("/"),f=(l||i===".")&&n.endsWith("/");return!o.pathname.endsWith("/")&&(u||f)&&(o.pathname+="/"),o}const hr=e=>e.join("/").replace(/\/\/+/g,"/"),Mg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Og=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ig=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _g(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const y0=["post","put","patch","delete"];new Set(y0);const Bg=["get",...y0];new Set(Bg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xs.apply(this,arguments)}const Qa=m.createContext(null),v0=m.createContext(null),wr=m.createContext(null),Ja=m.createContext(null),Yt=m.createContext({outlet:null,matches:[],isDataRoute:!1}),b0=m.createContext(null);function $g(e,t){let{relative:n}=t===void 0?{}:t;ks()||je(!1);let{basename:s,navigator:a}=m.useContext(wr),{hash:l,pathname:i,search:c}=Ya(e,{relative:n}),o=i;return s!=="/"&&(o=i==="/"?s:hr([s,i])),a.createHref({pathname:o,search:c,hash:l})}function ks(){return m.useContext(Ja)!=null}function Tn(){return ks()||je(!1),m.useContext(Ja).location}function w0(e){m.useContext(wr).static||m.useLayoutEffect(e)}function Vr(){let{isDataRoute:e}=m.useContext(Yt);return e?th():Ug()}function Ug(){ks()||je(!1);let e=m.useContext(Qa),{basename:t,future:n,navigator:s}=m.useContext(wr),{matches:a}=m.useContext(Yt),{pathname:l}=Tn(),i=JSON.stringify(p0(a,n.v7_relativeSplatPath)),c=m.useRef(!1);return w0(()=>{c.current=!0}),m.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let g=x0(u,JSON.parse(i),l,f.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:hr([t,g.pathname])),(f.replace?s.replace:s.push)(g,f.state,f)},[t,s,i,l,e])}const zg=m.createContext(null);function Wg(e){let t=m.useContext(Yt).outlet;return t&&m.createElement(zg.Provider,{value:e},t)}function j0(){let{matches:e}=m.useContext(Yt),t=e[e.length-1];return t?t.params:{}}function Ya(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=m.useContext(wr),{matches:a}=m.useContext(Yt),{pathname:l}=Tn(),i=JSON.stringify(p0(a,s.v7_relativeSplatPath));return m.useMemo(()=>x0(e,JSON.parse(i),l,n==="path"),[e,i,l,n])}function Vg(e,t){return qg(e,t)}function qg(e,t,n,s){ks()||je(!1);let{navigator:a}=m.useContext(wr),{matches:l}=m.useContext(Yt),i=l[l.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let u=Tn(),f;if(t){var g;let N=typeof t=="string"?Pn(t):t;o==="/"||(g=N.pathname)!=null&&g.startsWith(o)||je(!1),f=N}else f=u;let y=f.pathname||"/",v=y;if(o!=="/"){let N=o.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=yg(e,{pathname:v}),b=Yg(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:hr([o,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?o:hr([o,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,s);return t&&b?m.createElement(Ja.Provider,{value:{location:xs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ar.Pop}},b):b}function Hg(){let e=eh(),t=_g(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:a},n):null,null)}const Gg=m.createElement(Hg,null);class Qg extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(Yt.Provider,{value:this.props.routeContext},m.createElement(b0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jg(e){let{routeContext:t,match:n,children:s}=e,a=m.useContext(Qa);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Yt.Provider,{value:t},s)}function Yg(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let f=i.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||je(!1),i=i.slice(0,Math.min(i.length,f+1))}let o=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:y,errors:v}=n,k=g.route.loader&&y[g.route.id]===void 0&&(!v||v[g.route.id]===void 0);if(g.route.lazy||k){o=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((f,g,y)=>{let v,k=!1,b=null,N=null;n&&(v=c&&g.route.id?c[g.route.id]:void 0,b=g.route.errorElement||Gg,o&&(u<0&&y===0?(rh("route-fallback"),k=!0,N=null):u===y&&(k=!0,N=g.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,y+1)),h=()=>{let w;return v?w=b:k?w=N:g.route.Component?w=m.createElement(g.route.Component,null):g.route.element?w=g.route.element:w=f,m.createElement(Jg,{match:g,routeContext:{outlet:f,matches:p,isDataRoute:n!=null},children:w})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?m.createElement(Qg,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:h(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):h()},null)}var k0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(k0||{}),N0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(N0||{});function Kg(e){let t=m.useContext(Qa);return t||je(!1),t}function Xg(e){let t=m.useContext(v0);return t||je(!1),t}function Zg(e){let t=m.useContext(Yt);return t||je(!1),t}function S0(e){let t=Zg(),n=t.matches[t.matches.length-1];return n.route.id||je(!1),n.route.id}function eh(){var e;let t=m.useContext(b0),n=Xg(),s=S0();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function th(){let{router:e}=Kg(k0.UseNavigateStable),t=S0(N0.UseNavigateStable),n=m.useRef(!1);return w0(()=>{n.current=!0}),m.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,xs({fromRouteId:t},l)))},[e,t])}const Uc={};function rh(e,t,n){Uc[e]||(Uc[e]=!0)}function nh(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sh(e){return Wg(e.context)}function He(e){je(!1)}function ah(e){let{basename:t="/",children:n=null,location:s,navigationType:a=ar.Pop,navigator:l,static:i=!1,future:c}=e;ks()&&je(!1);let o=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:o,navigator:l,static:i,future:xs({v7_relativeSplatPath:!1},c)}),[o,c,l,i]);typeof s=="string"&&(s=Pn(s));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:k="default"}=s,b=m.useMemo(()=>{let N=kn(f,o);return N==null?null:{location:{pathname:N,search:g,hash:y,state:v,key:k},navigationType:a}},[o,f,g,y,v,k,a]);return b==null?null:m.createElement(wr.Provider,{value:u},m.createElement(Ja.Provider,{children:n,value:b}))}function lh(e){let{children:t,location:n}=e;return Vg(ki(t),n)}new Promise(()=>{});function ki(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(s,a)=>{if(!m.isValidElement(s))return;let l=[...t,a];if(s.type===m.Fragment){n.push.apply(n,ki(s.props.children,l));return}s.type!==He&&je(!1),!s.props.index||!s.props.children||je(!1);let i={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=ki(s.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ta.apply(this,arguments)}function C0(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ih(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oh(e,t){return e.button===0&&(!t||t==="_self")&&!ih(e)}const ch=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dh=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uh="6";try{window.__reactRouterVersion=uh}catch{}const mh=m.createContext({isTransitioning:!1}),fh="startTransition",zc=rm[fh];function gh(e){let{basename:t,children:n,future:s,window:a}=e,l=m.useRef();l.current==null&&(l.current=hg({window:a,v5Compat:!0}));let i=l.current,[c,o]=m.useState({action:i.action,location:i.location}),{v7_startTransition:u}=s||{},f=m.useCallback(g=>{u&&zc?zc(()=>o(g)):o(g)},[o,u]);return m.useLayoutEffect(()=>i.listen(f),[i,f]),m.useEffect(()=>nh(s),[s]),m.createElement(ah,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:i,future:s})}const hh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ph=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xh=m.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:l,replace:i,state:c,target:o,to:u,preventScrollReset:f,viewTransition:g}=t,y=C0(t,ch),{basename:v}=m.useContext(wr),k,b=!1;if(typeof u=="string"&&ph.test(u)&&(k=u,hh))try{let w=new URL(window.location.href),C=u.startsWith("//")?new URL(w.protocol+u):new URL(u),M=kn(C.pathname,v);C.origin===w.origin&&M!=null?u=M+C.search+C.hash:b=!0}catch{}let N=$g(u,{relative:a}),p=bh(u,{replace:i,state:c,target:o,preventScrollReset:f,relative:a,viewTransition:g});function h(w){s&&s(w),w.defaultPrevented||p(w)}return m.createElement("a",Ta({},y,{href:k||N,onClick:b||l?s:h,ref:n,target:o}))}),yh=m.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:i=!1,style:c,to:o,viewTransition:u,children:f}=t,g=C0(t,dh),y=Ya(o,{relative:g.relative}),v=Tn(),k=m.useContext(v0),{navigator:b,basename:N}=m.useContext(wr),p=k!=null&&wh(y)&&u===!0,h=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,w=v.pathname,C=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(w=w.toLowerCase(),C=C?C.toLowerCase():null,h=h.toLowerCase()),C&&N&&(C=kn(C,N)||C);const M=h!=="/"&&h.endsWith("/")?h.length-1:h.length;let O=w===h||!i&&w.startsWith(h)&&w.charAt(M)==="/",P=C!=null&&(C===h||!i&&C.startsWith(h)&&C.charAt(h.length)==="/"),D={isActive:O,isPending:P,isTransitioning:p},B=O?s:void 0,z;typeof l=="function"?z=l(D):z=[l,O?"active":null,P?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let X=typeof c=="function"?c(D):c;return m.createElement(xh,Ta({},g,{"aria-current":B,className:z,ref:n,style:X,to:o,viewTransition:u}),typeof f=="function"?f(D):f)});var Ni;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ni||(Ni={}));var Wc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wc||(Wc={}));function vh(e){let t=m.useContext(Qa);return t||je(!1),t}function bh(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:i,viewTransition:c}=t===void 0?{}:t,o=Vr(),u=Tn(),f=Ya(e,{relative:i});return m.useCallback(g=>{if(oh(g,n)){g.preventDefault();let y=s!==void 0?s:Pa(u)===Pa(f);o(e,{replace:y,state:a,preventScrollReset:l,relative:i,viewTransition:c})}},[u,o,f,s,a,n,e,l,i,c])}function wh(e,t){t===void 0&&(t={});let n=m.useContext(mh);n==null&&je(!1);let{basename:s}=vh(Ni.useViewTransitionState),a=Ya(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=kn(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=kn(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ji(a.pathname,i)!=null||ji(a.pathname,l)!=null}const E0="";async function jh(e,t){try{const n=await fetch(`${E0}${e}`,{...t,headers:{"Content-Type":"application/json",...t==null?void 0:t.headers}});if(n.ok)return await n.json();throw new Error(`API error: ${n.status}`)}catch(n){throw console.warn(`API call to ${e} failed, using mock data:`,n),n}}const I={fetch:jh,getBaseUrl:()=>E0},Si={jsense:{model:"jsense",name:"JSense Board",hardware:"ESP32-S3",features:{pixelControl:!0,audioReactive:!0,sensors:!0,jboardNetwork:!0,protocols:["e131","ddp","dmx","artnet"],maxPixels:4096,outputs:8,fseqSupport:!0},ui:{showEffects:!0,showSequences:!0,showAudio:!0,showSensors:!0,showFiles:!0,showJBoardNetwork:!0}},"led-controller":{model:"led-controller",name:"LED Controller",hardware:"ESP32",features:{pixelControl:!0,audioReactive:!1,sensors:!1,jboardNetwork:!0,protocols:["e131","ddp","artnet"],maxPixels:1024,outputs:2,fseqSupport:!0},ui:{showEffects:!0,showSequences:!0,showAudio:!1,showSensors:!1,showFiles:!0,showJBoardNetwork:!0}},"sensor-hub":{model:"sensor-hub",name:"Sensor Hub",hardware:"ESP32",features:{pixelControl:!1,audioReactive:!1,sensors:!0,jboardNetwork:!0,protocols:[],maxPixels:0,outputs:0,fseqSupport:!1},ui:{showEffects:!1,showSequences:!1,showAudio:!1,showSensors:!0,showFiles:!1,showJBoardNetwork:!0}},"audio-reactive":{model:"audio-reactive",name:"Audio Reactive",hardware:"ESP32-S3",features:{pixelControl:!0,audioReactive:!0,sensors:!1,jboardNetwork:!0,protocols:["e131","ddp"],maxPixels:2048,outputs:4,fseqSupport:!1},ui:{showEffects:!0,showSequences:!1,showAudio:!0,showSensors:!1,showFiles:!1,showJBoardNetwork:!0}},"effects-controller":{model:"effects-controller",name:"Effects Controller",hardware:"ESP32",features:{pixelControl:!0,audioReactive:!1,sensors:!1,jboardNetwork:!0,protocols:["e131","ddp","dmx"],maxPixels:2048,outputs:4,fseqSupport:!0},ui:{showEffects:!0,showSequences:!0,showAudio:!1,showSensors:!1,showFiles:!0,showJBoardNetwork:!0}}},kh={...Si.jsense,firmware:"1.0.0"},Nh={async getBoardInfo(){try{const e=await I.fetch("/api/board/info"),t=Si[e.model];return t?{...t,firmware:e.firmware}:(console.warn("Unknown board model, using JSense Board as default"),{...Si.jsense,firmware:e.firmware})}catch{return console.log("Mock: Using JSense Board configuration"),kh}},async updateBoardModel(e){try{return await I.fetch("/api/board/model",{method:"POST",body:JSON.stringify({model:e})})}catch{return console.log("Mock: Board model update (not implemented in mock mode)"),{success:!1,message:"Mock mode does not support board model changes"}}}},P0=m.createContext(null);function Sh(){const e=m.useContext(P0);if(!e)throw new Error("useBoardConfig must be used within BoardProvider");return e}function Ch({children:e}){const[t,n]=m.useState(null),[s,a]=m.useState(!0),[l,i]=m.useState(null),c=async()=>{a(!0),i(null);try{const u=await Nh.getBoardInfo();n(u)}catch(u){i("Failed to load board configuration"),console.error("Board config error:",u)}finally{a(!1)}};m.useEffect(()=>{c()},[]);const o={board:t,loading:s,error:l,reload:c};return r.jsx(P0.Provider,{value:o,children:e})}const T0=m.createContext(void 0),Eh=({children:e})=>{const[t,n]=m.useState([]),s=m.useCallback((i,c,o=5e3)=>{const u=Date.now().toString(),f={id:u,type:i,message:c,duration:o,timestamp:Date.now()};n(g=>[...g,f]),o>0&&setTimeout(()=>{a(u)},o)},[]),a=m.useCallback(i=>{n(c=>c.filter(o=>o.id!==i))},[]),l=m.useCallback(()=>{n([])},[]);return m.useEffect(()=>{const i=setInterval(()=>{const c=Date.now();n(o=>o.filter(u=>!u.duration||u.duration===0||c-u.timestamp<u.duration))},1e3);return()=>clearInterval(i)},[]),r.jsx(T0.Provider,{value:{toasts:t,showToast:s,dismissToast:a,clearAll:l},children:e})},jo=()=>{const e=m.useContext(T0);if(!e)throw new Error("useToast must be used within ToastProvider");return e},Ph="pixelpropshop/JBoardsFirmware",Cl=`https://raw.githubusercontent.com/${Ph}/main`,Xt={normalizeBoardName(e){return e.toUpperCase().replace(/\s+BOARD$/,"").replace(/^JSENSE/,"JBOARD-16")},getManifestUrl(e){const t=this.normalizeBoardName(e);return`${Cl}/${t}/manifest.json`},getVersionsUrl(e){const t=this.normalizeBoardName(e);return`${Cl}/${t}/versions.json`},getFirmwareUrl(e,t){const n=this.normalizeBoardName(e);return`${Cl}/${n}/versions/${t}/firmware.bin`},async fetchManifest(e){const t=this.getManifestUrl(e),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch manifest: ${n.statusText}`);return await n.json()},async fetchVersions(e){const t=this.getVersionsUrl(e),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch versions: ${n.statusText}`);return await n.json()},async checkForUpdates(e,t){try{const[n,s]=await Promise.all([this.fetchManifest(e),this.fetchVersions(e)]),a=n.latestVersion,l=this.compareVersions(t,a)<0,i=s.versions.find(c=>c.version===a);return{updateAvailable:l,currentVersion:t,latestVersion:a,latestStable:i,allVersions:s.versions}}catch(n){throw console.error("Failed to check for updates:",n),n}},async downloadFirmware(e,t,n){const s=this.getFirmwareUrl(e,t);return new Promise((a,l)=>{const i=new XMLHttpRequest;i.open("GET",s),i.responseType="blob",i.addEventListener("progress",c=>{c.lengthComputable&&n&&n({loaded:c.loaded,total:c.total})}),i.addEventListener("load",()=>{i.status>=200&&i.status<300?a(i.response):l(new Error(`Download failed with status ${i.status}`))}),i.addEventListener("error",()=>{l(new Error("Download failed"))}),i.addEventListener("abort",()=>{l(new Error("Download cancelled"))}),i.send()})},compareVersions(e,t){const n=e.split(".").map(Number),s=t.split(".").map(Number);for(let a=0;a<Math.max(n.length,s.length);a++){const l=n[a]||0,i=s[a]||0;if(l<i)return-1;if(l>i)return 1}return 0},formatVersionBadge(e,t){const n=this.compareVersions(t,e.version)<0,s=t===e.version,a=this.compareVersions(t,e.version)>0;return s?{text:"Current",color:"blue"}:n?{text:"New",color:"green"}:a?{text:"Older",color:"gray"}:{text:"",color:"gray"}},async getOTAStatus(){try{return await I.fetch("/api/system/firmware/ota-status")}catch(e){return console.error("Failed to get OTA status:",e),{currentPartition:"ota_0",currentVersion:"1.0.0",backupPartition:"ota_1",backupVersion:"0.9.5",bootCount:1,lastBootSuccess:!0,safeBoot:!1,rollbackAvailable:!0}}},async getBackupInfo(){try{const e=await this.getOTAStatus();return{hasBackup:e.rollbackAvailable,backupVersion:e.backupVersion,backupPartition:e.backupPartition}}catch(e){return console.error("Failed to get backup info:",e),{hasBackup:!1}}},async rollbackFirmware(){try{return await I.fetch("/api/system/firmware/rollback",{method:"POST"})}catch(e){throw console.error("Failed to rollback firmware:",e),new Error("Failed to rollback to previous firmware version")}},async markBootValid(){try{return await I.fetch("/api/system/firmware/mark-valid",{method:"POST"})}catch(e){throw console.error("Failed to mark boot as valid:",e),new Error("Failed to validate firmware boot")}},async enableSafeBoot(){try{return await I.fetch("/api/system/firmware/safe-boot",{method:"POST"})}catch(e){throw console.error("Failed to enable safe boot:",e),new Error("Failed to enable safe boot mode")}}},D0=m.createContext(void 0),Th=6,Vc="firmware_auto_check_enabled",qc="firmware_check_interval",Hc="firmware_dismissed_version",Dh="firmware_last_check",Fh=({children:e})=>{const[t,n]=m.useState({available:!1,currentVersion:"",latestVersion:""}),[s,a]=m.useState(!1),[l,i]=m.useState(()=>{const k=localStorage.getItem(Vc);return k!==null?k==="true":!0}),[c,o]=m.useState(()=>{const k=localStorage.getItem(qc);return k?parseInt(k):Th}),u=m.useCallback(k=>{i(k),localStorage.setItem(Vc,k.toString())},[]),f=m.useCallback(k=>{o(k),localStorage.setItem(qc,k.toString())},[]),g=m.useCallback(()=>{t.latestVersion&&(localStorage.setItem(Hc,t.latestVersion),n(k=>({...k,available:!1})))},[t.latestVersion]),y=m.useCallback(async()=>{var k;a(!0);try{const b=await I.fetch("/api/system/info"),N=b.productName||"JSense Board",p=b.firmwareVersion||"1.0.0",h=await Xt.checkForUpdates(N,p),C=localStorage.getItem(Hc)===h.latestVersion;n({available:h.updateAvailable&&!C,currentVersion:h.currentVersion,latestVersion:h.latestVersion,changelog:(k=h.latestStable)==null?void 0:k.changelog,lastChecked:Date.now()}),localStorage.setItem(Dh,Date.now().toString())}catch(b){console.error("[UpdateContext] Failed to check for updates:",b)}finally{a(!1)}},[]);m.useEffect(()=>{l&&y()},[]),m.useEffect(()=>{if(!l)return;const k=c*60*60*1e3,b=setInterval(()=>{y()},k);return()=>clearInterval(b)},[l,c,y]);const v={updateInfo:t,isChecking:s,checkForUpdates:y,dismissUpdate:g,autoCheckEnabled:l,setAutoCheckEnabled:u,checkInterval:c,setCheckInterval:f};return r.jsx(D0.Provider,{value:v,children:e})},ko=()=>{const e=m.useContext(D0);if(!e)throw new Error("useUpdate must be used within UpdateProvider");return e},Ah=[{path:"/",name:"Dashboard",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}),r.jsx("path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})]})},{path:"/pixels",name:"Pixels",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},{path:"/effects",name:"Effects",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2"}),r.jsx("circle",{cx:"12",cy:"12",r:"2"}),r.jsx("path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2"})]})},{path:"/sequences",name:"Sequences",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}),r.jsx("path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}),r.jsx("path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"})]})},{path:"/audio",name:"Audio",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12"}),r.jsx("path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5"}),r.jsx("circle",{cx:"16",cy:"7",r:"5"})]})},{path:"/sensors",name:"Sensors",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),r.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),r.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),r.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"})]})},{path:"/network",name:"Network",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),r.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),r.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),r.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),r.jsx("path",{d:"M12 12V8"})]})},{path:"/jboard-network",name:"JBoard Network",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"2"}),r.jsx("circle",{cx:"19",cy:"6",r:"2"}),r.jsx("circle",{cx:"5",cy:"6",r:"2"}),r.jsx("circle",{cx:"19",cy:"18",r:"2"}),r.jsx("circle",{cx:"5",cy:"18",r:"2"}),r.jsx("path",{d:"M12 14v-4m0 0L7 7m5 3l5-3m-5 13l-5-5m5 5l5-5"})]})},{path:"/files",name:"Files",icon:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})})},{path:"/about",name:"About",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 16v-4"}),r.jsx("path",{d:"M12 8h.01"})]})},{path:"/settings",name:"Settings",icon:r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}];function Lh(){const{board:e,loading:t}=Sh();if(t||!e)return r.jsx("aside",{className:"row-span-2 border-r border-gray-200 dark:border-gray-800 p-4 space-y-4",children:r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[r.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded bg-brand-600 text-white",children:"J"}),"Loading..."]})});const n=Ah.filter(s=>{switch(s.path){case"/effects":return e.ui.showEffects;case"/sequences":return e.ui.showSequences;case"/audio":return e.ui.showAudio;case"/sensors":return e.ui.showSensors;case"/pixels":return!0;case"/files":return e.ui.showFiles;case"/jboard-network":return e.ui.showJBoardNetwork;default:return!0}});return r.jsxs("aside",{className:"row-span-2 border-r border-gray-200 dark:border-gray-800 p-4 space-y-4",children:[r.jsxs("a",{href:"/",className:"flex items-center gap-2 font-semibold text-lg",children:[r.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded bg-brand-600 text-white",children:"J"}),e.name]}),r.jsx("nav",{className:"flex flex-col gap-1",children:n.map(s=>r.jsxs(yh,{to:s.path,end:s.path==="/",className:({isActive:a})=>`flex items-center gap-2 px-2 py-2 rounded transition-colors ${a?"bg-gray-100 dark:bg-gray-900":"hover:bg-gray-100 dark:hover:bg-gray-900"}`,children:[s.icon,r.jsx("span",{children:s.name})]},s.path))})]})}function Da(){return typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function"}async function F0(e){if(!Da())throw new Error("Web Crypto API not available. HTTPS required for checksum verification.");const t=await e.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(l=>l.toString(16).padStart(2,"0")).join("")}const Gc={productName:"JSense Board",hostname:"jsense-board",firmwareVersion:"1.0.0",buildDate:"2025-01-10",buildTime:"14:30:00",chipModel:"ESP32-S3",chipRevision:1,flashSize:8388608,flashSpeed:80,cpuFrequency:240,macAddressWiFi:"24:6F:28:XX:XX:XX",macAddressAP:"24:6F:28:XX:XX:YY"},Qc={uptimeSeconds:86400,heapTotal:327680,heapFree:131072,heapUsed:196608,heapMaxAlloc:98304,cpuTemperature:45.5,freeSketchSpace:6291456,sketchSize:2097152},El=[{id:1,name:"Channel 1",enabled:!0,pixelCount:300,pixelType:"WS2812B",dataPin:16,fps:60,status:"active",currentEffect:"Rainbow Chase"},{id:2,name:"Channel 2",enabled:!0,pixelCount:150,pixelType:"WS2811",dataPin:17,fps:60,status:"idle"},{id:3,name:"Channel 3",enabled:!1,pixelCount:200,pixelType:"WS2812B",dataPin:18,fps:30,status:"idle"}],Jc={type:"effect",name:"Rainbow Chase",id:5,loop:!0,channels:[1]},Ce={async getSystemStats(){try{return await I.fetch("/api/system/stats",{method:"GET"})}catch(e){return console.warn("Failed to fetch system stats from API, using mock data:",e),{info:Gc,health:Qc,ledChannels:El,nowPlaying:Jc}}},async getSystemInfo(){try{return await I.fetch("/api/system/info",{method:"GET"})}catch(e){return console.warn("Failed to fetch system info from API, using mock data:",e),Gc}},async getSystemHealth(){try{return await I.fetch("/api/system/health",{method:"GET"})}catch(e){return console.warn("Failed to fetch system health from API, using mock data:",e),Qc}},async getLEDChannels(){try{return await I.fetch("/api/system/channels",{method:"GET"})}catch(e){return console.warn("Failed to fetch LED channels from API, using mock data:",e),El}},async getNowPlaying(){try{return await I.fetch("/api/system/now-playing",{method:"GET"})}catch(e){return console.warn("Failed to fetch now playing from API, using mock data:",e),Jc}},async uploadFirmware(e,t,n){try{if(n)if(!Da())console.warn("Web Crypto API not available, skipping checksum verification");else{t==null||t({stage:"verifying",progress:0,message:"Calculating file checksum..."});try{const s=await F0(e);if(t==null||t({stage:"verifying",progress:100,message:"Checksum calculated"}),s.toLowerCase()!==n.toLowerCase())return{success:!1,message:"Firmware file checksum verification failed",stage:"error",error:"Checksum mismatch",checksumVerified:!1}}catch(s){console.error("Checksum calculation failed:",s)}}return await this._uploadFirmwareWithProgress(e,t)}catch(s){return console.error("Firmware upload error:",s),{success:!1,message:s instanceof Error?s.message:"Failed to upload firmware",stage:"error",error:String(s)}}},_uploadFirmwareWithProgress(e,t){return new Promise((n,s)=>{const a=new XMLHttpRequest,l=new FormData;l.append("firmware",e);const i=Date.now();a.upload.addEventListener("progress",o=>{if(o.lengthComputable){const u=Math.round(o.loaded/o.total*100),f=(Date.now()-i)/1e3,g=o.loaded/f,y=o.total-o.loaded,v=Math.round(y/g);t==null||t({stage:"uploading",progress:u,bytesUploaded:o.loaded,totalBytes:o.total,timeRemaining:v,message:`Uploading firmware... ${u}%`})}}),a.addEventListener("load",()=>{if(a.status>=200&&a.status<300)try{const o=JSON.parse(a.responseText);t==null||t({stage:"installing",progress:100,message:"Installing firmware..."}),setTimeout(()=>{t==null||t({stage:"complete",progress:100,message:"Firmware update complete"}),n(o)},1e3)}catch{s(new Error("Invalid response from server"))}else s(new Error(`Upload failed with status ${a.status}`))}),a.addEventListener("error",()=>{console.warn("Upload failed, using mock response"),t==null||t({stage:"complete",progress:100,message:"Firmware uploaded (mock)"}),n({success:!0,message:"Firmware uploaded successfully (mock). Device will restart.",progress:100,stage:"complete",newVersion:"1.1.0",checksumVerified:!0})}),a.addEventListener("abort",()=>{s(new Error("Upload cancelled"))});const c=I.getBaseUrl();a.open("POST",`${c}/api/system/firmware/update`),a.send(l)})},async restartDevice(){try{return await I.fetch("/api/system/restart",{method:"POST"})}catch(e){return console.warn("Failed to restart device via API, simulating success:",e),{success:!0,message:"Device restarting (mock)..."}}},async factoryReset(){try{return await I.fetch("/api/system/factory-reset",{method:"POST"})}catch(e){return console.warn("Failed to factory reset via API, simulating success:",e),{success:!0,message:"Factory reset initiated (mock). Device will restart."}}},async exportConfig(){try{const e=await fetch(`${I.getBaseUrl()}/api/system/export-config`,{method:"GET"});if(!e.ok)throw new Error("Failed to export config");return await e.blob()}catch(e){console.warn("Failed to export config via API, using mock data:",e);const t={version:"1.0.0",network:{hostname:"jsense-board",wifi:{ssid:"MyNetwork"}},channels:El};return new Blob([JSON.stringify(t,null,2)],{type:"application/json"})}},async importConfig(e){try{const t=await e.text(),n=JSON.parse(t);return await I.fetch("/api/system/config/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(t){return console.warn("Failed to import config via API:",t),t instanceof SyntaxError?{success:!1,message:"Invalid JSON file"}:{success:!1,message:t instanceof Error?t.message:"Failed to import configuration"}}},async clearLogs(){try{return await I.fetch("/api/system/clear-logs",{method:"POST"})}catch(e){return console.warn("Failed to clear logs via API, simulating success:",e),{success:!0,message:"Logs cleared successfully (mock)"}}},async getRTCTime(){try{return await I.fetch("/api/hardware/rtc/time",{method:"GET"})}catch(e){return console.warn("Failed to fetch RTC time from API:",e),null}},formatUptime(e){const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),a=e%60;return t>0?`${t}d ${n}h ${s}m`:n>0?`${n}h ${s}m ${a}s`:s>0?`${s}m ${a}s`:`${a}s`},formatBytes(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(2)} GB`}};function Rh(){const[e,t]=m.useState(new Date),[n,s]=m.useState(!1);m.useEffect(()=>{let i;const c=async()=>{try{const g=await Ce.getRTCTime();if(g&&g.year&&g.month&&g.day){const y=new Date(g.year,g.month-1,g.day,g.hour,g.minute,g.second);if(!isNaN(y.getTime()))return console.log("RTC detected and available"),!0}return console.log("RTC not available, using browser time"),!1}catch(g){return console.warn("Failed to connect to RTC, using browser time:",g),!1}},o=async()=>{try{const g=await Ce.getRTCTime();if(g&&g.year&&g.month&&g.day){const y=new Date(g.year,g.month-1,g.day,g.hour,g.minute,g.second);isNaN(y.getTime())||t(y)}}catch{}},u=()=>{t(new Date)};return(async()=>{await c()?(s(!0),await o(),i=window.setInterval(o,5e3)):(s(!1),u(),i=window.setInterval(u,1e3))})(),()=>{i&&clearInterval(i)}},[]);const a=i=>{const c=i.getHours().toString().padStart(2,"0"),o=i.getMinutes().toString().padStart(2,"0"),u=i.getSeconds().toString().padStart(2,"0");return`${c}:${o}:${u}`},l=i=>{const c=i.getFullYear(),o=(i.getMonth()+1).toString().padStart(2,"0"),u=i.getDate().toString().padStart(2,"0");return`${c}-${o}-${u}`};return r.jsxs("div",{className:"flex flex-col items-end text-sm",children:[r.jsx("div",{className:"font-mono font-semibold",children:a(e)}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l(e),!n&&r.jsx("span",{className:"ml-1 text-orange-500",title:"Using browser time (RTC not available)",children:"*"})]})]})}const Mh={ssid:"MyNetwork",password:"",ip:"192.168.1.100",gateway:"192.168.1.1",subnet:"255.255.255.0",dns:"8.8.8.8",dhcp:!0},Oh={ssid:"JSense-AP",password:"",ip:"192.168.4.1",channel:0,hidden:!1,maxClients:0,keepActive:!1},Ih={wifiConnected:!0,wifiRSSI:-45,wifiIP:"192.168.1.100",apActive:!0,apClients:1},_h={hostname:"jsenseboard",mdnsEnabled:!0},Bh=[{id:"1",name:"Home Network",ssid:"MyNetwork",password:"",ip:"192.168.1.100",gateway:"192.168.1.1",subnet:"255.255.255.0",dns:"8.8.8.8",dhcp:!0,priority:1},{id:"2",name:"Office WiFi",ssid:"OfficeNet",password:"",ip:"10.0.0.100",gateway:"10.0.0.1",subnet:"255.255.255.0",dns:"8.8.8.8",dhcp:!0,priority:2}],$h={enabled:!0,maxAttempts:5,attemptInterval:30,fallbackToAP:!0},Uh=[{ssid:"MyNetwork",rssi:-45,encryption:"WPA2",channel:6},{ssid:"Neighbor_WiFi",rssi:-67,encryption:"WPA2",channel:11},{ssid:"Public_Hotspot",rssi:-72,encryption:"Open",channel:1}],Se={async getWiFiConfig(){try{return await I.fetch("/api/network/wifi")}catch{return Mh}},async updateWiFiConfig(e){try{return await I.fetch("/api/network/wifi",{method:"POST",body:JSON.stringify(e)})}catch{return console.log("Mock: WiFi config would be updated with:",e),{success:!0,message:"WiFi configuration updated (mock mode)"}}},async getAPConfig(){try{return await I.fetch("/api/network/ap")}catch{return Oh}},async updateAPConfig(e){try{return await I.fetch("/api/network/ap",{method:"POST",body:JSON.stringify(e)})}catch{return console.log("Mock: AP config would be updated with:",e),{success:!0,message:"AP configuration updated (mock mode)"}}},async getNetworkStatus(){try{return await I.fetch("/api/network/status")}catch{return Ih}},async scanNetworks(){try{return await I.fetch("/api/network/scan")}catch{return Uh}},async getHostnameConfig(){try{return await I.fetch("/api/network/hostname")}catch{return _h}},async updateHostnameConfig(e){try{return await I.fetch("/api/network/hostname",{method:"POST",body:JSON.stringify(e)})}catch{return console.log("Mock: Hostname config would be updated with:",e),{success:!0,message:"Hostname configuration updated (mock mode)"}}},async getWiFiProfiles(){try{return(await I.fetch("/api/network/profiles")).profiles.map(t=>({id:t.ssid,name:t.name||t.ssid,ssid:t.ssid,password:"",ip:t.useStaticIP&&t.staticIP||"",gateway:t.useStaticIP&&t.gateway||"",subnet:t.useStaticIP&&t.subnet||"",dns:"8.8.8.8",dhcp:!t.useStaticIP,priority:t.priority}))}catch(e){return console.error("Error fetching WiFi profiles:",e),Bh}},async saveWiFiProfile(e){try{const t={ssid:e.ssid,password:e.password,name:e.name,priority:e.priority,useStaticIP:!e.dhcp};e.dhcp||(t.staticIP={ip:e.ip,gateway:e.gateway,subnet:e.subnet,dns1:e.dns,dns2:"8.8.4.4"}),console.log("Saving WiFi profile with data:",t);const n=await I.fetch("/api/network/profiles",{method:"POST",body:JSON.stringify(t)});return console.log("WiFi profile save response:",n),n}catch(t){return console.error("Error saving WiFi profile:",t),console.log("Mock: WiFi profile would be saved:",e),{success:!0,message:"WiFi profile saved (mock mode)",id:Date.now().toString()}}},async deleteWiFiProfile(e){try{return await I.fetch(`/api/network/profiles/${e}`,{method:"DELETE"})}catch{return console.log("Mock: WiFi profile would be deleted:",e),{success:!0,message:"WiFi profile deleted (mock mode)"}}},async connectToProfile(e){try{return await I.fetch(`/api/network/profiles/${e}/connect`,{method:"POST"})}catch{return console.log("Mock: Would connect to profile:",e),{success:!0,message:"Connecting to WiFi profile (mock mode)"}}},async updateProfilePriority(e,t){try{console.log(`[NetworkService] Updating profile priority: SSID="${e}", new priority=${t}`);const n="/api/network/profiles/priority";console.log(`[NetworkService] API URL: ${n}`);const s=await I.fetch(n,{method:"POST",body:JSON.stringify({ssid:e,priority:t})});return console.log("[NetworkService] Priority update response:",s),s}catch(n){return console.error("[NetworkService] Priority update failed:",n),console.log("Mock: Would update profile priority:",e,t),{success:!0,message:"Profile priority updated (mock mode)"}}},async getAutoReconnectConfig(){try{return await I.fetch("/api/network/autoreconnect")}catch{return $h}},async updateAutoReconnectConfig(e){try{return await I.fetch("/api/network/autoreconnect",{method:"POST",body:JSON.stringify(e)})}catch{return console.log("Mock: Auto-reconnect config would be updated with:",e),{success:!0,message:"Auto-reconnect configuration updated (mock mode)"}}}};function zh(){const[e,t]=m.useState(null),[n,s]=m.useState(!0);m.useEffect(()=>{a();const c=setInterval(a,1e4);return()=>clearInterval(c)},[]);const a=async()=>{try{const c=await Se.getNetworkStatus();t(c)}catch(c){console.error("Failed to load network status:",c)}finally{s(!1)}};if(n||!e)return null;const l=c=>(c>-50||c>-70||c>-80,""),i=c=>c>-50?"text-green-600 dark:text-green-400":c>-70?"text-blue-600 dark:text-blue-400":c>-80?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return r.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded border border-gray-200 dark:border-gray-800 text-sm",children:e.wifiConnected?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:i(e.wifiRSSI),title:`Signal: ${e.wifiRSSI} dBm`,children:l(e.wifiRSSI)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"WiFi"}),r.jsx("span",{className:"font-mono text-xs",children:e.wifiIP})]}):e.apActive?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:""}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"AP Mode"}),r.jsx("span",{className:"font-mono text-xs",children:"192.168.4.1"}),e.apClients>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:[e.apClients," ",e.apClients===1?"client":"clients"]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Disconnected"})]})})}const Wh={"/":"Dashboard","/effects":"Effects","/sequences":"Sequences","/audio":"Audio","/sensors":"Sensors","/network":"Network","/jboard-network":"JBoard Network","/files":"Files","/settings":"Settings","/about":"About"};function Vh(){const e=Tn(),t=Vr(),[n,s]=m.useState(!0),{updateInfo:a}=ko(),l=()=>{s(!n),document.documentElement.classList.toggle("dark")},i=()=>{alert("Reboot functionality will be implemented here")};return r.jsxs("header",{className:"flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-800",children:[r.jsx("div",{className:"font-medium",children:Wh[e.pathname]||"Dashboard"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Rh,{}),r.jsx(zh,{}),r.jsxs("button",{onClick:()=>t("/settings"),className:"relative inline-flex items-center gap-2 rounded border border-gray-200 dark:border-gray-800 px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-900",title:a.available?`Update available: v${a.latestVersion}`:"Settings",children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),r.jsx("span",{children:"Settings"}),a.available&&r.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),r.jsxs("button",{onClick:l,className:"inline-flex items-center gap-2 rounded border border-gray-200 dark:border-gray-800 px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-900",children:[n?r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}):r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"4"}),r.jsx("path",{d:"M12 2v2"}),r.jsx("path",{d:"M12 20v2"}),r.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),r.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),r.jsx("path",{d:"M2 12h2"}),r.jsx("path",{d:"M20 12h2"}),r.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),r.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),r.jsx("span",{children:n?"Dark mode":"Light mode"})]}),r.jsx("button",{onClick:i,className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:"Reboot"})]})]})}class Pr extends Error{constructor(t){super(t),this.name="FseqParseError"}}async function qh(e){const t=await e.arrayBuffer(),n=new DataView(t);if(t.byteLength<24)throw new Pr("File too small to be a valid FSEQ file");const s=String.fromCharCode(n.getUint8(0),n.getUint8(1),n.getUint8(2),n.getUint8(3));if(s!=="PSEQ")throw new Pr(`Invalid magic bytes: expected "PSEQ", got "${s}"`);const a=n.getUint8(6),l=n.getUint8(7),i=`${l}.${a}`;if(l!==2)throw new Pr(`Unsupported FSEQ version: ${i} (only V2.x supported)`);const c=n.getUint32(12,!0),o=n.getUint32(16,!0),u=n.getUint8(20);if(c===0)throw new Pr("Invalid channel count: 0");if(o===0)throw new Pr("Invalid frame count: 0");if(u===0)throw new Pr("Invalid step time: 0");const f=Math.round(1e3/u);return{duration:Math.round(o*u/1e3),frameRate:f,channelCount:c,frameCount:o,stepTime:u,version:i,fileSize:t.byteLength}}const Qr=[{id:"seq-1",type:"effect",name:"Party Mode",description:"High energy party sequence",loop:!0,steps:[{id:"step-1",effectId:"rainbow",parameters:{speed:80,mode:"gradient",saturation:100},duration:30,transition:"fade"},{id:"step-2",effectId:"strobe",parameters:{color:"#ffffff",frequency:15},duration:10,transition:"instant"},{id:"step-3",effectId:"confetti",parameters:{density:80,speed:70},duration:45,transition:"crossfade"},{id:"step-4",effectId:"chase",parameters:{color:"#ff00ff",speed:60,size:10,style:"theater"},duration:20,transition:"fade"},{id:"step-5",effectId:"sparkle",parameters:{backgroundColor:"#000000",sparkleColorCount:"3",sparkleColor1:"#ffffff",sparkleColor2:"#00ffff",sparkleColor3:"#ff00ff",density:70,speed:50},duration:30,transition:"crossfade"}],createdAt:new Date(Date.now()-864e5*2).toISOString()},{id:"seq-2",type:"effect",name:"Sunset to Night",description:"Peaceful evening transition",loop:!1,steps:[{id:"step-1",effectId:"gradient",parameters:{colorCount:"3",color1:"#ff6b35",color2:"#f7931e",color3:"#fbb034",animate:!0,speed:20},duration:120,transition:"crossfade"},{id:"step-2",effectId:"gradient",parameters:{colorCount:"2",color1:"#ff6b35",color2:"#1e3a8a",animate:!0,speed:15},duration:90,transition:"crossfade"},{id:"step-3",effectId:"solid",parameters:{color:"#1e3a8a",cycle:!1},duration:0,transition:"fade"}],createdAt:new Date(Date.now()-864e5*5).toISOString()},{id:"seq-3",type:"effect",name:"Holiday Lights",description:"Festive holiday display",loop:!0,steps:[{id:"step-1",effectId:"bars",parameters:{colorCount:"3",color1:"#ff0000",color2:"#00ff00",color3:"#ffffff",direction:"horizontal",width:20,spacing:10,speed:40},duration:60,transition:"fade"},{id:"step-2",effectId:"sparkle",parameters:{backgroundColor:"#1e3a8a",sparkleColorCount:"4",sparkleColor1:"#ffffff",sparkleColor2:"#ffd700",sparkleColor3:"#ff0000",sparkleColor4:"#00ff00",density:60,speed:40},duration:45,transition:"crossfade"},{id:"step-3",effectId:"gradient",parameters:{colorCount:"4",color1:"#ff0000",color2:"#00ff00",color3:"#ffd700",color4:"#ffffff",animate:!0,speed:30},duration:50,transition:"fade"}],createdAt:new Date(Date.now()-864e5*10).toISOString()}],Tr=[{id:"fseq-1",type:"fseq",name:"Christmas Carol Medley",description:"xLights sequence synchronized to music",fileUrl:"/sequences/christmas_carol.fseq",fileSize:2457600,duration:180,frameRate:40,channelCount:512,audioUrl:"/sequences/christmas_carol.mp3",audioFileSize:432e4,loop:!1,createdAt:new Date(Date.now()-864e5*15).toISOString()}],dt=[...Qr,...Tr];let oe=null;const $e={async getSequences(){try{return(await I.fetch("/api/sequences")).sequences}catch{return dt}},async getSequence(e){try{return await I.fetch(`/api/sequences/${e}`)}catch{return dt.find(t=>t.id===e)||null}},async createSequence(e,t,n,s){try{return await I.fetch("/api/sequences",{method:"POST",body:JSON.stringify({name:e,description:t,steps:n,loop:s})})}catch{console.log("Mock: Create sequence:",e);const a={id:`seq-${Date.now()}`,type:"effect",name:e,description:t,steps:n,loop:s,createdAt:new Date().toISOString()};return Qr.push(a),dt.push(a),{success:!0,message:"Sequence created (mock mode)",sequence:a}}},async updateSequence(e){try{return await I.fetch(`/api/sequences/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}catch{console.log("Mock: Update sequence:",e.id);const t=Qr.findIndex(n=>n.id===e.id);if(t>-1){Qr[t]={...e,updatedAt:new Date().toISOString()};const n=dt.findIndex(s=>s.id===e.id);return n>-1&&(dt[n]=Qr[t]),{success:!0,message:"Sequence updated (mock mode)",sequence:Qr[t]}}return{success:!1,message:"Sequence not found"}}},async deleteSequence(e){try{return await I.fetch(`/api/sequences/${e}`,{method:"DELETE"})}catch{console.log("Mock: Delete sequence:",e);const t=dt.findIndex(n=>n.id===e);return t>-1?(dt.splice(t,1),(oe==null?void 0:oe.sequenceId)===e&&(oe=null),{success:!0,message:"Sequence deleted (mock mode)"}):{success:!1,message:"Sequence not found"}}},async playSequence(e,t){var n;try{return await I.fetch(`/api/sequences/${e}/play`,{method:"POST",body:JSON.stringify({fromStep:t||0})})}catch{console.log("Mock: Play sequence:",e,"from step:",t||0);const s=dt.find(a=>a.id===e);return s?(s.type==="effect"?oe={sequenceId:e,currentStepIndex:t||0,isPlaying:!0,isPaused:!1,remainingTime:((n=s.steps[t||0])==null?void 0:n.duration)||0,totalElapsed:0}:oe={sequenceId:e,currentStepIndex:0,isPlaying:!0,isPaused:!1,remainingTime:s.duration,totalElapsed:0},{success:!0,message:"Sequence playing (mock mode)",state:oe}):{success:!1,message:"Sequence not found"}}},async pauseSequence(){try{return await I.fetch("/api/sequences/pause",{method:"POST"})}catch{return console.log("Mock: Pause sequence"),oe?(oe.isPaused=!0,oe.isPlaying=!1,{success:!0,message:"Sequence paused (mock mode)",state:oe}):{success:!1,message:"No sequence playing"}}},async resumeSequence(){try{return await I.fetch("/api/sequences/resume",{method:"POST"})}catch{return console.log("Mock: Resume sequence"),oe&&oe.isPaused?(oe.isPaused=!1,oe.isPlaying=!0,{success:!0,message:"Sequence resumed (mock mode)",state:oe}):{success:!1,message:"No paused sequence"}}},async stopSequence(){try{return await I.fetch("/api/sequences/stop",{method:"POST"})}catch{return console.log("Mock: Stop sequence"),oe=null,{success:!0,message:"Sequence stopped (mock mode)"}}},async nextStep(){try{return await I.fetch("/api/sequences/next",{method:"POST"})}catch{if(console.log("Mock: Next step"),oe){const e=dt.find(t=>t.id===oe.sequenceId);if(e&&e.type==="effect")return oe.currentStepIndex=(oe.currentStepIndex+1)%e.steps.length,oe.remainingTime=e.steps[oe.currentStepIndex].duration,{success:!0,message:"Next step (mock mode)",state:oe};if(e&&e.type==="fseq")return{success:!1,message:"FSEQ sequences do not support step controls"}}return{success:!1,message:"No sequence playing"}}},async previousStep(){try{return await I.fetch("/api/sequences/previous",{method:"POST"})}catch{if(console.log("Mock: Previous step"),oe){const e=dt.find(t=>t.id===oe.sequenceId);if(e&&e.type==="effect")return oe.currentStepIndex=oe.currentStepIndex===0?e.steps.length-1:oe.currentStepIndex-1,oe.remainingTime=e.steps[oe.currentStepIndex].duration,{success:!0,message:"Previous step (mock mode)",state:oe};if(e&&e.type==="fseq")return{success:!1,message:"FSEQ sequences do not support step controls"}}return{success:!1,message:"No sequence playing"}}},async getPlaybackState(){try{return await I.fetch("/api/sequences/playback/state")}catch{return oe}},async uploadFseq(e,t,n){if(!e.name.toLowerCase().endsWith(".fseq"))return{success:!1,message:"Invalid file type. Only .fseq files are supported."};let s;try{s=await qh(e)}catch(a){return a instanceof Pr?{success:!1,message:`FSEQ parse error: ${a.message}`}:{success:!1,message:"Failed to parse FSEQ file"}}try{const a=new FormData;return a.append("file",e),a.append("name",t),n&&a.append("description",n),await I.fetch("/api/sequences/upload-fseq",{method:"POST",body:a})}catch{console.log("Mock: Upload FSEQ:",t);const l={id:`fseq-${Date.now()}`,type:"fseq",name:t,description:n,fileUrl:`/sequences/${e.name}`,fileSize:e.size,duration:s.duration,frameRate:s.frameRate,channelCount:s.channelCount,loop:!1,createdAt:new Date().toISOString()};return Tr.push(l),dt.push(l),{success:!0,message:"FSEQ uploaded (mock mode)",sequence:l}}},async updateFseq(e,t,n,s){try{return await I.fetch(`/api/sequences/fseq/${e}`,{method:"PUT",body:JSON.stringify({name:t,audioUrl:n,loop:s})})}catch{console.log("Mock: Update FSEQ:",e);const a=Tr.findIndex(l=>l.id===e);if(a>-1){Tr[a]={...Tr[a],name:t,audioUrl:n,loop:s,updatedAt:new Date().toISOString()};const l=dt.findIndex(i=>i.id===e);return l>-1&&(dt[l]=Tr[a]),{success:!0,message:"FSEQ updated (mock mode)",sequence:Tr[a]}}return{success:!1,message:"FSEQ sequence not found"}}}},Hh=()=>{const[e,t]=m.useState(null),[n,s]=m.useState(null),[a,l]=m.useState(!1);m.useEffect(()=>{i();const b=setInterval(i,1e3);return()=>clearInterval(b)},[]);const i=async()=>{try{const b=await $e.getPlaybackState();if(t(b),b){if(l(!0),!n||n.id!==b.sequenceId){const N=await $e.getSequence(b.sequenceId);s(N)}}else setTimeout(()=>{e||l(!1)},300)}catch(b){console.error("Error loading playback state:",b)}},c=async()=>{if(e)try{e.isPlaying?await $e.pauseSequence():e.isPaused&&await $e.resumeSequence(),i()}catch(b){console.error("Error toggling playback:",b)}},o=async()=>{try{await $e.stopSequence(),i()}catch(b){console.error("Error stopping sequence:",b)}},u=async()=>{try{await $e.nextStep(),i()}catch(b){console.error("Error skipping to next step:",b)}},f=async()=>{try{await $e.previousStep(),i()}catch(b){console.error("Error going to previous step:",b)}},g=b=>{const N=Math.floor(b/60),p=b%60;return`${N}:${p.toString().padStart(2,"0")}`};if(!a||!e||!n)return null;const y=n.type==="effect"?n.steps[e.currentStepIndex]:null,v=n.type==="effect"?n.steps.reduce((b,N)=>N.duration>0?b+N.duration:b,0):n.duration,k=v>0?e.totalElapsed/v*100:0;return r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-300 dark:border-gray-700 shadow-lg z-40 animate-slide-up",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:n.name}),n.loop&&r.jsx("span",{className:"text-green-600 dark:text-green-400 text-xs",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("span",{className:"truncate",children:n.type==="effect"?`Step ${e.currentStepIndex+1} of ${n.steps.length}`:"Playing FSEQ"}),y&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{className:"truncate",children:e.remainingTime>0?`${g(e.remainingTime)} remaining`:"Manual"})]})]})]})]}),r.jsx("div",{className:"hidden md:block flex-1 min-w-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-2 bg-gray-300 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${Math.min(100,Math.max(0,k))}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-500 mt-1",children:[r.jsx("span",{children:g(e.totalElapsed)}),r.jsx("span",{children:v>0?g(v):"--:--"})]})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:f,className:"p-2 bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-900 dark:text-white rounded transition-colors",title:"Previous step",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"})})}),r.jsx("button",{onClick:c,className:"p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:e.isPlaying?"Pause":"Play",children:e.isPlaying?r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),r.jsx("button",{onClick:u,className:"p-2 bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-900 dark:text-white rounded transition-colors",title:"Next step",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z"})})}),r.jsx("button",{onClick:o,className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors ml-2",title:"Stop",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})})]})]})})})},Gh=({toast:e})=>{const{dismissToast:t}=jo(),[n,s]=m.useState(!1);m.useEffect(()=>{if(e.duration&&e.duration>0){const c=setTimeout(()=>{s(!0),setTimeout(()=>t(e.id),300)},e.duration-300);return()=>clearTimeout(c)}},[e.id,e.duration,t]);const a=()=>{s(!0),setTimeout(()=>t(e.id),300)},l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e.type],i={success:"",error:"",warning:"",info:""}[e.type];return r.jsxs("div",{className:`${l} text-white px-4 py-3 rounded-lg shadow-lg mb-2 flex items-center justify-between min-w-[300px] max-w-md transition-all duration-300 ${n?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xl font-bold",children:i}),r.jsx("span",{className:"text-sm",children:e.message})]}),r.jsx("button",{onClick:a,className:"ml-4 text-white hover:text-gray-200 transition-colors","aria-label":"Dismiss",children:""})]})},Qh=()=>{const{toasts:e}=jo();return r.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col items-end",children:e.map(t=>r.jsx(Gh,{toast:t},t.id))})};function Jh(){return r.jsxs("div",{className:"min-h-dvh grid grid-cols-[240px_1fr] grid-rows-[56px_1fr] dark:bg-gray-950 dark:text-gray-100 bg-white text-gray-900",children:[r.jsx(Lh,{}),r.jsx(Vh,{}),r.jsx("main",{className:"p-4 overflow-auto scrollbar-thin",children:r.jsx(sh,{})}),r.jsx(Hh,{}),r.jsx(Qh,{})]})}const Yh=()=>{const{updateInfo:e,dismissUpdate:t}=ko(),[n,s]=m.useState(!1),a=Vr();m.useEffect(()=>{e.available?s(!0):s(!1)},[e.available]);const l=()=>{s(!1),setTimeout(()=>{t()},300)},i=()=>{s(!1),a("/settings"),setTimeout(()=>{t()},300)};return n?r.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-fade-in",role:"alert","aria-live":"polite",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 max-w-md",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:r.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Firmware Update Available"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Version ",e.latestVersion," is now available. You're currently on"," ",e.currentVersion,"."]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Update Now"}),r.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"Dismiss"})]})]}),r.jsx("button",{onClick:l,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close notification",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}):null};function Fa({connected:e,connecting:t=!1,size:n="md"}){const s={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},a={sm:"h-1.5 w-1.5",md:"h-2 w-2",lg:"h-2.5 w-2.5"};return t?r.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 font-medium ${s[n]}`,children:[r.jsx("span",{className:`${a[n]} rounded-full bg-yellow-500 animate-pulse`}),"Connecting"]}):e?r.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 font-medium ${s[n]}`,children:[r.jsx("span",{className:`${a[n]} rounded-full bg-green-500`}),"Connected"]}):r.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200 font-medium ${s[n]}`,children:[r.jsx("span",{className:`${a[n]} rounded-full bg-red-500`}),"Disconnected"]})}function No({rssi:e,size:t="md"}){let n=0,s="",a="";e>=-50?(n=4,s="Excellent",a="text-green-500"):e>=-60?(n=3,s="Good",a="text-green-500"):e>=-70?(n=2,s="Fair",a="text-yellow-500"):(n=1,s="Poor",a="text-red-500");const i={sm:"h-3 w-1",md:"h-4 w-1.5",lg:"h-5 w-2"}[t];return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`flex items-end gap-0.5 ${a}`,children:[1,2,3,4].map(c=>r.jsx("div",{className:`${i} rounded-sm ${c<=n?"bg-current":"bg-gray-300 dark:bg-gray-700"}`,style:{height:`${c*25}%`}},c))}),r.jsxs("span",{className:`text-sm ${a}`,children:[s," (",e," dBm)"]})]})}function Kh(){const[e,t]=m.useState(null),[n,s]=m.useState(null),[a,l]=m.useState(!0),[i,c]=m.useState(new Date),o=async()=>{try{l(!0);const[f,g]=await Promise.all([Se.getNetworkStatus(),Ce.getSystemStats()]);t(f),s(g),c(new Date)}catch(f){console.error("Failed to load dashboard data:",f)}finally{l(!1)}};m.useEffect(()=>{o()},[]),m.useEffect(()=>{const f=setInterval(()=>{o()},5e3);return()=>clearInterval(f)},[]);const u=f=>{const g={active:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",idle:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",error:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"};return r.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${g[f]}`,children:f.toUpperCase()})};return r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[r.jsxs("div",{className:"col-span-1 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-sm font-medium",children:"Network Status"}),r.jsx("button",{onClick:o,disabled:a,className:"text-xs px-2 py-1 rounded border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-900 disabled:opacity-50",children:a?"Loading...":"Refresh"})]}),e?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"WiFi Station"}),r.jsx(Fa,{connected:e.wifiConnected,size:"sm"})]}),e.wifiConnected&&r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"IP Address"}),r.jsx("span",{className:"font-mono",children:e.wifiIP})]}),r.jsx("div",{children:r.jsx(No,{rssi:e.wifiRSSI,size:"sm"})})]})]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-3",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Access Point"}),r.jsx(Fa,{connected:e.apActive,size:"sm"})]}),e.apActive&&r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Connected Clients"}),r.jsx("span",{className:"font-semibold",children:e.apClients})]})]})}),r.jsxs("div",{className:"text-xs text-gray-500 text-right",children:["Updated: ",i.toLocaleTimeString()]})]}):r.jsx("div",{className:"text-sm text-gray-500",children:"Loading network status..."})]}),r.jsxs("div",{className:"col-span-1 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-sm font-medium mb-3",children:"System Health"}),n?r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Uptime"}),r.jsx("span",{className:"font-medium",children:Ce.formatUptime(n.health.uptimeSeconds)})]})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Heap Memory (SRAM)"}),r.jsxs("span",{className:"font-medium",children:[Ce.formatBytes(n.health.heapUsed)," / ",Ce.formatBytes(n.health.heapTotal)]})]}),r.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${n.health.heapUsed/n.health.heapTotal>.8?"bg-red-600":n.health.heapUsed/n.health.heapTotal>.6?"bg-yellow-600":"bg-green-600"}`,style:{width:`${n.health.heapUsed/n.health.heapTotal*100}%`}})})]}),n.health.psramTotal&&n.health.psramTotal>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"PSRAM"}),r.jsxs("span",{className:"font-medium",children:[Ce.formatBytes(n.health.psramUsed||0)," / ",Ce.formatBytes(n.health.psramTotal)]})]}),r.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${(n.health.psramUsed||0)/n.health.psramTotal>.8?"bg-red-600":(n.health.psramUsed||0)/n.health.psramTotal>.6?"bg-yellow-600":"bg-green-600"}`,style:{width:`${(n.health.psramUsed||0)/n.health.psramTotal*100}%`}})})]}),n.health.cpuTemperature&&r.jsx("div",{children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"CPU Temperature"}),r.jsxs("span",{className:"font-medium",children:[n.health.cpuTemperature.toFixed(1),"C"]})]})}),r.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Firmware"}),r.jsx("span",{children:n.info.firmwareVersion})]})})]}):r.jsx("div",{className:"text-sm text-gray-500",children:"Loading system health..."})]}),r.jsxs("div",{className:"col-span-1 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60 flex flex-col",children:[r.jsx("h2",{className:"text-sm font-medium mb-3",children:"LED Channels"}),n?r.jsx("div",{className:"space-y-2.5 overflow-y-auto max-h-[400px] pr-2 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-gray-100 dark:[&::-webkit-scrollbar-track]:bg-gray-800 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-thumb]:bg-gray-600 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:hover:bg-gray-400 dark:[&::-webkit-scrollbar-thumb]:hover:bg-gray-500",children:n.ledChannels.map(f=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:f.name}),u(f.status)]}),!f.enabled&&r.jsx("span",{className:"text-xs text-gray-500",children:"Disabled"})]}),r.jsxs("div",{className:"text-xs text-gray-500",children:[f.pixelCount," px  ",f.pixelType,"  ",f.fps," FPS"]}),f.currentEffect&&r.jsx("div",{className:"text-xs text-brand-600 dark:text-brand-400 mt-0.5",children:f.currentEffect})]},f.id))}):r.jsx("div",{className:"text-sm text-gray-500",children:"Loading channels..."})]}),r.jsxs("div",{className:"col-span-1 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-sm font-medium mb-3",children:"Now Playing"}),n?n.nowPlaying.type==="idle"?r.jsx("div",{className:"text-sm text-gray-500",children:"Nothing playing"}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:n.nowPlaying.type==="effect"?"":""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-sm truncate",children:n.nowPlaying.name}),r.jsx("div",{className:"text-xs text-gray-500 capitalize",children:n.nowPlaying.type})]})]}),n.nowPlaying.duration&&n.nowPlaying.elapsed!==void 0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[r.jsxs("span",{children:[Math.floor(n.nowPlaying.elapsed/60),":",(n.nowPlaying.elapsed%60).toString().padStart(2,"0")]}),r.jsxs("span",{children:[Math.floor(n.nowPlaying.duration/60),":",(n.nowPlaying.duration%60).toString().padStart(2,"0")]})]}),r.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-brand-600 transition-all duration-300",style:{width:`${n.nowPlaying.elapsed/n.nowPlaying.duration*100}%`}})})]}),n.nowPlaying.loop&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:"Loop enabled"})]}),n.nowPlaying.channels&&n.nowPlaying.channels.length>0&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Channels: ",n.nowPlaying.channels.join(", ")]})]}):r.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})]})]})}const Xh=[{id:"solid",name:"Solid Color",category:"Solid",description:"Display a single solid color with optional cycling",icon:"",parameters:[{id:"color",name:"Color",type:"color",value:"#ff0000"},{id:"cycle",name:"Cycle On/Off",type:"toggle",value:!1},{id:"speed",name:"Cycle Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"rainbow",name:"Rainbow",category:"Animated",description:"Rainbow color cycle with multiple display modes",icon:"",parameters:[{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"},{id:"mode",name:"Pattern",type:"select",value:"gradient",options:[{label:"Gradient",value:"gradient"},{label:"Solid",value:"solid"},{label:"Diagonal Stripes",value:"pride"}]},{id:"saturation",name:"Saturation",type:"slider",value:100,min:0,max:100,step:1,unit:"%"}]},{id:"chase",name:"Chase",category:"Animated",description:"Moving light patterns including standard chase, theater, and scanner effects",icon:"",parameters:[{id:"color",name:"Color",type:"color",value:"#0000ff"},{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"},{id:"size",name:"Size",type:"slider",value:5,min:1,max:50,step:1,unit:"px"},{id:"style",name:"Style",type:"select",value:"standard",options:[{label:"Standard",value:"standard"},{label:"Theater",value:"theater"},{label:"Scanner",value:"scanner"}]}]},{id:"breathe",name:"Breathe",category:"Animated",description:"Gentle pulsing fade in and out",icon:"",parameters:[{id:"color",name:"Color",type:"color",value:"#00ff00"},{id:"speed",name:"Speed",type:"slider",value:30,min:1,max:100,step:1,unit:"%"}]},{id:"sparkle",name:"Sparkle",category:"Animated",description:"Random twinkling lights with background color and multiple sparkle colors",icon:"",parameters:[{id:"backgroundColor",name:"Background Color",type:"color",value:"#000000"},{id:"sparkleColorCount",name:"Number of Sparkle Colors",type:"select",value:"1",options:[{label:"1 Color",value:"1"},{label:"2 Colors",value:"2"},{label:"3 Colors",value:"3"},{label:"4 Colors",value:"4"},{label:"5 Colors",value:"5"}]},{id:"sparkleColor1",name:"Sparkle Color 1",type:"color",value:"#ffffff"},{id:"sparkleColor2",name:"Sparkle Color 2",type:"color",value:"#00ffff"},{id:"sparkleColor3",name:"Sparkle Color 3",type:"color",value:"#ff00ff"},{id:"sparkleColor4",name:"Sparkle Color 4",type:"color",value:"#ffff00"},{id:"sparkleColor5",name:"Sparkle Color 5",type:"color",value:"#00ff00"},{id:"density",name:"Density",type:"slider",value:50,min:1,max:100,step:1,unit:"%"},{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"fire",name:"Fire",category:"Animated",description:"Flickering fire simulation",icon:"",parameters:[{id:"intensity",name:"Intensity",type:"slider",value:70,min:1,max:100,step:1,unit:"%"},{id:"cooling",name:"Cooling",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"gradient",name:"Color Flow",category:"Pattern",description:"Smooth color transitions through multiple colors",icon:"",parameters:[{id:"colorCount",name:"Number of Colors",type:"select",value:"2",options:[{label:"2 Colors",value:"2"},{label:"3 Colors",value:"3"},{label:"4 Colors",value:"4"},{label:"5 Colors",value:"5"},{label:"6 Colors",value:"6"},{label:"7 Colors",value:"7"},{label:"8 Colors",value:"8"}]},{id:"color1",name:"Color 1",type:"color",value:"#ff0000"},{id:"color2",name:"Color 2",type:"color",value:"#0000ff"},{id:"color3",name:"Color 3",type:"color",value:"#00ff00"},{id:"color4",name:"Color 4",type:"color",value:"#ffff00"},{id:"color5",name:"Color 5",type:"color",value:"#ff00ff"},{id:"color6",name:"Color 6",type:"color",value:"#00ffff"},{id:"color7",name:"Color 7",type:"color",value:"#ff8800"},{id:"color8",name:"Color 8",type:"color",value:"#8800ff"},{id:"animate",name:"Animate",type:"toggle",value:!1},{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"strobe",name:"Strobe",category:"Animated",description:"Fast flashing effect",icon:"",parameters:[{id:"color",name:"Color",type:"color",value:"#ffffff"},{id:"frequency",name:"Frequency",type:"slider",value:10,min:1,max:50,step:1,unit:"Hz"}]},{id:"bars",name:"Bars",category:"Pattern",description:"Moving colored bar patterns with multiple colors",icon:"",parameters:[{id:"colorCount",name:"Number of Colors",type:"select",value:"2",options:[{label:"2 Colors",value:"2"},{label:"3 Colors",value:"3"},{label:"4 Colors",value:"4"},{label:"5 Colors",value:"5"},{label:"6 Colors",value:"6"},{label:"7 Colors",value:"7"},{label:"8 Colors",value:"8"}]},{id:"color1",name:"Bar Color 1",type:"color",value:"#ff0000"},{id:"color2",name:"Bar Color 2",type:"color",value:"#0000ff"},{id:"color3",name:"Bar Color 3",type:"color",value:"#00ff00"},{id:"color4",name:"Bar Color 4",type:"color",value:"#ffff00"},{id:"color5",name:"Bar Color 5",type:"color",value:"#ff00ff"},{id:"color6",name:"Bar Color 6",type:"color",value:"#00ffff"},{id:"color7",name:"Bar Color 7",type:"color",value:"#ff8800"},{id:"color8",name:"Bar Color 8",type:"color",value:"#8800ff"},{id:"direction",name:"Direction",type:"select",value:"horizontal",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Diagonal",value:"diagonal"}]},{id:"width",name:"Bar Width",type:"slider",value:20,min:5,max:100,step:5,unit:"px"},{id:"spacing",name:"Spacing",type:"slider",value:10,min:0,max:50,step:5,unit:"px"},{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"wave",name:"Wave",category:"Animated",description:"Wave patterns including standard, ripple, and ocean simulation",icon:"",parameters:[{id:"style",name:"Wave Style",type:"select",value:"standard",options:[{label:"Standard",value:"standard"},{label:"Ripple",value:"ripple"},{label:"Ocean",value:"ocean"}]},{id:"color1",name:"Wave Color",type:"color",value:"#00ffff"},{id:"color2",name:"Background",type:"color",value:"#000080"},{id:"speed",name:"Speed",type:"slider",value:40,min:1,max:100,step:1,unit:"%"},{id:"width",name:"Wave Width",type:"slider",value:20,min:5,max:100,step:5,unit:"px"},{id:"intensity",name:"Intensity",type:"slider",value:60,min:1,max:100,step:1,unit:"%"}]},{id:"confetti",name:"Confetti",category:"Animated",description:"Colorful celebration effect",icon:"",parameters:[{id:"density",name:"Density",type:"slider",value:60,min:1,max:100,step:1,unit:"%"},{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"}]},{id:"meteor",name:"Meteor",category:"Animated",description:"Shooting star effect",icon:"",parameters:[{id:"color",name:"Color",type:"color",value:"#ffffff"},{id:"speed",name:"Speed",type:"slider",value:60,min:1,max:100,step:1,unit:"%"},{id:"trail",name:"Trail Length",type:"slider",value:30,min:5,max:100,step:5,unit:"px"}]},{id:"noise",name:"Noise",category:"Animated",description:"Perlin noise-based colorful patterns",icon:"",parameters:[{id:"speed",name:"Speed",type:"slider",value:30,min:1,max:100,step:1,unit:"%"},{id:"scale",name:"Scale",type:"slider",value:50,min:10,max:100,step:5,unit:"%"},{id:"palette",name:"Color Palette",type:"select",value:"rainbow",options:[{label:"Rainbow",value:"rainbow"},{label:"Ocean",value:"ocean"},{label:"Forest",value:"forest"},{label:"Lava",value:"lava"},{label:"Cloud",value:"cloud"}]}]},{id:"matrix",name:"Matrix",category:"Animated",description:"Falling code rain effect",icon:"",parameters:[{id:"speed",name:"Speed",type:"slider",value:50,min:1,max:100,step:1,unit:"%"},{id:"color",name:"Color",type:"color",value:"#00ff00"},{id:"density",name:"Trail Density",type:"slider",value:40,min:1,max:100,step:1,unit:"%"}]},{id:"police",name:"Police",category:"Animated",description:"Red and blue emergency lights",icon:"",parameters:[{id:"speed",name:"Flash Speed",type:"slider",value:60,min:1,max:100,step:1,unit:"%"},{id:"pattern",name:"Pattern",type:"select",value:"alternating",options:[{label:"Alternating",value:"alternating"},{label:"Simultaneous",value:"simultaneous"},{label:"Chase",value:"chase"}]}]},{id:"aurora",name:"Aurora",category:"Animated",description:"Northern lights simulation",icon:"",parameters:[{id:"speed",name:"Speed",type:"slider",value:25,min:1,max:100,step:1,unit:"%"},{id:"intensity",name:"Intensity",type:"slider",value:65,min:1,max:100,step:1,unit:"%"},{id:"palette",name:"Color Palette",type:"select",value:"green",options:[{label:"Green",value:"green"},{label:"Blue",value:"blue"},{label:"Purple",value:"purple"},{label:"Multi-Color",value:"multi"}]}]}],_n={power:!0,brightness:80,activeEffect:"rainbow",activeParameters:{speed:50}},Ws=[{id:"preset-1",name:"Warm Sunset",effectId:"gradient",parameters:{color1:"#ff6b35",color2:"#f7931e",animate:!0},createdAt:new Date(Date.now()-864e5).toISOString()},{id:"preset-2",name:"Ocean Waves",effectId:"wave",parameters:{color1:"#00d4ff",color2:"#0047ab",speed:30,width:25},createdAt:new Date(Date.now()-1728e5).toISOString()}],mt={async getEffects(){try{return await I.fetch("/api/effects")}catch{return Xh}},async getLEDState(){try{return await I.fetch("/api/led/state")}catch{return _n}},async setPower(e){try{return await I.fetch("/api/led/power",{method:"POST",body:JSON.stringify({power:e})})}catch{return console.log("Mock: Set power:",e),_n.power=e,{success:!0,message:`LED ${e?"on":"off"} (mock mode)`}}},async setBrightness(e){try{return await I.fetch("/api/led/brightness",{method:"POST",body:JSON.stringify({brightness:e})})}catch{return console.log("Mock: Set brightness:",e),_n.brightness=e,{success:!0,message:`Brightness set to ${e}% (mock mode)`}}},async applyEffect(e,t){try{return await I.fetch("/api/effects/apply",{method:"POST",body:JSON.stringify({effectId:e,parameters:t})})}catch{return console.log("Mock: Apply effect:",e,t),_n.activeEffect=e,_n.activeParameters=t,{success:!0,message:"Effect applied (mock mode)"}}},async getPresets(){try{return await I.fetch("/api/effects/presets")}catch{return Ws}},async savePreset(e,t,n){try{return await I.fetch("/api/effects/presets",{method:"POST",body:JSON.stringify({name:e,effectId:t,parameters:n})})}catch{console.log("Mock: Save preset:",e,t,n);const s={id:`preset-${Date.now()}`,name:e,effectId:t,parameters:n,createdAt:new Date().toISOString()};return Ws.push(s),{success:!0,message:"Preset saved (mock mode)",preset:s}}},async deletePreset(e){try{return await I.fetch(`/api/effects/presets/${e}`,{method:"DELETE"})}catch{console.log("Mock: Delete preset:",e);const t=Ws.findIndex(n=>n.id===e);return t>-1&&Ws.splice(t,1),{success:!0,message:"Preset deleted (mock mode)"}}}};function Nn({title:e,message:t,onConfirm:n,onCancel:s,dangerous:a=!1,confirmText:l="Confirm",cancelText:i="Cancel"}){return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-md w-full p-6 border border-gray-200 dark:border-gray-800",children:[r.jsx("h3",{className:`text-lg font-semibold mb-3 ${a?"text-red-600":""}`,children:e}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:t}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:i}),r.jsx("button",{onClick:n,className:`px-4 py-2 rounded-lg text-white transition-colors ${a?"bg-red-600 hover:bg-red-700":"bg-brand-600 hover:bg-brand-700"}`,children:l})]})]})})}function Zh(){const[e,t]=m.useState([]),[n,s]=m.useState(null),[a,l]=m.useState([]),[i,c]=m.useState(null),[o,u]=m.useState({}),[f,g]=m.useState(!0),[y,v]=m.useState(!1),[k,b]=m.useState(null),[N,p]=m.useState(!1),[h,w]=m.useState(""),[C,M]=m.useState(!1),[O,P]=m.useState("All"),[D,B]=m.useState(null);m.useEffect(()=>{z()},[]);const z=async()=>{g(!0);try{const[j,W,Q]=await Promise.all([mt.getEffects(),mt.getLEDState(),mt.getPresets()]);if(t(j),s(W),l(Q),W.activeEffect){const A=j.find(Y=>Y.id===W.activeEffect);A&&(c(A),u(W.activeParameters||{}))}}catch{b({type:"error",text:"Failed to load effects"})}finally{g(!1)}},X=async()=>{if(n)try{(await mt.setPower(!n.power)).success&&s({...n,power:!n.power})}catch{b({type:"error",text:"Failed to toggle power"})}},U=async j=>{if(n)try{await mt.setBrightness(j),s({...n,brightness:j})}catch{b({type:"error",text:"Failed to set brightness"})}},q=j=>{c(j);const W={};j.parameters.forEach(Q=>{W[Q.id]=Q.value}),u(W),b(null)},V=(j,W)=>{u(Q=>({...Q,[j]:W}))},Z=async()=>{if(i){v(!0),b(null);try{const j=await mt.applyEffect(i.id,o);j.success?(b({type:"success",text:`${i.name} applied!`}),n&&s({...n,activeEffect:i.id,activeParameters:o})):b({type:"error",text:j.message||"Failed to apply effect"})}catch{b({type:"error",text:"Failed to apply effect"})}finally{v(!1)}}},K=async()=>{if(!(!i||!h.trim())){M(!0);try{const j=await mt.savePreset(h.trim(),i.id,o);j.success&&j.preset?(l([...a,j.preset]),b({type:"success",text:"Preset saved!"}),p(!1),w("")):b({type:"error",text:j.message||"Failed to save preset"})}catch{b({type:"error",text:"Failed to save preset"})}finally{M(!1)}}},ie=j=>{const W=e.find(Q=>Q.id===j.effectId);W&&(c(W),u(j.parameters),b({type:"success",text:`Loaded preset: ${j.name}`}))},E=j=>{B(j)},_=async j=>{try{(await mt.deletePreset(j)).success&&(l(a.filter(Q=>Q.id!==j)),b({type:"success",text:"Preset deleted"}))}catch{b({type:"error",text:"Failed to delete preset"})}},F=(j,W)=>{var Q;if(W.id==="gradient"&&j.id.startsWith("color")&&j.id!=="colorCount"||W.id==="sparkle"&&j.id.startsWith("sparkleColor")&&j.id!=="sparkleColorCount"||W.id==="bars"&&j.id.startsWith("color")&&j.id!=="colorCount")return null;switch(j.type){case"slider":return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"text-sm font-medium",children:j.name}),r.jsxs("span",{className:"text-sm text-gray-500",children:[o[j.id]??j.value,j.unit]})]}),r.jsx("input",{type:"range",min:j.min,max:j.max,step:j.step,value:o[j.id]??j.value,onChange:A=>V(j.id,Number(A.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-brand-600"})]},j.id);case"color":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:j.name}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:o[j.id]??j.value,onChange:A=>V(j.id,A.target.value),className:"w-12 h-12 rounded border border-gray-300 dark:border-gray-700 cursor-pointer"}),r.jsx("input",{type:"text",value:o[j.id]??j.value,onChange:A=>V(j.id,A.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm",placeholder:"#000000"})]})]},j.id);case"toggle":return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:j.name}),r.jsx("button",{onClick:()=>V(j.id,!(o[j.id]??j.value)),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o[j.id]??j.value?"bg-brand-600":"bg-gray-300 dark:bg-gray-700"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o[j.id]??j.value?"translate-x-6":"translate-x-1"}`})})]},j.id);case"select":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:j.name}),r.jsx("select",{value:o[j.id]??j.value,onChange:A=>V(j.id,A.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800",children:(Q=j.options)==null?void 0:Q.map(A=>r.jsx("option",{value:A.value,children:A.label},A.value))})]},j.id);case"number":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:j.name}),r.jsx("input",{type:"number",min:j.min,max:j.max,step:j.step,value:o[j.id]??j.value,onChange:A=>V(j.id,Number(A.target.value)),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800"})]},j.id);default:return null}},te=["All",...Array.from(new Set(e.map(j=>j.category)))],R=O==="All"?e:e.filter(j=>j.category===O);return f?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading effects..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"LED Effects"}),r.jsx("p",{className:"text-gray-500",children:"Choose and customize LED lighting effects"})]}),k&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${k.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:k.text}),n&&r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:X,className:`p-3 rounded-lg transition-colors ${n.power?"bg-brand-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 2v10M18.36 6.64a9 9 0 1 1-12.73 0"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Power"}),r.jsx("div",{className:"text-sm text-gray-500",children:n.power?"On":"Off"})]})]})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Brightness"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[n.brightness,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:n.brightness,onChange:j=>U(Number(j.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-brand-600"})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:te.map(j=>r.jsx("button",{onClick:()=>P(j),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${O===j?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:j},j))}),r.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:R.map(j=>{const W=(n==null?void 0:n.activeEffect)===j.id,Q=(i==null?void 0:i.id)===j.id;return r.jsx("button",{onClick:()=>q(j),className:`p-4 rounded-lg border-2 text-left transition-all ${Q?"border-brand-600 bg-brand-50 dark:bg-brand-900/20":"border-gray-200 dark:border-gray-800 hover:border-brand-400 bg-white dark:bg-gray-800/50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-3xl",children:j.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-medium",children:j.name}),W&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",children:"Active"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.description}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:j.category})]})]})},j.id)})}),a.length>0&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Saved Presets"}),r.jsx("div",{className:"space-y-2",children:a.map(j=>{var W;return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm",children:j.name}),r.jsx("div",{className:"text-xs text-gray-500",children:(W=e.find(Q=>Q.id===j.effectId))==null?void 0:W.name})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ie(j),className:"px-3 py-1 text-xs rounded bg-brand-600 text-white hover:bg-brand-700",children:"Load"}),r.jsx("button",{onClick:()=>E(j.id),className:"px-3 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]},j.id)})})]})]}),r.jsx("div",{className:"lg:col-span-1",children:i?r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60 sticky top-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"text-3xl",children:i.icon}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-medium",children:i.name}),r.jsx("p",{className:"text-sm text-gray-500",children:i.category})]})]}),r.jsx("div",{className:"space-y-4 mb-4",children:i.id==="gradient"?r.jsxs(r.Fragment,{children:[i.parameters.filter(j=>j.id==="colorCount").map(j=>F(j,i)),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Colors"}),Number(o.colorCount??2)<8&&r.jsx("button",{onClick:()=>{const j=Number(o.colorCount??2);V("colorCount",String(j+1))},className:"text-xs px-2 py-1 rounded bg-brand-600 text-white hover:bg-brand-700",children:"+ Add Color"})]}),i.parameters.filter(j=>j.id.startsWith("color")&&j.id!=="colorCount").slice(0,Number(o.colorCount??2)).map((j,W)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:j.name}),Number(o.colorCount??2)>2&&r.jsx("button",{onClick:()=>{const Q=Number(o.colorCount??2),A=W+1,Y={...o};for(let ee=A;ee<Q;ee++)Y[`color${ee}`]=o[`color${ee+1}`];Object.keys(Y).forEach(ee=>V(ee,Y[ee])),V("colorCount",String(Q-1))},className:"text-xs px-1.5 py-0.5 rounded bg-red-600 text-white hover:bg-red-700",title:"Remove color",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"w-12 h-10 rounded border border-gray-300 dark:border-gray-700 cursor-pointer"}),r.jsx("input",{type:"text",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm",placeholder:"#000000"})]})]},j.id))]}),i.parameters.filter(j=>j.id!=="colorCount"&&!j.id.startsWith("color")).map(j=>F(j,i))]}):i.id==="sparkle"?r.jsxs(r.Fragment,{children:[i.parameters.filter(j=>j.id==="backgroundColor").map(j=>F(j,i)),i.parameters.filter(j=>j.id==="sparkleColorCount").map(j=>F(j,i)),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Sparkle Colors"}),Number(o.sparkleColorCount??1)<5&&r.jsx("button",{onClick:()=>{const j=Number(o.sparkleColorCount??1);V("sparkleColorCount",String(j+1))},className:"text-xs px-2 py-1 rounded bg-brand-600 text-white hover:bg-brand-700",children:"+ Add Color"})]}),i.parameters.filter(j=>j.id.startsWith("sparkleColor")&&j.id!=="sparkleColorCount").slice(0,Number(o.sparkleColorCount??1)).map((j,W)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:j.name}),Number(o.sparkleColorCount??1)>1&&r.jsx("button",{onClick:()=>{const Q=Number(o.sparkleColorCount??1),A=W+1,Y={...o};for(let ee=A;ee<Q;ee++)Y[`sparkleColor${ee}`]=o[`sparkleColor${ee+1}`];Object.keys(Y).forEach(ee=>V(ee,Y[ee])),V("sparkleColorCount",String(Q-1))},className:"text-xs px-1.5 py-0.5 rounded bg-red-600 text-white hover:bg-red-700",title:"Remove color",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"w-12 h-10 rounded border border-gray-300 dark:border-gray-700 cursor-pointer"}),r.jsx("input",{type:"text",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm",placeholder:"#000000"})]})]},j.id))]}),i.parameters.filter(j=>j.id!=="backgroundColor"&&j.id!=="sparkleColorCount"&&!j.id.startsWith("sparkleColor")).map(j=>F(j,i))]}):i.id==="bars"?r.jsxs(r.Fragment,{children:[i.parameters.filter(j=>j.id==="colorCount").map(j=>F(j,i)),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Bar Colors"}),Number(o.colorCount??2)<8&&r.jsx("button",{onClick:()=>{const j=Number(o.colorCount??2);V("colorCount",String(j+1))},className:"text-xs px-2 py-1 rounded bg-brand-600 text-white hover:bg-brand-700",children:"+ Add Color"})]}),i.parameters.filter(j=>j.id.startsWith("color")&&j.id!=="colorCount").slice(0,Number(o.colorCount??2)).map((j,W)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:j.name}),Number(o.colorCount??2)>2&&r.jsx("button",{onClick:()=>{const Q=Number(o.colorCount??2),A=W+1,Y={...o};for(let ee=A;ee<Q;ee++)Y[`color${ee}`]=o[`color${ee+1}`];Object.keys(Y).forEach(ee=>V(ee,Y[ee])),V("colorCount",String(Q-1))},className:"text-xs px-1.5 py-0.5 rounded bg-red-600 text-white hover:bg-red-700",title:"Remove color",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"w-12 h-10 rounded border border-gray-300 dark:border-gray-700 cursor-pointer"}),r.jsx("input",{type:"text",value:o[j.id]??j.value,onChange:Q=>V(j.id,Q.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm",placeholder:"#000000"})]})]},j.id))]}),i.parameters.filter(j=>j.id!=="colorCount"&&!j.id.startsWith("color")).map(j=>F(j,i))]}):i.parameters.map(j=>F(j,i))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:Z,disabled:y,className:"w-full px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 font-medium",children:y?"Applying...":"Apply Effect"}),r.jsx("button",{onClick:()=>p(!0),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800",children:"Save as Preset"})]})]}):r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-8 bg-white/60 dark:bg-gray-950/60 text-center text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),r.jsx("p",{children:"Select an effect to customize"})]})})]}),N&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Save Preset"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preset Name"}),r.jsx("input",{type:"text",value:h,onChange:j=>w(j.target.value),placeholder:"My Custom Effect",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800",maxLength:32})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{p(!1),w("")},disabled:C,className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:K,disabled:C||!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50",children:C?"Saving...":"Save"})]})]})}),D&&r.jsx(Nn,{title:"Delete Preset",message:"Delete this preset?",onConfirm:()=>{_(D),B(null)},onCancel:()=>B(null),dangerous:!0})]})}const Vs=[{filename:"jingle_bells.mp3",size:2457600,duration:153,uploadedAt:"2024-12-01T10:30:00Z"},{filename:"silent_night.mp3",size:1843200,duration:115,uploadedAt:"2024-12-01T10:35:00Z"},{filename:"deck_the_halls.mp3",size:2048e3,duration:128,uploadedAt:"2024-12-01T10:40:00Z"}],na={async getAudioFiles(){try{return(await I.fetch("/api/files/audio")).files}catch{return Vs}},async uploadAudioFile(e){try{const t=new FormData;t.append("file",e);const s=await fetch("/api/files/audio",{method:"POST",body:t});if(s.ok)return await s.json();throw new Error(`Upload failed: ${s.status}`)}catch{return console.log("Mock: Audio file would be uploaded:",e.name),Vs.push({filename:e.name,size:e.size,uploadedAt:new Date().toISOString()}),{success:!0,filename:e.name,message:"File uploaded successfully (mock mode)"}}},async deleteAudioFile(e){try{return await I.fetch(`/api/files/audio/${encodeURIComponent(e)}`,{method:"DELETE"})}catch{console.log("Mock: Audio file would be deleted:",e);const t=Vs.findIndex(n=>n.filename===e);return t>-1&&Vs.splice(t,1),{success:!0,message:"File deleted successfully (mock mode)"}}}},ep=({sequence:e,onPlay:t,onEdit:n,onDuplicate:s,onExport:a,onDelete:l})=>{const i=e.type==="effect"?e.steps.reduce((f,g)=>g.duration>0?f+g.duration:f,0):e.duration,c=f=>{if(f===0)return"Manual";const g=Math.floor(f/3600),y=Math.floor(f%3600/60),v=f%60;return g>0?`${g}h ${y}m ${v}s`:y>0?`${y}m ${v}s`:`${v}s`},o=e.type==="effect"&&e.steps.some(f=>f.duration===0),u=e.type==="fseq"?"":"";return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-300 dark:border-gray-700 hover:border-blue-500 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-2xl",children:u}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),e.type==="fseq"&&r.jsx("span",{className:"px-2 py-0.5 text-xs bg-purple-600 text-white rounded",children:"xLights"})]}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-700 dark:text-gray-300",children:[e.type==="effect"&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e.steps.length}),e.steps.length===1?"effect":"effects"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:c(i)}),o&&r.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"(+ manual)"})]}),(e.type==="effect",e.loop&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),"Loop enabled"]})),e.type==="fseq"&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:""}),(e.fileSize/1024/1024).toFixed(1)," MB"]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>t(e.id),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Play sequence",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})}),r.jsx("button",{onClick:()=>n(e.id),className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",title:e.type==="fseq"?"Edit FSEQ settings":"Edit sequence",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.type==="effect"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>s(e.id),className:"p-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",title:"Duplicate sequence",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r.jsx("button",{onClick:()=>a(e.id),className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",title:"Export sequence",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),r.jsx("button",{onClick:()=>l(e.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Delete sequence",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},tp=()=>{const e=Vr(),[t,n]=m.useState([]),[s,a]=m.useState(!0),[l,i]=m.useState(null),[c,o]=m.useState(null),[u,f]=m.useState("all"),[g,y]=m.useState(!1),[v,k]=m.useState(null),[b,N]=m.useState(""),[p,h]=m.useState(""),[w,C]=m.useState(!1),[M,O]=m.useState(!1),[P,D]=m.useState(null),[B,z]=m.useState(""),[X,U]=m.useState(""),[q,V]=m.useState(!1),[Z,K]=m.useState(!1),[ie,E]=m.useState([]),[_,F]=m.useState(!1);m.useEffect(()=>{R()},[]),m.useEffect(()=>{M&&te()},[M]);const te=async()=>{try{F(!0);const d=await na.getAudioFiles();E(d)}catch(d){console.error("Error loading audio files:",d)}finally{F(!1)}},R=async()=>{try{a(!0),i(null);const d=await $e.getSequences();n(d)}catch(d){i("Failed to load sequences"),console.error("Error loading sequences:",d)}finally{a(!1)}},j=async d=>{try{const x=await $e.playSequence(d);x.success?console.log("Playing sequence:",d):i(x.message||"Failed to play sequence")}catch(x){i("Failed to play sequence"),console.error("Error playing sequence:",x)}},W=d=>{const x=t.find(S=>S.id===d);if(!x){i("Sequence not found");return}x.type==="fseq"?(D(d),z(x.name),U(x.audioUrl||""),V(x.loop??!1),O(!0)):e(`/sequences/edit/${d}`)},Q=async d=>{const x=t.find(S=>S.id===d);if(!x){i("Sequence not found");return}if(x.type==="fseq"){i("FSEQ sequences cannot be duplicated. Please upload a new file.");return}try{const S=await $e.createSequence(`${x.name} (Copy)`,x.description,x.steps,x.loop);S.success&&S.sequence?(n([...t,S.sequence]),e(`/sequences/edit/${S.sequence.id}`)):i(S.message||"Failed to duplicate sequence")}catch(S){i("Failed to duplicate sequence"),console.error("Error duplicating sequence:",S)}},A=async d=>{if(c!==d){o(d),setTimeout(()=>o(null),3e3);return}try{const x=await $e.deleteSequence(d);x.success?(n(t.filter(S=>S.id!==d)),o(null)):i(x.message||"Failed to delete sequence")}catch(x){i("Failed to delete sequence"),console.error("Error deleting sequence:",x)}},Y=()=>{e("/sequences/new")},ee=d=>{const x=t.find(S=>S.id===d);if(!x){i("Sequence not found");return}if(x.type==="fseq"){i("FSEQ sequences cannot be exported as JSON. Download the .fseq file instead.");return}try{const S=JSON.stringify(x,null,2),H=new Blob([S],{type:"application/json"}),le=URL.createObjectURL(H),Pe=document.createElement("a");Pe.href=le,Pe.download=`${x.name.replace(/[^a-zA-Z0-9]/g,"_")}.json`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(le)}catch(S){i("Failed to export sequence"),console.error("Error exporting sequence:",S)}},ve=()=>{const d=document.createElement("input");d.type="file",d.accept=".json",d.onchange=async x=>{var H;const S=(H=x.target.files)==null?void 0:H[0];if(S)try{const le=await S.text(),Pe=JSON.parse(le);if(!Pe.name||!Array.isArray(Pe.steps)){i("Invalid sequence file format");return}const yt=await $e.createSequence(`${Pe.name} (Imported)`,Pe.description,Pe.steps,Pe.loop??!1);yt.success&&yt.sequence?(n([...t,yt.sequence]),e(`/sequences/edit/${yt.sequence.id}`)):i(yt.message||"Failed to import sequence")}catch(le){i("Failed to import sequence. Invalid JSON file."),console.error("Error importing sequence:",le)}},d.click()},Me=()=>{y(!0)},rt=d=>{var H;const x=(H=d.target.files)==null?void 0:H[0];if(!x)return;if(!x.name.toLowerCase().endsWith(".fseq")){i("Please select a valid .fseq file");return}k(x);const S=x.name.replace(/\.fseq$/i,"");N(S)},Oe=async()=>{if(!v){i("Please select a file");return}if(!b.trim()){i("Sequence name is required");return}try{C(!0),i(null);const d=await $e.uploadFseq(v,b.trim(),p.trim()||void 0);d.success&&d.sequence?(n([...t,d.sequence]),y(!1),ke()):i(d.message||"Failed to upload FSEQ file")}catch(d){i("Failed to upload FSEQ file"),console.error("Error uploading FSEQ:",d)}finally{C(!1)}},Ye=async()=>{if(P){if(!B.trim()){i("Sequence name is required");return}try{K(!0),i(null);const d=await $e.updateFseq(P,B.trim(),X.trim()||void 0,q);d.success&&d.sequence?(n(t.map(x=>x.id===P?d.sequence:x)),O(!1),D(null)):i(d.message||"Failed to update FSEQ sequence")}catch(d){i("Failed to update FSEQ sequence"),console.error("Error updating FSEQ:",d)}finally{K(!1)}}},ke=()=>{k(null),N(""),h("")};if(s)return r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading sequences..."})})});const De=t.filter(d=>u==="all"?!0:d.type===u),Ie=t.filter(d=>d.type==="effect").length,_e=t.filter(d=>d.type==="fseq").length;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Sequences"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create timed playlists of LED effects"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Me,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload FSEQ"]}),r.jsxs("button",{onClick:ve,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import"]}),r.jsxs("button",{onClick:Y,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Sequence"]})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg transition-colors ${u==="all"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:["All",r.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${u==="all"?"bg-blue-700 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:t.length})]}),r.jsxs("button",{onClick:()=>f("effect"),className:`px-4 py-2 rounded-lg transition-colors ${u==="effect"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:[" Effect Sequences",r.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${u==="effect"?"bg-blue-700 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:Ie})]}),r.jsxs("button",{onClick:()=>f("fseq"),className:`px-4 py-2 rounded-lg transition-colors ${u==="fseq"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:[" FSEQ Sequences",r.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${u==="fseq"?"bg-blue-700 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:_e})]})]}),l&&r.jsxs("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-700 rounded-lg text-red-700 dark:text-red-400",children:[l,r.jsx("button",{onClick:()=>i(null),className:"ml-4 text-sm underline hover:no-underline",children:"Dismiss"})]}),De.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:u==="fseq"?"":""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t.length===0?"No sequences yet":`No ${u==="fseq"?"FSEQ":"effect"} sequences`}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t.length===0?"Create your first sequence to get started with timed effect playlists":u==="fseq"?"Upload FSEQ files from xLights to get started":"Create effect sequences using the built-in LED effects"}),r.jsxs("button",{onClick:Y,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg inline-flex items-center gap-2 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Sequence"]})]}):r.jsx("div",{className:"space-y-4",children:De.map(d=>r.jsxs("div",{className:"relative",children:[r.jsx(ep,{sequence:d,onPlay:j,onEdit:W,onDuplicate:Q,onExport:ee,onDelete:A}),c===d.id&&r.jsx("div",{className:"absolute top-2 right-2 bg-red-600 dark:bg-red-600 text-white text-sm px-3 py-1 rounded-lg shadow-lg",children:"Click again to confirm delete"})]},d.id))}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Upload FSEQ Sequence"}),r.jsx("button",{onClick:()=>{y(!1),ke()},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["FSEQ File ",r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"*"})]}),r.jsx("input",{type:"file",accept:".fseq",onChange:rt,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor-pointer"}),v&&r.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",v.name," (",(v.size/1024/1024).toFixed(2)," MB)"]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Sequence Name ",r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:b,onChange:d=>N(d.target.value),placeholder:"Christmas Carol Medley",className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",maxLength:64})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),r.jsx("textarea",{value:p,onChange:d=>h(d.target.value),placeholder:"Optional description",rows:3,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>{y(!1),ke()},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded",disabled:w,children:"Cancel"}),r.jsx("button",{onClick:Oe,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded disabled:opacity-50",disabled:w||!v||!b.trim(),children:w?"Uploading...":"Upload Sequence"})]})]})}),M&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit FSEQ Sequence Settings"}),r.jsx("button",{onClick:()=>{O(!1),D(null)},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Sequence Name ",r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:B,onChange:d=>z(d.target.value),placeholder:"Christmas Carol Medley",className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",maxLength:64})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Audio File (from SD Card)"}),r.jsxs("select",{value:X,onChange:d=>U(d.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",disabled:_,children:[r.jsx("option",{value:"",children:"No audio"}),_?r.jsx("option",{disabled:!0,children:"Loading audio files..."}):ie.length===0?r.jsx("option",{disabled:!0,children:"No audio files found"}):ie.map(d=>r.jsxs("option",{value:`/sd/audio/${d.filename}`,children:[d.filename,d.duration?` (${Math.floor(d.duration/60)}:${(d.duration%60).toString().padStart(2,"0")})`:""]},d.filename))]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:ie.length===0&&!_?"No audio files available. Upload audio files from the Audio page.":"Select an audio file from the SD card to play with this sequence"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"fseq-edit-loop",checked:q,onChange:d=>V(d.target.checked),className:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"fseq-edit-loop",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Loop sequence (restart from beginning when finished)"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>{O(!1),D(null)},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded",disabled:Z,children:"Cancel"}),r.jsx("button",{onClick:Ye,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50",disabled:Z||!B.trim(),children:Z?"Saving...":"Save Changes"})]})]})}),De.length>0&&r.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-500",children:["Showing ",De.length," of ",t.length," ",t.length===1?"sequence":"sequences",u!=="all"&&r.jsx("button",{onClick:()=>f("all"),className:"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 underline",children:"Show all"})]})]})},rp=({step:e,index:t,effect:n,onMoveUp:s,onMoveDown:a,onRemove:l,onUpdateDuration:i,onUpdateTransition:c,onConfigureParameters:o,isFirst:u,isLast:f})=>{const g=y=>{if(y===0)return"Manual";if(y<60)return`${y}s`;const v=Math.floor(y/60),k=y%60;return k>0?`${v}m ${k}s`:`${v}m`};return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:s,disabled:u,className:"p-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Move up",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),r.jsx("button",{onClick:a,disabled:f,className:"p-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Move down",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:"text-gray-500 dark:text-gray-400 font-mono text-sm",children:[t+1,"."]}),r.jsx("span",{className:"text-xl",children:(n==null?void 0:n.icon)||""}),r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:(n==null?void 0:n.name)||"Unknown Effect"})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-700 dark:text-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-gray-600 dark:text-gray-400",children:"Duration:"}),r.jsx("input",{type:"number",min:"0",max:"3600",step:"5",value:e.duration,onChange:y=>i(parseInt(y.target.value)||0),className:"w-20 px-2 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:g(e.duration)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-gray-600 dark:text-gray-400",children:"Transition:"}),r.jsxs("select",{value:e.transition,onChange:y=>c(y.target.value),className:"px-2 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"instant",children:"Instant"}),r.jsx("option",{value:"fade",children:"Fade"}),r.jsx("option",{value:"crossfade",children:"Crossfade"})]})]})]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:o,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors",title:"Configure parameters",children:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r.jsx("button",{onClick:l,className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Remove step",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})},Yc=()=>{const e=Vr(),{id:t}=j0(),n=t!==void 0&&t!=="new",[s,a]=m.useState(!0),[l,i]=m.useState(!1),[c,o]=m.useState(null),[u,f]=m.useState(""),[g,y]=m.useState(""),[v,k]=m.useState(!0),[b,N]=m.useState([]),[p,h]=m.useState([]),[w,C]=m.useState([]),[M,O]=m.useState(!1),[P,D]=m.useState(!1),[B,z]=m.useState(null),[X,U]=m.useState("effect"),[q,V]=m.useState(""),[Z,K]=m.useState(""),[ie,E]=m.useState(30),[_,F]=m.useState("fade"),[,te]=m.useState({});m.useEffect(()=>{R()},[t]);const R=async()=>{try{a(!0),o(null);const[d,x]=await Promise.all([mt.getEffects(),mt.getPresets()]);if(h(d),C(x),n){const S=await $e.getSequence(t);if(S){if(S.type==="fseq"){o("FSEQ sequences cannot be edited. They are read-only."),setTimeout(()=>e("/sequences"),2e3);return}f(S.name),y(S.description||""),k(S.loop),N(S.steps)}else o("Sequence not found")}}catch(d){o("Failed to load data"),console.error("Error loading data:",d)}finally{a(!1)}},j=async()=>{if(!u.trim()){o("Sequence name is required");return}if(b.length===0){o("At least one step is required");return}try{if(i(!0),o(null),n){const d={id:t,type:"effect",name:u.trim(),description:g.trim()||void 0,steps:b,loop:v,createdAt:new Date().toISOString()},x=await $e.updateSequence(d);x.success?e("/sequences"):o(x.message||"Failed to update sequence")}else{const d=await $e.createSequence(u.trim(),g.trim()||void 0,b,v);d.success?e("/sequences"):o(d.message||"Failed to create sequence")}}catch(d){o("Failed to save sequence"),console.error("Error saving sequence:",d)}finally{i(!1)}},W=()=>{let d,x={};if(X==="effect"){if(!q){o("Please select an effect");return}const H=p.find(le=>le.id===q);if(!H){o("Effect not found");return}d=q,H.parameters.forEach(le=>{x[le.id]=le.value})}else{if(!Z){o("Please select a preset");return}const H=w.find(le=>le.id===Z);if(!H){o("Preset not found");return}d=H.effectId,x={...H.parameters}}const S={id:`step-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,effectId:d,parameters:x,duration:ie,transition:_};N([...b,S]),O(!1),Q()},Q=()=>{U("effect"),V(""),K(""),E(30),F("fade"),te({})},A=d=>{N(b.filter((x,S)=>S!==d))},Y=(d,x)=>{const S=[...b],H=x==="up"?d-1:d+1;[S[d],S[H]]=[S[H],S[d]],N(S)},ee=(d,x)=>{const S=[...b];S[d].duration=x,N(S)},ve=(d,x)=>{const S=[...b];S[d].transition=x,N(S)},Me=d=>{z(d),D(!0)},rt=()=>{if(B!==null&&Ie){const d=[...b];d[B].parameters={...Ie.parameters},N(d)}D(!1),z(null)},Oe=(d,x)=>{if(B!==null&&Ie){const S=[...b];S[B].parameters={...S[B].parameters,[d]:x},N(S)}},Ye=()=>b.reduce((d,x)=>x.duration>0?d+x.duration:d,0),ke=d=>{if(d===0)return"Manual";const x=Math.floor(d/3600),S=Math.floor(d%3600/60),H=d%60;return x>0?`${x}h ${S}m ${H}s`:S>0?`${S}m ${H}s`:`${H}s`};if(s)return r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})})});const De=p.find(d=>d.id===q),Ie=B!==null?b[B]:null,_e=Ie?p.find(d=>d.id===Ie.effectId):null;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>e("/sequences"),className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-4",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Sequences"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n?"Edit Sequence":"New Sequence"})]}),c&&r.jsxs("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-700 rounded-lg text-red-700 dark:text-red-400",children:[c,r.jsx("button",{onClick:()=>o(null),className:"ml-4 text-sm underline hover:no-underline",children:"Dismiss"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-300 dark:border-gray-700 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Sequence Name ",r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"*"})]}),r.jsx("input",{type:"text",value:u,onChange:d=>f(d.target.value),placeholder:"My Awesome Sequence",className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",maxLength:64})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),r.jsx("input",{type:"text",value:g,onChange:d=>y(d.target.value),placeholder:"Optional description",className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"loop",checked:v,onChange:d=>k(d.target.checked),className:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"loop",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Loop sequence (restart from beginning when finished)"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-300 dark:border-gray-700 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Timeline"}),r.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Step"]})]}),b.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No steps yet"}),r.jsxs("button",{onClick:()=>O(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded inline-flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add First Step"]})]}):r.jsx("div",{className:"space-y-3",children:b.map((d,x)=>{const S=p.find(H=>H.id===d.effectId);return r.jsx(rp,{step:d,index:x,effect:S,onMoveUp:()=>Y(x,"up"),onMoveDown:()=>Y(x,"down"),onRemove:()=>A(x),onUpdateDuration:H=>ee(x,H),onUpdateTransition:H=>ve(x,H),onConfigureParameters:()=>Me(x),isFirst:x===0,isLast:x===b.length-1},d.id)})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:b.length})," step",b.length!==1?"s":""," "," ",r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:ke(Ye())}),b.some(d=>d.duration===0)&&r.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:" (+ manual steps)"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>e("/sequences"),className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded",disabled:l,children:"Cancel"}),r.jsx("button",{onClick:j,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50",disabled:l||!u.trim()||b.length===0,children:l?"Saving...":"Save Sequence"})]})]})}),M&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add Effect to Sequence"}),r.jsx("button",{onClick:()=>{O(!1),Q()},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add From"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{U("effect"),K("")},className:`flex-1 px-4 py-2 rounded-lg transition-colors ${X==="effect"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Effect (Default Settings)"}),r.jsx("button",{onClick:()=>{U("preset"),V("")},className:`flex-1 px-4 py-2 rounded-lg transition-colors ${X==="preset"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Preset (Custom Settings)"})]})]}),X==="effect"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Effect"}),r.jsxs("select",{value:q,onChange:d=>V(d.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"",children:"-- Choose an effect --"}),p.map(d=>r.jsxs("option",{value:d.id,children:[d.icon," ",d.name]},d.id))]}),De&&r.jsxs("div",{className:"mt-3 p-3 bg-gray-100 dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-700",children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:De.description}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Parameters will use default values (customizable after adding)"})]})]}),X==="preset"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Preset"}),w.length>0?r.jsxs(r.Fragment,{children:[r.jsxs("select",{value:Z,onChange:d=>K(d.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"",children:"-- Choose a preset --"}),w.map(d=>{const x=p.find(S=>S.id===d.effectId);return r.jsxs("option",{value:d.id,children:[x==null?void 0:x.icon," ",d.name," (",x==null?void 0:x.name,")"]},d.id)})]}),Z&&(()=>{const d=w.find(S=>S.id===Z),x=d?p.find(S=>S.id===d.effectId):null;return d&&x?r.jsxs("div",{className:"mt-3 p-3 bg-gray-100 dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-700",children:[r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:[r.jsx("span",{className:"font-medium",children:x.name})," - ",x.description]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Parameters from your saved preset will be applied"})]}):null})()]}):r.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-700 text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"No presets saved yet"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Go to Effects page to save presets first"})]})]}),(De||Z)&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Duration (seconds)"}),r.jsx("input",{type:"number",min:"0",max:"3600",step:"5",value:ie,onChange:d=>E(parseInt(d.target.value)||0),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"0 = manual (infinite)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Transition to Next"}),r.jsxs("select",{value:_,onChange:d=>F(d.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"instant",children:"Instant"}),r.jsx("option",{value:"fade",children:"Fade (1s)"}),r.jsx("option",{value:"crossfade",children:"Crossfade (1s)"})]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>{O(!1),Q()},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded",children:"Cancel"}),r.jsxs("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50",disabled:X==="effect"?!q:!Z,children:["Add ",X==="effect"?"Effect":"Preset"]})]})]})}),P&&Ie&&_e&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:_e.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:_e.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:_e.category})]})]}),r.jsx("button",{onClick:()=>{D(!1),z(null)},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[_e.parameters.map(d=>{var S;const x=Ie.parameters[d.id]??d.value;switch(d.type){case"slider":return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d.name}),r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x,d.unit]})]}),r.jsx("input",{type:"range",min:d.min,max:d.max,step:d.step,value:x,onChange:H=>Oe(d.id,Number(H.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"})]},d.id);case"color":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:d.name}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:x,onChange:H=>Oe(d.id,H.target.value),className:"w-12 h-12 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),r.jsx("input",{type:"text",value:x,onChange:H=>Oe(d.id,H.target.value),className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm focus:outline-none focus:border-blue-500",placeholder:"#000000"})]})]},d.id);case"toggle":return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d.name}),r.jsx("button",{onClick:()=>Oe(d.id,!x),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x?"bg-blue-600":"bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x?"translate-x-6":"translate-x-1"}`})})]},d.id);case"select":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:d.name}),r.jsx("select",{value:x,onChange:H=>Oe(d.id,H.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500",children:(S=d.options)==null?void 0:S.map(H=>r.jsx("option",{value:H.value,children:H.label},H.value))})]},d.id);case"number":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-2",children:d.name}),r.jsx("input",{type:"number",min:d.min,max:d.max,step:d.step,value:x,onChange:H=>Oe(d.id,Number(H.target.value)),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500"})]},d.id);default:return null}}),_e.parameters.length===0&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This effect has no configurable parameters."})})]}),r.jsxs("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>{D(!1),z(null)},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded",children:"Cancel"}),r.jsx("button",{onClick:rt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Save Changes"})]})]})})]})};function np(){const[e,t]=m.useState([]),[n,s]=m.useState(!0),[a,l]=m.useState(!1),[i,c]=m.useState(null),[o,u]=m.useState(null),[f,g]=m.useState(!1),[y,v]=m.useState(0),[k,b]=m.useState(0),[N,p]=m.useState(.7),[h,w]=m.useState(new Array(32).fill(0)),[C,M]=m.useState(null),O=m.useRef(null),P=m.useRef(null),D=m.useRef(null),B=m.useRef();m.useEffect(()=>(z(),()=>{B.current&&cancelAnimationFrame(B.current)}),[]);const z=async()=>{try{s(!0),c(null);const A=await na.getAudioFiles();t(A)}catch(A){c("Failed to load audio files"),console.error(A)}finally{s(!1)}},X=async A=>{var ve;const Y=(ve=A.target.files)==null?void 0:ve[0];if(!Y)return;if(!["audio/mpeg","audio/wav","audio/ogg","audio/mp3"].includes(Y.type)&&!Y.name.match(/\.(mp3|wav|ogg)$/i)){c("Invalid file type. Please upload MP3, WAV, or OGG files.");return}try{l(!0),c(null),await na.uploadAudioFile(Y),await z(),A.target.value=""}catch(Me){c("Failed to upload audio file"),console.error(Me)}finally{l(!1)}},U=A=>{M(A)},q=async()=>{if(C)try{c(null),await na.deleteAudioFile(C),await z()}catch(A){c("Failed to delete audio file"),console.error(A)}finally{M(null)}},V=A=>A<1024?`${A} B`:A<1024*1024?`${(A/1024).toFixed(1)} KB`:`${(A/(1024*1024)).toFixed(1)} MB`,Z=A=>{if(!A)return"Unknown";const Y=Math.floor(A/60),ee=A%60;return`${Y}:${ee.toString().padStart(2,"0")}`},K=A=>`${I.getBaseUrl()}/api/files/audio/stream/${encodeURIComponent(A)}`,ie=async A=>{const Y=O.current;if(!Y)return;if(o===A&&!Y.paused){Y.pause(),g(!1);return}const ee=K(A);Y.src=ee,u(A);try{await Y.play(),g(!0),R()}catch(ve){console.error("Failed to play audio:",ve),c("Failed to play audio file")}},E=()=>{var A;(A=O.current)==null||A.pause(),g(!1)},_=()=>{const A=O.current;A&&(A.pause(),A.currentTime=0,g(!1),u(null),v(0),w(new Array(32).fill(0)))},F=A=>{const Y=O.current;if(!Y)return;const ee=parseFloat(A.target.value);Y.currentTime=ee,v(ee)},te=A=>{const Y=O.current;if(!Y)return;const ee=parseFloat(A.target.value);Y.volume=ee,p(ee)},R=()=>{const A=O.current;if(!A)return;if(!P.current){P.current=new AudioContext;const rt=P.current.createMediaElementSource(A);D.current=P.current.createAnalyser(),D.current.fftSize=64,rt.connect(D.current),D.current.connect(P.current.destination)}const Y=D.current;if(!Y)return;const ee=Y.frequencyBinCount,ve=new Uint8Array(ee),Me=()=>{Y.getByteFrequencyData(ve),w(Array.from(ve)),B.current=requestAnimationFrame(Me)};Me()},j=()=>{const A=O.current;A&&v(A.currentTime)},W=()=>{const A=O.current;A&&b(A.duration)},Q=()=>{g(!1),v(0)};return r.jsxs("div",{children:[r.jsx("audio",{ref:O,onTimeUpdate:j,onLoadedMetadata:W,onEnded:Q}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Audio Files"}),r.jsx("p",{className:"text-gray-500",children:"Manage audio files on SD card"})]}),i&&r.jsx("div",{className:"mb-4 p-3 rounded bg-red-500/10 border border-red-500/20 text-red-500",children:i}),o&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("svg",{className:"w-5 h-5 text-brand-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),r.jsx("span",{className:"font-medium truncate",children:o})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:f?E:()=>ie(o),className:"p-2 rounded-full bg-brand-600 text-white hover:bg-brand-700 transition-colors",title:f?"Pause":"Play",children:f?r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),r.jsx("button",{onClick:_,className:"p-2 rounded-full bg-gray-600 text-white hover:bg-gray-700 transition-colors",title:"Stop",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M6 6h12v12H6z"})})})]})]}),r.jsx("div",{className:"mb-3 h-16 bg-gray-100 dark:bg-gray-900 rounded flex items-end gap-1 px-2 overflow-hidden",children:h.map((A,Y)=>r.jsx("div",{className:"flex-1 bg-gradient-to-t from-brand-600 to-brand-400 rounded-t transition-all duration-75",style:{height:`${A/255*100}%`,minHeight:"2px"}},Y))}),r.jsxs("div",{className:"mb-3",children:[r.jsx("input",{type:"range",min:"0",max:k||0,step:"0.1",value:y,onChange:F,className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-brand-600"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:Z(Math.floor(y))}),r.jsx("span",{children:Z(Math.floor(k))})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),r.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:N,onChange:te,className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-brand-600"}),r.jsxs("span",{className:"text-xs text-gray-500 w-10 text-right",children:[Math.round(N*100),"%"]})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60 mb-4",children:[r.jsx("h2",{className:"text-lg font-medium mb-3",children:"Upload Audio File"}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("label",{className:"flex-1",children:r.jsx("input",{type:"file",accept:".mp3,.wav,.ogg,audio/mpeg,audio/wav,audio/ogg",onChange:X,disabled:a,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-brand-600 file:text-white hover:file:bg-brand-700 file:cursor-pointer disabled:opacity-50"})})}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported formats: MP3, WAV, OGG"})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-950/60 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("h2",{className:"text-lg font-medium",children:["Audio Files (",e.length,")"]})}),n?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading audio files..."}):e.length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No audio files found. Upload a file to get started."}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:e.map(A=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("svg",{className:"w-5 h-5 text-brand-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),r.jsx("span",{className:"font-medium truncate",children:A.filename}),o===A.filename&&r.jsxs("span",{className:"flex items-center gap-1 text-xs text-brand-500",children:[r.jsx("span",{className:"inline-block w-1 h-1 bg-brand-500 rounded-full animate-pulse"}),"Playing"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[r.jsx("span",{children:V(A.size)}),A.duration&&r.jsx("span",{children:Z(A.duration)}),A.uploadedAt&&r.jsx("span",{className:"hidden sm:inline",children:new Date(A.uploadedAt).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[r.jsx("button",{onClick:()=>ie(A.filename),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:o===A.filename&&f?"Pause":"Play",children:o===A.filename&&f?r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),r.jsx("button",{onClick:()=>U(A.filename),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Delete file",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},A.filename))})]}),C&&r.jsx(Nn,{title:"Delete Audio File",message:`Are you sure you want to delete "${C}"? This action cannot be undone.`,onConfirm:q,onCancel:()=>M(null),dangerous:!0})]})}var Lr=(e=>(e.TEMPERATURE="temperature",e.HUMIDITY="humidity",e.PRESSURE="pressure",e.LIGHT="light",e.SOUND="sound",e.MOTION="motion",e.PROXIMITY="proximity",e.AIR_QUALITY="air_quality",e.VOLTAGE="voltage",e.CURRENT="current",e.CUSTOM="custom",e))(Lr||{}),Rr=(e=>(e.ACTIVE="active",e.IDLE="idle",e.ERROR="error",e.DISABLED="disabled",e.CALIBRATING="calibrating",e))(Rr||{}),A0=(e=>(e.INFO="info",e.WARNING="warning",e.CRITICAL="critical",e))(A0||{});const Bn=[{id:"temp-1",name:"Temperature",type:Lr.TEMPERATURE,currentReading:{value:22.5,unit:"C",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:1e3,smoothing:3,threshold:{min:15,max:30,warningMin:18,warningMax:28},calibrationOffset:0},pin:34,lastCalibrated:Date.now()-864e5},{id:"humid-1",name:"Humidity",type:Lr.HUMIDITY,currentReading:{value:45,unit:"%",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:2e3,smoothing:5,threshold:{min:30,max:70,warningMin:35,warningMax:65},calibrationOffset:0},pin:35,lastCalibrated:Date.now()-864e5},{id:"light-1",name:"Light Level",type:Lr.LIGHT,currentReading:{value:350,unit:"lux",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:500,smoothing:2,threshold:{min:100,max:1e3,warningMin:150,warningMax:900},calibrationOffset:0},pin:36},{id:"sound-1",name:"Sound Level",type:Lr.SOUND,currentReading:{value:65,unit:"dB",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:100,smoothing:1,threshold:{min:40,max:85,warningMin:50,warningMax:80},calibrationOffset:0,triggerEffect:"rainbow"},pin:39}],sp=[{id:"alert-1",sensorId:"light-1",sensorName:"Light Level",severity:A0.WARNING,message:"Light level below warning threshold (350 lux < 400 lux)",timestamp:Date.now()-3e5,acknowledged:!1}],ap=[{id:"rule-1",name:"High Temperature Alert",sensorId:"temp-1",condition:"above",value1:28,action:"send_alert",actionData:"Temperature too high!",enabled:!0},{id:"rule-2",name:"Low Light Effect",sensorId:"light-1",condition:"below",value1:200,action:"trigger_effect",actionData:"rainbow",enabled:!0}],lp=[{id:"group-1",name:"Environmental",sensorIds:["temp-1","humid-1"],icon:""},{id:"group-2",name:"Ambient",sensorIds:["light-1","sound-1"],icon:""}],Kc=[{id:"remote-temp-1",name:"Living Room Temp",type:Lr.TEMPERATURE,currentReading:{value:23.2,unit:"C",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:2e3,smoothing:3,threshold:{min:15,max:30},calibrationOffset:0},deviceId:"device-001",deviceName:"Living Room JBoard",lastSync:Date.now()-5e3,rssi:-65},{id:"remote-motion-1",name:"Hallway Motion",type:Lr.MOTION,currentReading:{value:1,unit:"detected",timestamp:Date.now(),status:Rr.ACTIVE},config:{enabled:!0,samplingRate:500,smoothing:1,threshold:{},calibrationOffset:0},deviceId:"device-002",deviceName:"Hallway JBoard",lastSync:Date.now()-3e3,rssi:-72}],ip=[{id:"log-1",sensorId:"temp-1",startTime:Date.now()-36e5,endTime:Date.now(),filename:"temp-1_2025-11-11.csv",fileSize:2.4,recordCount:3600,status:"active"},{id:"log-2",sensorId:"humid-1",startTime:Date.now()-72e5,endTime:Date.now()-36e5,filename:"humid-1_2025-11-11_00.csv",fileSize:1.8,recordCount:1800,status:"stopped"}],op={enabled:!0,sensorIds:["temp-1","humid-1"],interval:1,maxFileSize:10,autoRotate:!0,format:"csv"};function cp(e,t=1){const n=Date.now(),s=6e4,a=t*60,l=[],c={"temp-1":22,"humid-1":45,"light-1":350,"sound-1":65}[e]||50;for(let o=a;o>=0;o--){const u=n-o*s,f=(Math.random()-.5)*10;l.push({timestamp:u,value:c+f})}return{sensorId:e,data:l,startTime:n-t*36e5,endTime:n}}const he={async getSensors(){try{return await I.fetch("/api/sensors")}catch{return Bn}},async getSensor(e){try{return await I.fetch(`/api/sensors/${e}`)}catch{const t=Bn.find(n=>n.id===e);if(!t)throw new Error("Sensor not found");return t}},async updateSensorConfig(e,t){try{await I.fetch(`/api/sensors/${e}/config`,{method:"PUT",body:JSON.stringify(t)})}catch{}},async calibrateSensor(e,t){try{return await I.fetch(`/api/sensors/${e}/calibrate`,{method:"POST",body:JSON.stringify({referenceValue:t})})}catch{const n=Bn.find(s=>s.id===e);return{sensorId:e,referenceValue:t,measuredValue:(n==null?void 0:n.currentReading.value)||0,offset:t-((n==null?void 0:n.currentReading.value)||0),timestamp:Date.now()}}},async getSensorHistory(e,t,n){try{return await I.fetch(`/api/sensors/${e}/history?start=${t}&end=${n}`)}catch{const s=Math.ceil((n-t)/36e5);return cp(e,Math.min(s,24))}},async getSensorStats(e,t=36e5){try{return await I.fetch(`/api/sensors/${e}/stats?duration=${t}`)}catch{const n=Bn.find(a=>a.id===e),s=(n==null?void 0:n.currentReading.value)||0;return{min:s-5,max:s+5,avg:s,current:s}}},async getAlerts(e=!1){try{return await I.fetch(`/api/sensors/alerts?acknowledged=${e}`)}catch{return sp.filter(t=>t.acknowledged===e)}},async acknowledgeAlert(e){try{await I.fetch(`/api/sensors/alerts/${e}/acknowledge`,{method:"POST"})}catch{}},async clearAlerts(){try{await I.fetch("/api/sensors/alerts",{method:"DELETE"})}catch{}},async getAutomationRules(){try{return await I.fetch("/api/sensors/automation/rules")}catch{return ap}},async createAutomationRule(e){try{return await I.fetch("/api/sensors/automation/rules",{method:"POST",body:JSON.stringify(e)})}catch{return{...e,id:`rule-${Date.now()}`}}},async updateAutomationRule(e,t){try{await I.fetch(`/api/sensors/automation/rules/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch{}},async deleteAutomationRule(e){try{await I.fetch(`/api/sensors/automation/rules/${e}`,{method:"DELETE"})}catch{}},async getGroups(){try{return await I.fetch("/api/sensors/groups")}catch{return lp}},async createGroup(e){try{return await I.fetch("/api/sensors/groups",{method:"POST",body:JSON.stringify(e)})}catch{return{...e,id:`group-${Date.now()}`}}},async exportData(e="csv"){try{return await(await fetch(`/api/sensors/export?format=${e}`)).blob()}catch{const t=Bn.map(n=>`${n.name},${n.currentReading.value},${n.currentReading.unit},${new Date(n.currentReading.timestamp).toISOString()}`).join(`
`);return new Blob([`Sensor,Value,Unit,Timestamp
${t}`],{type:"text/csv"})}},async getRemoteSensors(){try{return await I.fetch("/api/sensors/remote")}catch{return Kc}},async getRemoteSensor(e,t){try{return await I.fetch(`/api/jboard/devices/${e}/sensors/${t}`)}catch{const n=Kc.find(s=>s.id===t&&s.deviceId===e);if(!n)throw new Error("Remote sensor not found");return n}},async refreshRemoteSensors(e){try{const t=e?`/api/jboard/devices/${e}/sensors/refresh`:"/api/sensors/remote/refresh";await I.fetch(t,{method:"POST"})}catch{}},async getLoggingConfig(){try{return await I.fetch("/api/sensors/logging/config")}catch{return op}},async updateLoggingConfig(e){try{await I.fetch("/api/sensors/logging/config",{method:"PUT",body:JSON.stringify(e)})}catch{}},async getDataLogs(){try{return await I.fetch("/api/sensors/logging/logs")}catch{return ip}},async startLogging(e){try{await I.fetch("/api/sensors/logging/start",{method:"POST",body:JSON.stringify({sensorIds:e})})}catch{}},async stopLogging(e){try{await I.fetch("/api/sensors/logging/stop",{method:"POST",body:JSON.stringify({sensorIds:e})})}catch{}},async downloadLog(e){try{return await(await fetch(`/api/sensors/logging/logs/${e}/download`)).blob()}catch{const t=`Timestamp,Value
${Array.from({length:10},(n,s)=>`${Date.now()-s*6e4},${20+Math.random()*5}`).join(`
`)}`;return new Blob([t],{type:"text/csv"})}},async deleteLog(e){try{await I.fetch(`/api/sensors/logging/logs/${e}`,{method:"DELETE"})}catch{}}};var Qe=(e=>(e[e.JSENSE_BOARD=1]="JSENSE_BOARD",e[e.LED_CONTROLLER=2]="LED_CONTROLLER",e[e.SENSOR_HUB=3]="SENSOR_HUB",e[e.AUDIO_REACTIVE=4]="AUDIO_REACTIVE",e[e.EFFECTS_CONTROLLER=5]="EFFECTS_CONTROLLER",e))(Qe||{}),we=(e=>(e[e.LED_CONTROL=1]="LED_CONTROL",e[e.SENSOR_DATA=2]="SENSOR_DATA",e[e.AUDIO_PLAYBACK=4]="AUDIO_PLAYBACK",e[e.WEB_INTERFACE=8]="WEB_INTERFACE",e[e.BATTERY_POWERED=16]="BATTERY_POWERED",e))(we||{});const dp={mac:"AA:BB:CC:DD:EE:FF",name:"JSense Board",type:Qe.JSENSE_BOARD,capabilities:we.LED_CONTROL|we.WEB_INTERFACE,firmwareVersion:"1.0.0",ipAddress:"192.168.1.100",isListening:!0},up=[{mac:"11:22:33:44:55:66",name:"LED Strip Controller",type:Qe.LED_CONTROLLER,capabilities:we.LED_CONTROL,rssi:-42,lastSeen:new Date(Date.now()-3e3).toISOString(),firmwareVersion:"1.0.2",ipAddress:"192.168.1.101",isPaired:!0},{mac:"77:88:99:AA:BB:CC",name:"Sensor Hub",type:Qe.SENSOR_HUB,capabilities:we.SENSOR_DATA|we.BATTERY_POWERED,rssi:-58,lastSeen:new Date(Date.now()-5e3).toISOString(),firmwareVersion:"0.9.8",ipAddress:"192.168.1.102",isPaired:!0}],mp=[{id:"1",from:"AA:BB:CC:DD:EE:FF",to:"11:22:33:44:55:66",timestamp:new Date(Date.now()-12e4).toISOString(),type:"CHAT_MESSAGE",payload:{text:"Hey, are you online?"},status:"delivered"},{id:"2",from:"11:22:33:44:55:66",to:"AA:BB:CC:DD:EE:FF",timestamp:new Date(Date.now()-11e4).toISOString(),type:"CHAT_MESSAGE",payload:{text:"Yes! Just started up."},status:"delivered"},{id:"3",from:"AA:BB:CC:DD:EE:FF",to:"11:22:33:44:55:66",timestamp:new Date(Date.now()-1e5).toISOString(),type:"set_brightness",payload:{value:75},status:"delivered"},{id:"4",from:"AA:BB:CC:DD:EE:FF",to:"11:22:33:44:55:66",timestamp:new Date(Date.now()-9e4).toISOString(),type:"CHAT_MESSAGE",payload:{text:"Can you dim the lights a bit?"},status:"delivered"},{id:"5",from:"11:22:33:44:55:66",to:"AA:BB:CC:DD:EE:FF",timestamp:new Date(Date.now()-85e3).toISOString(),type:"CHAT_MESSAGE",payload:{text:"Done! Set to 75%"},status:"delivered"},{id:"6",from:"AA:BB:CC:DD:EE:FF",to:"77:88:99:AA:BB:CC",timestamp:new Date(Date.now()-6e4).toISOString(),type:"CHAT_MESSAGE",payload:{text:"What's the current temperature?"},status:"delivered"},{id:"7",from:"77:88:99:AA:BB:CC",to:"AA:BB:CC:DD:EE:FF",timestamp:new Date(Date.now()-55e3).toISOString(),type:"CHAT_MESSAGE",payload:{text:"72F, humidity at 45%"},status:"delivered"}],wt={async getThisDevice(){try{const e=await I.fetch("/api/jboard/device");return{mac:e.macAddress,name:e.name,type:e.deviceType,capabilities:e.capabilities,firmwareVersion:e.firmware,ipAddress:e.ipAddress,isListening:!0}}catch{return dp}},async getPeers(){try{return(await I.fetch("/api/jboard/peers")).map(t=>({mac:t.macAddress,name:t.name,type:t.deviceType,capabilities:t.capabilities,rssi:t.rssi,lastSeen:new Date(t.lastSeen).toISOString(),firmwareVersion:t.firmware,ipAddress:t.ipAddress,isPaired:!0}))}catch{return up}},async startScan(){var e;try{const t=await I.fetch("/api/jboard/scan",{method:"POST"}),n=((e=t.devices)==null?void 0:e.map(s=>({mac:s.macAddress,name:s.name,type:s.deviceType,capabilities:s.capabilities,rssi:s.rssi,lastSeen:new Date().toISOString(),firmwareVersion:s.firmware,ipAddress:s.ipAddress,isPaired:!1})))||[];return{success:t.success,message:t.message,devices:n}}catch{return console.log("Mock: Starting device scan"),{success:!0,message:"Found 2 devices",devices:[{mac:"DD:EE:FF:00:11:22",name:"Audio Reactive #4",type:Qe.AUDIO_REACTIVE,capabilities:we.LED_CONTROL|we.AUDIO_PLAYBACK,rssi:-35,lastSeen:new Date().toISOString(),firmwareVersion:"1.1.0",ipAddress:"192.168.1.103",isPaired:!1},{mac:"33:44:55:66:77:88",name:"Effects Controller #6",type:Qe.EFFECTS_CONTROLLER,capabilities:we.LED_CONTROL|we.WEB_INTERFACE,rssi:-48,lastSeen:new Date().toISOString(),firmwareVersion:"1.0.5",ipAddress:"192.168.1.104",isPaired:!1}]}}},async pairDevice(e,t){try{return await I.fetch("/api/jboard/pair",{method:"POST",body:JSON.stringify({macAddress:e,name:t})})}catch{return console.log("Mock: Pairing with device:",e),{success:!0,message:"Device paired (mock mode)"}}},async unpairDevice(e){try{return await I.fetch(`/api/jboard/peers/${e}`,{method:"DELETE"})}catch{return console.log("Mock: Unpairing device:",e),{success:!0,message:"Device unpaired (mock mode)"}}},async sendMessage(e,t,n){try{return await I.fetch("/api/jboard/message",{method:"POST",body:JSON.stringify({to:e,command:t,data:n})})}catch{return console.log("Mock: Sending message to",e,":",t,n),{success:!0,message:"Message sent (mock mode)"}}},async broadcast(e,t){try{return await I.fetch("/api/jboard/broadcast",{method:"POST",body:JSON.stringify({command:e,data:t})})}catch{return console.log("Mock: Broadcasting:",e,t),{success:!0,message:"Broadcast sent (mock mode)"}}},async getMessages(e=50){try{return(await I.fetch(`/api/jboard/messages?limit=${e}`)).map(n=>({id:n.id,from:n.from,to:"",timestamp:n.receivedAt,type:n.command,payload:typeof n.data=="string"?JSON.parse(n.data):n.data,status:"delivered"}))}catch{return mp}}};function Xe({id:e,checked:t,onChange:n,label:s,disabled:a=!1}){return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",role:"switch","aria-checked":t,"aria-labelledby":`${e}-label`,disabled:a,onClick:()=>!a&&n(!t),className:`
          relative inline-flex h-6 w-11 items-center rounded-full transition-colors
          focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2
          ${t?"bg-brand-600":"bg-gray-300 dark:bg-gray-700"}
          ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,children:r.jsx("span",{className:`
            inline-block h-4 w-4 transform rounded-full bg-white transition-transform
            ${t?"translate-x-6":"translate-x-1"}
          `})}),r.jsx("label",{id:`${e}-label`,htmlFor:e,className:`text-sm font-medium ${a?"opacity-50":"cursor-pointer"}`,onClick:()=>!a&&n(!t),children:s})]})}function fp({data:e,width:t=600,height:n=200,color:s="#3b82f6",showGrid:a=!0,showAxes:l=!0,unit:i=""}){const{path:c,points:o,minValue:u,maxValue:f,minTime:g,maxTime:y}=m.useMemo(()=>{if(e.length===0)return{path:"",points:[],minValue:0,maxValue:0,minTime:0,maxTime:0};const v=e.map(D=>D.value),k=e.map(D=>D.timestamp),b=Math.min(...v),N=Math.max(...v),p=Math.min(...k),h=Math.max(...k),w=N-b||1,C=b-w*.1,M=N+w*.1,O=e.map(D=>{const B=(D.timestamp-p)/(h-p)*t,z=n-(D.value-C)/(M-C)*n;return{x:B,y:z,value:D.value,timestamp:D.timestamp}});return{path:O.map((D,B)=>B===0?`M ${D.x} ${D.y}`:`L ${D.x} ${D.y}`).join(" "),points:O,minValue:C,maxValue:M,minTime:p,maxTime:h}},[e,t,n]);return e.length===0?r.jsx("div",{className:"flex items-center justify-center text-gray-500 text-sm",style:{width:t,height:n},children:"No data available"}):r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{width:t,height:n,className:"overflow-visible",children:[a&&r.jsxs("g",{className:"opacity-20",children:[[0,.25,.5,.75,1].map(v=>r.jsx("line",{x1:0,y1:n*v,x2:t,y2:n*v,stroke:"currentColor",strokeWidth:1},`h-${v}`)),[0,.25,.5,.75,1].map(v=>r.jsx("line",{x1:t*v,y1:0,x2:t*v,y2:n,stroke:"currentColor",strokeWidth:1},`v-${v}`))]}),r.jsx("path",{d:`${c} L ${t} ${n} L 0 ${n} Z`,fill:s,opacity:.1}),r.jsx("path",{d:c,stroke:s,strokeWidth:2,fill:"none"}),o.map((v,k)=>r.jsx("g",{children:r.jsx("circle",{cx:v.x,cy:v.y,r:3,fill:s,className:"opacity-0 hover:opacity-100 transition-opacity"})},k))]}),l&&r.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 -ml-12 w-10 text-right",children:[r.jsxs("span",{children:[f.toFixed(1),i]}),r.jsxs("span",{children:[((f+u)/2).toFixed(1),i]}),r.jsxs("span",{children:[u.toFixed(1),i]})]}),l&&r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[r.jsx("span",{children:new Date(g).toLocaleTimeString()}),r.jsx("span",{children:new Date(y).toLocaleTimeString()})]})]})}function gp({sensor:e,onClose:t,onSave:n,onCalibrate:s}){const[a,l]=m.useState(e.config),[i,c]=m.useState(""),[o,u]=m.useState(!1),[f,g]=m.useState(!1),[y,v]=m.useState("general");m.useEffect(()=>{l(e.config)},[e]);const k=async()=>{u(!0);try{await n(a),t()}catch(N){console.error("Failed to save configuration:",N)}finally{u(!1)}},b=async()=>{if(!(!s||!i)){g(!0);try{await s(parseFloat(i)),c("")}catch(N){console.error("Failed to calibrate sensor:",N)}finally{g(!1)}}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold",children:[e.name," Configuration"]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.type,"  GPIO ",e.pin]})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-800 px-6",children:[{id:"general",label:"General"},{id:"thresholds",label:"Thresholds"},{id:"calibration",label:"Calibration"}].map(N=>r.jsx("button",{onClick:()=>v(N.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${y===N.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:N.label},N.id))}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[y==="general"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("label",{className:"text-sm font-medium",children:"Enable Sensor"}),r.jsx(Xe,{id:"config-enabled",checked:a.enabled,onChange:N=>l({...a,enabled:N}),label:""})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Sampling Rate (ms)"}),r.jsx("input",{type:"number",min:"100",max:"10000",step:"100",value:a.samplingRate,onChange:N=>l({...a,samplingRate:parseInt(N.target.value)||1e3}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How often to read the sensor (100-10000ms)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Smoothing (samples)"}),r.jsx("input",{type:"number",min:"1",max:"10",value:a.smoothing,onChange:N=>l({...a,smoothing:parseInt(N.target.value)||1}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of samples to average (1-10)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Trigger Effect (optional)"}),r.jsx("input",{type:"text",value:a.triggerEffect||"",onChange:N=>l({...a,triggerEffect:N.target.value}),placeholder:"Effect ID",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Effect to trigger on threshold breach"})]})]}),y==="thresholds"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Critical Minimum"}),r.jsx("input",{type:"number",step:"0.1",value:a.threshold.min??"",onChange:N=>l({...a,threshold:{...a.threshold,min:N.target.value?parseFloat(N.target.value):void 0}}),placeholder:"Leave empty to disable",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Warning Minimum"}),r.jsx("input",{type:"number",step:"0.1",value:a.threshold.warningMin??"",onChange:N=>l({...a,threshold:{...a.threshold,warningMin:N.target.value?parseFloat(N.target.value):void 0}}),placeholder:"Leave empty to disable",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Warning Maximum"}),r.jsx("input",{type:"number",step:"0.1",value:a.threshold.warningMax??"",onChange:N=>l({...a,threshold:{...a.threshold,warningMax:N.target.value?parseFloat(N.target.value):void 0}}),placeholder:"Leave empty to disable",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Critical Maximum"}),r.jsx("input",{type:"number",step:"0.1",value:a.threshold.max??"",onChange:N=>l({...a,threshold:{...a.threshold,max:N.target.value?parseFloat(N.target.value):void 0}}),placeholder:"Leave empty to disable",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"p-4 bg-blue-500/10 rounded-lg border border-blue-500/20",children:r.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Note:"})," Values outside critical thresholds trigger critical alerts. Values outside warning thresholds trigger warning alerts."]})})]}),y==="calibration"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Current Offset"}),r.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:a.calibrationOffset.toFixed(3)})]}),e.lastCalibrated&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Last Calibrated"}),r.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:new Date(e.lastCalibrated).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Reference Value"}),r.jsx("input",{type:"number",step:"0.1",value:i,onChange:N=>c(N.target.value),placeholder:"Enter known accurate value",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a known accurate value to calibrate against"})]}),r.jsx("button",{onClick:b,disabled:!i||f||!s,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Calibrating...":"Calibrate Sensor"}),r.jsx("div",{className:"p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:r.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:[r.jsx("strong",{children:"Warning:"})," Calibration adjusts the sensor offset to match the reference value. Ensure you have an accurate reference measurement before calibrating."]})})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-800 flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:k,disabled:o,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":"Save Changes"})]})]})})}function hp({sensors:e,pairedDevices:t=[],rule:n,onClose:s,onSave:a}){var V,Z,K,ie,E,_;const[l,i]=m.useState((n==null?void 0:n.name)||""),[c,o]=m.useState((n==null?void 0:n.sensorId)||((V=e[0])==null?void 0:V.id)||""),[u,f]=m.useState((n==null?void 0:n.condition)||"above"),[g,y]=m.useState(((Z=n==null?void 0:n.value1)==null?void 0:Z.toString())||""),[v,k]=m.useState(((K=n==null?void 0:n.value2)==null?void 0:K.toString())||""),[b,N]=m.useState((n==null?void 0:n.action)||"send_alert"),[p,h]=m.useState((n==null?void 0:n.actionData)||""),[w,C]=m.useState((n==null?void 0:n.targetDeviceId)||""),[M,O]=m.useState((n==null?void 0:n.enabled)??!0),[P,D]=m.useState(!1),B=e.find(F=>F.id===c),z=u==="between"||u==="outside",X=b.includes("remote"),U=async()=>{if(!(!l||!c||!g||!p)&&!(z&&!v)&&!(X&&!w)){D(!0);try{const F={...(n==null?void 0:n.id)&&{id:n.id},name:l,sensorId:c,condition:u,value1:parseFloat(g),...z&&{value2:parseFloat(v)},action:b,actionData:p,...X&&{targetDeviceId:w},enabled:M};await a(F),s()}catch(F){console.error("Failed to save automation rule:",F)}finally{D(!1)}}},q=()=>!(!l||!c||!g||!p||z&&!v||X&&!w);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Automation Rule":"Create Automation Rule"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Automatically trigger actions based on sensor values"})]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Rule Name"}),r.jsx("input",{type:"text",value:l,onChange:F=>i(F.target.value),placeholder:"e.g., High Temperature Alert",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Enable Rule"}),r.jsx(Xe,{id:"rule-enabled",checked:M,onChange:O,label:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Sensor"}),r.jsx("select",{value:c,onChange:F=>o(F.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.map(F=>r.jsxs("option",{value:F.id,children:[F.name," (",F.currentReading.value.toFixed(1),F.currentReading.unit,")"]},F.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Condition"}),r.jsxs("select",{value:u,onChange:F=>f(F.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"above",children:"Above threshold"}),r.jsx("option",{value:"below",children:"Below threshold"}),r.jsx("option",{value:"between",children:"Between values"}),r.jsx("option",{value:"outside",children:"Outside range"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:z?"Value 1":"Threshold Value"}),r.jsx("input",{type:"number",step:"0.1",value:g,onChange:F=>y(F.target.value),placeholder:(B==null?void 0:B.currentReading.unit)||"Value",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),z&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Value 2"}),r.jsx("input",{type:"number",step:"0.1",value:v,onChange:F=>k(F.target.value),placeholder:(B==null?void 0:B.currentReading.unit)||"Value",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Action"}),r.jsxs("select",{value:b,onChange:F=>{N(F.target.value),F.target.value.includes("remote")||C("")},className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"send_alert",children:"Send Alert"}),r.jsx("option",{value:"trigger_effect",children:"Trigger Effect (Local)"}),r.jsx("option",{value:"trigger_scene",children:"Trigger Scene (Local)"}),r.jsx("option",{value:"trigger_sequence",children:"Trigger Sequence (Local)"}),t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"trigger_remote_effect",children:"Trigger Effect (Remote)"}),r.jsx("option",{value:"trigger_remote_scene",children:"Trigger Scene (Remote)"}),r.jsx("option",{value:"trigger_remote_sequence",children:"Trigger Sequence (Remote)"})]})]})]}),X&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Target Device"}),r.jsxs("select",{value:w,onChange:F=>C(F.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select device..."}),t.map(F=>r.jsxs("option",{value:F.mac,children:[F.name," (",F.ipAddress,")"]},F.mac))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the JBoard device to trigger the action on"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:b==="send_alert"?"Alert Message":b.includes("effect")?"Effect ID":b.includes("sequence")?"Sequence ID":"Scene ID"}),r.jsx("input",{type:"text",value:p,onChange:F=>h(F.target.value),placeholder:b==="send_alert"?"e.g., Temperature is too high!":b.includes("effect")?"e.g., rainbow":b.includes("sequence")?"e.g., seq-1":"e.g., scene-1",className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b==="send_alert"?"Message to display when condition is met":b.includes("effect")?`ID of the effect to trigger${X?" on the remote device":""}`:b.includes("sequence")?`ID of the sequence to play${X?" on the remote device":""}`:`ID of the scene to activate${X?" on the remote device":""}`})]}),r.jsx("div",{className:"p-4 bg-blue-500/10 rounded-lg border border-blue-500/20",children:r.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Preview:"})," When ",(B==null?void 0:B.name)||"sensor"," is"," ",u==="above"&&`above ${g}${(B==null?void 0:B.currentReading.unit)||""}`,u==="below"&&`below ${g}${(B==null?void 0:B.currentReading.unit)||""}`,u==="between"&&`between ${g} and ${v}${(B==null?void 0:B.currentReading.unit)||""}`,u==="outside"&&`outside ${g}-${v}${(B==null?void 0:B.currentReading.unit)||""}`,", ",b==="send_alert"&&`send alert: "${p}"`,b==="trigger_effect"&&`trigger effect: ${p}`,b==="trigger_scene"&&`activate scene: ${p}`,b==="trigger_sequence"&&`play sequence: ${p}`,b==="trigger_remote_effect"&&`trigger effect "${p}" on ${((ie=t.find(F=>F.mac===w))==null?void 0:ie.name)||"remote device"}`,b==="trigger_remote_scene"&&`activate scene "${p}" on ${((E=t.find(F=>F.mac===w))==null?void 0:E.name)||"remote device"}`,b==="trigger_remote_sequence"&&`play sequence "${p}" on ${((_=t.find(F=>F.mac===w))==null?void 0:_.name)||"remote device"}`]})})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-800 flex gap-3",children:[r.jsx("button",{onClick:s,className:"flex-1 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:U,disabled:!q()||P,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Saving...":n?"Update Rule":"Create Rule"})]})]})})}function pp(){const[e,t]=m.useState([]),[n,s]=m.useState([]),[a,l]=m.useState(!0),[i,c]=m.useState(null),[o,u]=m.useState(!1),[f,g]=m.useState(!1),[y,v]=m.useState(null),[k,b]=m.useState(null),[N,p]=m.useState("1h"),[h,w]=m.useState([]),[C,M]=m.useState(!1),[O,P]=m.useState(),[D,B]=m.useState("sensors"),[z,X]=m.useState([]),[U,q]=m.useState([]),[V,Z]=m.useState([]),[K,ie]=m.useState(null),E=async()=>{try{const[d,x,S,H,le,Pe,yt]=await Promise.all([he.getSensors(),he.getAlerts(),he.getAutomationRules(),he.getRemoteSensors(),wt.getPeers(),he.getDataLogs(),he.getLoggingConfig()]);t(d),s(x),w(S),X(H),q(le),Z(Pe),ie(yt)}catch(d){console.error("Failed to load sensor data:",d)}finally{l(!1)}};m.useEffect(()=>{E();const d=setInterval(E,2e3);return()=>clearInterval(d)},[]);const _=async(d,x)=>{try{await he.updateSensorConfig(d,{enabled:x}),t(e.map(S=>S.id===d?{...S,config:{...S.config,enabled:x}}:S))}catch(S){console.error("Failed to update sensor:",S)}},F=async d=>{c(d),g(!0);const x=Date.now(),S=N==="1h"?36e5:N==="6h"?216e5:864e5,H=x-S;try{const[le,Pe]=await Promise.all([he.getSensorHistory(d.id,H,x),he.getSensorStats(d.id,S)]);v(le),b(Pe)}catch(le){console.error("Failed to load sensor history:",le)}},te=d=>{c(d),u(!0)},R=async d=>{if(i)try{await he.updateSensorConfig(i.id,d),t(e.map(x=>x.id===i.id?{...x,config:{...x.config,...d}}:x))}catch(x){throw console.error("Failed to save configuration:",x),x}},j=async d=>{if(i)try{const x=await he.calibrateSensor(i.id,d);t(e.map(S=>S.id===i.id?{...S,config:{...S.config,calibrationOffset:x.offset},lastCalibrated:x.timestamp}:S))}catch(x){throw console.error("Failed to calibrate sensor:",x),x}},W=()=>{P(void 0),M(!0)},Q=d=>{P(d),M(!0)},A=async d=>{try{if("id"in d)await he.updateAutomationRule(d.id,d),w(h.map(x=>x.id===d.id?d:x));else{const x=await he.createAutomationRule(d);w([...h,x])}}catch(x){throw console.error("Failed to save automation rule:",x),x}},Y=async d=>{if(confirm("Are you sure you want to delete this automation rule?"))try{await he.deleteAutomationRule(d),w(h.filter(x=>x.id!==d))}catch(x){console.error("Failed to delete automation rule:",x)}},ee=async(d,x)=>{try{await he.updateAutomationRule(d,{enabled:x}),w(h.map(S=>S.id===d?{...S,enabled:x}:S))}catch(S){console.error("Failed to toggle automation rule:",S)}},ve=async d=>{try{await he.acknowledgeAlert(d),s(n.filter(x=>x.id!==d))}catch(x){console.error("Failed to acknowledge alert:",x)}},Me=async()=>{try{await he.clearAlerts(),s([])}catch(d){console.error("Failed to clear alerts:",d)}},rt=async()=>{try{const d=await he.exportData("csv"),x=URL.createObjectURL(d),S=document.createElement("a");S.href=x,S.download=`sensor-data-${Date.now()}.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(x)}catch(d){console.error("Failed to export data:",d)}},Oe=d=>{switch(d){case"active":return"bg-green-500";case"idle":return"bg-gray-500";case"error":return"bg-red-500";case"disabled":return"bg-gray-400";case"calibrating":return"bg-blue-500";default:return"bg-gray-500"}},Ye=d=>{switch(d){case"critical":return"bg-red-500/10 border-red-500 text-red-600 dark:text-red-400";case"warning":return"bg-yellow-500/10 border-yellow-500 text-yellow-600 dark:text-yellow-400";case"info":return"bg-blue-500/10 border-blue-500 text-blue-600 dark:text-blue-400";default:return"bg-gray-500/10 border-gray-500 text-gray-600 dark:text-gray-400"}},ke=d=>{const{value:x}=d.currentReading,{threshold:S}=d.config;return!S.warningMin&&!S.warningMax?!1:!!(S.warningMin&&x<S.warningMin||S.warningMax&&x>S.warningMax)},De=d=>{const{value:x}=d.currentReading,{threshold:S}=d.config;return!S.min&&!S.max?!1:!!(S.min&&x<S.min||S.max&&x>S.max)},Ie=d=>De(d)?r.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400",children:[r.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse"}),"Critical"]}):ke(d)?r.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600 dark:text-yellow-400",children:[r.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-500"}),"Warning"]}):r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[r.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"}),"Normal"]}),_e=d=>({temperature:"",humidity:"",pressure:"",light:"",sound:"",motion:"",proximity:"",air_quality:"",voltage:"",current:"",custom:""})[d]||"";return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading sensors..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Sensors"}),r.jsx("p",{className:"text-gray-500",children:"Monitor environmental sensors and configure alerts"})]}),r.jsx("button",{onClick:rt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Export Data"})]}),r.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-800 overflow-x-auto",children:[r.jsxs("button",{onClick:()=>B("sensors"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${D==="sensors"?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Sensors (",e.length,")"]}),r.jsxs("button",{onClick:()=>B("automation"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${D==="automation"?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Automation (",h.length,")"]}),r.jsxs("button",{onClick:()=>B("remote"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${D==="remote"?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Remote (",z.length,")"]}),r.jsx("button",{onClick:()=>B("logging"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${D==="logging"?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Data Logging"})]})]}),n.length>0&&r.jsxs("div",{className:"mb-6 space-y-2",children:[n.map(d=>r.jsx("div",{className:`rounded-lg border p-4 ${Ye(d.severity)}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-sm uppercase",children:d.severity}),r.jsx("span",{className:"text-sm",children:""}),r.jsx("span",{className:"text-sm",children:d.sensorName})]}),r.jsx("p",{className:"text-sm",children:d.message}),r.jsx("p",{className:"text-xs mt-1 opacity-75",children:new Date(d.timestamp).toLocaleString()})]}),r.jsx("button",{onClick:()=>ve(d.id),className:"ml-4 text-xs px-3 py-1 rounded hover:bg-black/10 dark:hover:bg-white/10 transition-colors",children:"Dismiss"})]})},d.id)),n.length>1&&r.jsx("button",{onClick:Me,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear all alerts"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-6",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Sensors"}),r.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Active"}),r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.filter(d=>d.config.enabled&&d.currentReading.status==="active").length})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Active Alerts"}),r.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:n.length})]})]}),D==="sensors"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:e.map(d=>r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-5 bg-white/60 dark:bg-gray-950/60 hover:border-blue-500/50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:_e(d.type)}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:d.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("div",{className:`h-2 w-2 rounded-full ${Oe(d.currentReading.status)}`}),r.jsx("span",{className:"text-xs text-gray-500 capitalize",children:d.currentReading.status})]})]})]}),r.jsx(Xe,{id:`sensor-${d.id}`,checked:d.config.enabled,onChange:x=>_(d.id,x),label:""})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"text-4xl font-bold mb-2",children:[d.currentReading.value.toFixed(1),r.jsx("span",{className:"text-lg text-gray-500 ml-2",children:d.currentReading.unit})]}),Ie(d)]}),d.config.threshold&&r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Threshold Range"}),r.jsxs("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:[d.config.threshold.warningMin!==void 0&&d.config.threshold.warningMax!==void 0&&r.jsx("div",{className:"absolute h-full bg-yellow-500/30",style:{left:`${(d.config.threshold.warningMin-(d.config.threshold.min||0))/((d.config.threshold.max||100)-(d.config.threshold.min||0))*100}%`,right:`${100-(d.config.threshold.warningMax-(d.config.threshold.min||0))/((d.config.threshold.max||100)-(d.config.threshold.min||0))*100}%`}}),r.jsx("div",{className:"absolute h-full bg-green-500",style:{left:`${d.config.threshold.min?(d.config.threshold.min-(d.config.threshold.min||0))/((d.config.threshold.max||100)-(d.config.threshold.min||0))*100:0}%`,right:`${d.config.threshold.max?100-(d.config.threshold.max-(d.config.threshold.min||0))/((d.config.threshold.max||100)-(d.config.threshold.min||0))*100:0}%`}}),r.jsx("div",{className:"absolute top-0 w-1 h-full bg-white border border-gray-800",style:{left:`${(d.currentReading.value-(d.config.threshold.min||0))/((d.config.threshold.max||100)-(d.config.threshold.min||0))*100}%`}})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:d.config.threshold.min||0}),r.jsx("span",{children:d.config.threshold.max||100})]})]}),r.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[d.pin!==void 0&&r.jsxs("div",{children:["Pin: GPIO ",d.pin]}),r.jsxs("div",{children:["Sampling: ",d.config.samplingRate,"ms"]}),d.lastCalibrated&&r.jsxs("div",{children:["Last calibrated: ",new Date(d.lastCalibrated).toLocaleDateString()]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>F(d),className:"py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-500/10 rounded-lg transition-colors",children:"History"}),r.jsx("button",{onClick:()=>te(d),className:"py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Configure"})]})]},d.id))}),e.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Sensors Available"}),r.jsx("p",{className:"text-gray-500",children:"No sensors are configured on this device"})]})]}),D==="automation"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-6",children:r.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"+ Create Automation Rule"})}),r.jsx("div",{className:"space-y-4",children:h.map(d=>{const x=e.find(S=>S.id===d.sensorId);return r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-5 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"font-medium",children:d.name}),r.jsx(Xe,{id:`rule-${d.id}`,checked:d.enabled,onChange:S=>ee(d.id,S),label:""})]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(x==null?void 0:x.name)||"Unknown Sensor","  ",d.condition," ",d.value1,d.value2!==void 0&&` - ${d.value2}`,x==null?void 0:x.currentReading.unit]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>Q(d),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Edit rule",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>Y(d.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete rule",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium",children:"Condition:"}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[d.condition==="above"&&`Above ${d.value1}`,d.condition==="below"&&`Below ${d.value1}`,d.condition==="between"&&`Between ${d.value1} and ${d.value2}`,d.condition==="outside"&&`Outside ${d.value1}-${d.value2}`,x==null?void 0:x.currentReading.unit]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Action:"}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[d.action==="send_alert"&&`Send alert: "${d.actionData}"`,d.action==="trigger_effect"&&`Trigger effect: ${d.actionData}`,d.action==="trigger_scene"&&`Activate scene: ${d.actionData}`]})]})]})]},d.id)})}),h.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Automation Rules"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create rules to automatically trigger actions based on sensor values"}),r.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Create Your First Rule"})]})]}),D==="remote"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Monitor sensors from paired JBoard devices"}),r.jsx("button",{onClick:()=>he.refreshRemoteSensors(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Refresh All"})]}),z.length>0?r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:z.map(d=>r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-5 bg-white/60 dark:bg-gray-950/60 hover:border-blue-500/50 transition-colors",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-2xl",children:_e(d.type)}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:d.name}),r.jsx("p",{className:"text-xs text-gray-500",children:d.deviceName})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(No,{rssi:d.rssi,size:"sm"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[Math.floor((Date.now()-d.lastSync)/1e3),"s ago"]})]})]})}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"text-4xl font-bold mb-2",children:[d.currentReading.value.toFixed(1),r.jsx("span",{className:"text-lg text-gray-500 ml-2",children:d.currentReading.unit})]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx("div",{className:`h-2 w-2 rounded-full ${Oe(d.currentReading.status)}`}),r.jsx("span",{className:"capitalize",children:d.currentReading.status})]})]}),r.jsx("button",{onClick:()=>he.refreshRemoteSensors(d.deviceId),className:"w-full py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Refresh"})]},`${d.deviceId}-${d.id}`))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Remote Sensors"}),r.jsx("p",{className:"text-gray-500",children:"Pair JBoard devices with sensors to monitor them remotely"})]})]}),D==="logging"&&K&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-6 space-y-4",children:r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-5 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-medium",children:"Logging Configuration"}),r.jsx(Xe,{id:"logging-enabled",checked:K.enabled,onChange:async d=>{await he.updateLoggingConfig({enabled:d}),ie({...K,enabled:d})},label:""})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500 mb-1",children:"Interval"}),r.jsxs("div",{className:"font-medium",children:[K.interval,"s"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500 mb-1",children:"Format"}),r.jsx("div",{className:"font-medium uppercase",children:K.format})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500 mb-1",children:"Max File Size"}),r.jsxs("div",{className:"font-medium",children:[K.maxFileSize," MB"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-500 mb-1",children:"Auto Rotate"}),r.jsx("div",{className:"font-medium",children:K.autoRotate?"Yes":"No"})]})]})]})}),r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Data Logs"}),r.jsx("button",{onClick:()=>E(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Refresh"})]}),V.length>0?r.jsx("div",{className:"space-y-3",children:V.map(d=>{const x=e.find(S=>S.id===d.sensorId);return r.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h4",{className:"font-medium",children:(x==null?void 0:x.name)||d.sensorId}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${d.status==="active"?"bg-green-500/10 text-green-600 dark:text-green-400":d.status==="stopped"?"bg-gray-500/10 text-gray-600 dark:text-gray-400":"bg-red-500/10 text-red-600 dark:text-red-400"}`,children:d.status})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm text-gray-500",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:d.recordCount})," records"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:d.fileSize})," MB"]}),r.jsx("div",{children:d.filename}),r.jsxs("div",{children:[new Date(d.startTime).toLocaleDateString()," -"," ",d.endTime?new Date(d.endTime).toLocaleDateString():"ongoing"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("button",{onClick:async()=>{const S=await he.downloadLog(d.id),H=URL.createObjectURL(S),le=document.createElement("a");le.href=H,le.download=d.filename,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(H)},className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Download",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),d.status!=="active"&&r.jsx("button",{onClick:async()=>{confirm(`Delete log ${d.filename}?`)&&(await he.deleteLog(d.id),Z(V.filter(S=>S.id!==d.id)))},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},d.id)})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Data Logs"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Enable logging to start recording sensor data to SD card"})]})]}),C&&r.jsx(hp,{sensors:e,pairedDevices:U,rule:O,onClose:()=>{M(!1),P(void 0)},onSave:A}),o&&i&&r.jsx(gp,{sensor:i,onClose:()=>{u(!1),c(null)},onSave:R,onCalibrate:j}),f&&i&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold",children:[i.name," History"]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.type,"  Current: ",i.currentReading.value.toFixed(1),i.currentReading.unit]})]}),r.jsx("button",{onClick:()=>{g(!1),c(null),v(null),b(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 flex gap-2",children:[{value:"1h",label:"1 Hour"},{value:"6h",label:"6 Hours"},{value:"24h",label:"24 Hours"}].map(d=>r.jsx("button",{onClick:()=>{p(d.value),F(i)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N===d.value?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:d.label},d.value))}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[k&&r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current"}),r.jsxs("div",{className:"text-lg font-bold",children:[k.current.toFixed(1),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:i.currentReading.unit})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Average"}),r.jsxs("div",{className:"text-lg font-bold",children:[k.avg.toFixed(1),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:i.currentReading.unit})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Minimum"}),r.jsxs("div",{className:"text-lg font-bold",children:[k.min.toFixed(1),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:i.currentReading.unit})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Maximum"}),r.jsxs("div",{className:"text-lg font-bold",children:[k.max.toFixed(1),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:i.currentReading.unit})]})]})]}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6",children:y?r.jsx("div",{className:"pl-12",children:r.jsx(fp,{data:y.data,width:700,height:300,color:"#3b82f6",showGrid:!0,showAxes:!0,unit:i.currentReading.unit})}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading history..."})})})]})]})})]})}var L0=(e=>(e.JBOARD_2="2-output",e.JBOARD_4="4-output",e.JBOARD_8="8-output",e.JBOARD_16="16-output",e))(L0||{}),on=(e=>(e.WS2811="WS2811",e.WS2812="WS2812",e.WS2812B="WS2812B",e.SK6812="SK6812",e.SK6812_RGBW="SK6812_RGBW",e.APA102="APA102",e.APA106="APA106",e))(on||{}),cn=(e=>(e.RGB="RGB",e.RBG="RBG",e.GRB="GRB",e.GBR="GBR",e.BRG="BRG",e.BGR="BGR",e.RGBW="RGBW",e.GRBW="GRBW",e))(cn||{});const Ci={WS2811:{voltage:12,currentPerPixel:60,dataRate:800,colorOrder:"RGB",hasWhiteChannel:!1,notes:"External driver IC, typically 12V"},WS2812:{voltage:5,currentPerPixel:60,dataRate:800,colorOrder:"GRB",hasWhiteChannel:!1,notes:"Integrated driver, 5V"},WS2812B:{voltage:5,currentPerPixel:60,dataRate:800,colorOrder:"GRB",hasWhiteChannel:!1,notes:"Improved WS2812, 5V"},SK6812:{voltage:5,currentPerPixel:60,dataRate:800,colorOrder:"GRB",hasWhiteChannel:!1,notes:"WS2812 compatible, 5V"},SK6812_RGBW:{voltage:5,currentPerPixel:80,dataRate:800,colorOrder:"GRBW",hasWhiteChannel:!0,notes:"Includes dedicated white channel"},APA102:{voltage:5,currentPerPixel:60,dataRate:1e3,colorOrder:"BGR",hasWhiteChannel:!1,notes:"SPI-based, requires separate clock line"},APA106:{voltage:5,currentPerPixel:60,dataRate:800,colorOrder:"RGB",hasWhiteChannel:!1,notes:"Similar to WS2812, 5V"}};function So(e){const n=Ci[e.pixelType].currentPerPixel*.5;return e.pixelCount*n}function xp(e){let t=0;return e.outputs.forEach(s=>{s.enabled&&(t+=So(s))}),t/1e3*5}function yp(e){const t=[],n=xp(e);return n>e.powerLimit*.9?t.push({level:"critical",message:`Total power draw (${n.toFixed(1)}W) exceeds 90% of limit (${e.powerLimit}W)`}):n>e.powerLimit*.75&&t.push({level:"warning",message:`Total power draw (${n.toFixed(1)}W) exceeds 75% of limit (${e.powerLimit}W)`}),e.outputs.forEach(s=>{const a=So(s);a>s.maxCurrent&&t.push({level:"warning",message:`Output ${s.number} current (${a.toFixed(0)}mA) exceeds limit (${s.maxCurrent}mA)`,outputId:s.id})}),t}const vp={variant:L0.JBOARD_4,outputCount:4,maxPixelsPerOutput:1e3,availableGPIOs:[13,12,14,27],powerRating:60,firmwareVersion:"1.0.0"},R0={outputs:[{id:"1",number:1,name:"Output 1",enabled:!0,gpio:13,pixelCount:150,pixelType:on.WS2812B,colorOrder:cn.GRB,maxCurrent:3e3,voltage:5,lastUpdate:Date.now(),status:"active"},{id:"2",number:2,name:"Output 2",enabled:!0,gpio:12,pixelCount:100,pixelType:on.WS2812B,colorOrder:cn.GRB,maxCurrent:3e3,voltage:5,lastUpdate:Date.now(),status:"active"},{id:"3",number:3,name:"Output 3",enabled:!1,gpio:14,pixelCount:50,pixelType:on.WS2812B,colorOrder:cn.GRB,maxCurrent:3e3,voltage:5,lastUpdate:Date.now(),status:"inactive"},{id:"4",number:4,name:"Output 4",enabled:!1,gpio:27,pixelCount:50,pixelType:on.WS2812B,colorOrder:cn.GRB,maxCurrent:3e3,voltage:5,lastUpdate:Date.now(),status:"inactive"}],globalBrightness:255,powerLimit:60,totalPixels:350,estimatedPower:10.5};async function bp(){try{return await I.fetch("/api/hardware/info")}catch{return console.log("Mock: Using JBOARD-4 configuration"),vp}}async function wp(){try{return await I.fetch("/api/pixels/config")}catch{return console.log("Mock: Using default pixel configuration"),R0}}async function Xc(e,t){try{return await I.fetch(`/api/pixels/outputs/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch{console.log("Mock: Output update");const n=R0.outputs.find(s=>s.id===e);if(n)return{...n,...t,lastUpdate:Date.now()};throw new Error("Output not found")}}async function Zc(){try{return await I.fetch("/api/pixels/all-off",{method:"POST"})}catch{return console.log("Mock: All outputs off"),{success:!0}}}function jp(){const[e,t]=m.useState(null),[n,s]=m.useState(null),[a,l]=m.useState(!0),[i,c]=m.useState(null),[o,u]=m.useState(null),[f,g]=m.useState([]),[y,v]=m.useState(null),[k,b]=m.useState({});m.useEffect(()=>{N(),p()},[]);const N=async()=>{try{l(!0);const[U,q]=await Promise.all([bp(),wp()]);t(U),s(q)}catch(U){console.error("Failed to load pixel configuration:",U)}finally{l(!1)}},p=async()=>{try{const U=await mt.getEffects();if(g(U),U.length>0){const q=U[0];v(q);const V={};q.parameters.forEach(Z=>{V[Z.id]=Z.value}),b(V)}}catch(U){console.error("Failed to load effects:",U)}},h=U=>{const q=f.find(V=>V.id===U);if(q){v(q);const V={};q.parameters.forEach(Z=>{V[Z.id]=Z.value}),b(V)}},w=(U,q)=>{b(V=>({...V,[U]:q}))},C=async(U,q)=>{if(n)try{const V=await Xc(U,{enabled:q});s({...n,outputs:n.outputs.map(Z=>Z.id===U?{...Z,...V}:Z)})}catch(V){console.error("Failed to update output:",V)}},M=async(U,q)=>{if(n)try{const V=await Xc(U,q);s({...n,outputs:n.outputs.map(Z=>Z.id===U?{...Z,...V}:Z)}),c(null)}catch(V){console.error("Failed to update output:",V)}},O=async U=>{if(y)try{await mt.applyEffect(y.id,{...k,outputId:U}),u(U)}catch(q){console.error("Failed to start test:",q)}},P=async U=>{try{await Zc(),u(null)}catch(q){console.error("Failed to stop test:",q)}},D=async()=>{if(y)try{await mt.applyEffect(y.id,k),u("all")}catch(U){console.error("Failed to test all outputs:",U)}},B=async()=>{try{await Zc(),u(null)}catch(U){console.error("Failed to turn off outputs:",U)}};if(a||!e||!n)return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-800 rounded w-1/4"}),r.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-800 rounded"}),r.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-800 rounded"})]})});const z=yp(n),X=n.outputs.filter(U=>U.enabled).reduce((U,q)=>U+q.pixelCount,0);return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pixel Outputs"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure addressable LED pixel outputs"})]}),r.jsxs("div",{className:"card p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Board Information"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.variant,"  Firmware v",e.firmwareVersion]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-brand-600",children:e.outputCount}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Outputs"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pixels"}),r.jsx("div",{className:"text-lg font-semibold",children:X})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Max Per Output"}),r.jsx("div",{className:"text-lg font-semibold",children:e.maxPixelsPerOutput})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated Power"}),r.jsxs("div",{className:"text-lg font-semibold",children:[n.estimatedPower.toFixed(1),"W"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Power Limit"}),r.jsxs("div",{className:"text-lg font-semibold",children:[n.powerLimit,"W"]})]})]}),z.length>0&&r.jsx("div",{className:"space-y-2 pt-4 border-t border-gray-200 dark:border-gray-800",children:z.map((U,q)=>r.jsx("div",{className:`p-3 rounded text-sm ${U.level==="critical"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200"}`,children:U.message},q))})]}),r.jsxs("div",{className:"card p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Testing Tools"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Using Effects System"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Effect"}),r.jsx("select",{value:(y==null?void 0:y.id)||"",onChange:U=>h(U.target.value),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:f.map(U=>r.jsxs("option",{value:U.id,children:[U.icon," ",U.name]},U.id))}),y&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:y.description})]}),y&&y.parameters.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-2",children:y.parameters.map(U=>r.jsx(kp,{parameter:U,value:k[U.id],onChange:q=>w(U.id,q),colorCount:k.colorCount,sparkleColorCount:k.sparkleColorCount},U.id))}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx("button",{onClick:D,disabled:o==="all"||!y,className:"btn btn-primary",children:o==="all"?"Testing All...":"Test All Outputs"}),r.jsx("button",{onClick:B,className:"btn btn-secondary",children:"Turn All Off"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Output Configuration"}),n.outputs.map(U=>r.jsx(Np,{output:U,boardInfo:e,isEditing:i===U.id,isTesting:o===U.id||o==="all",onToggle:q=>C(U.id,q),onEdit:()=>c(U.id),onSave:q=>M(U.id,q),onCancel:()=>c(null),onTest:()=>O(U.id),onStopTest:()=>P(U.id)},U.id))]})]})}function kp({parameter:e,value:t,onChange:n,colorCount:s,sparkleColorCount:a}){var l;if(e.id.startsWith("color")&&s){const i=parseInt(e.id.replace("color",""));if(!isNaN(i)&&i>parseInt(s))return null}if(e.id.startsWith("sparkleColor")&&a){const i=parseInt(e.id.replace("sparkleColor",""));if(!isNaN(i)&&i>parseInt(a))return null}switch(e.type){case"color":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:e.name}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:t,onChange:i=>n(i.target.value),className:"h-10 w-20 rounded border border-gray-300 dark:border-gray-700"}),r.jsx("input",{type:"text",value:t,onChange:i=>n(i.target.value),className:"input flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg"})]})]});case"slider":return r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.name,": ",t,e.unit||""]}),r.jsx("input",{type:"range",min:e.min||0,max:e.max||100,step:e.step||1,value:t,onChange:i=>n(Number(i.target.value)),className:"w-full"})]});case"toggle":return r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Xe,{id:e.id,checked:t,onChange:n,label:e.name})});case"select":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:e.name}),r.jsx("select",{value:t,onChange:i=>n(i.target.value),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:(l=e.options)==null?void 0:l.map(i=>r.jsx("option",{value:i.value,children:i.label},i.value))})]});case"number":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:e.name}),r.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step||1,value:t,onChange:i=>n(Number(i.target.value)),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg"})]});default:return null}}function Np({output:e,boardInfo:t,isEditing:n,isTesting:s,onToggle:a,onEdit:l,onSave:i,onCancel:c,onTest:o,onStopTest:u}){const[f,g]=m.useState(e);m.useEffect(()=>{g(e)},[e]);const y=()=>{i({name:f.name,gpio:f.gpio,pixelCount:f.pixelCount,pixelType:f.pixelType,colorOrder:f.colorOrder,maxCurrent:f.maxCurrent,voltage:f.voltage})},v=So(e),k=Ci[e.pixelType];return n?r.jsxs("div",{className:"card p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"font-semibold",children:["Edit Output ",e.number]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:y,className:"btn btn-primary btn-sm",children:"Save"}),r.jsx("button",{onClick:c,className:"btn btn-secondary btn-sm",children:"Cancel"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Output Name"}),r.jsx("input",{type:"text",value:f.name,onChange:b=>g({...f,name:b.target.value}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"GPIO Pin"}),r.jsx("select",{value:f.gpio,onChange:b=>g({...f,gpio:Number(b.target.value)}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:t.availableGPIOs.map(b=>r.jsxs("option",{value:b,children:["GPIO ",b]},b))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pixel Count"}),r.jsx("input",{type:"number",min:"1",max:t.maxPixelsPerOutput,value:f.pixelCount,onChange:b=>g({...f,pixelCount:Number(b.target.value)}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pixel Type"}),r.jsx("select",{value:f.pixelType,onChange:b=>g({...f,pixelType:b.target.value}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:Object.values(on).map(b=>r.jsx("option",{value:b,children:b},b))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color Order"}),r.jsx("select",{value:f.colorOrder,onChange:b=>g({...f,colorOrder:b.target.value}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:Object.values(cn).map(b=>r.jsx("option",{value:b,children:b},b))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Supply Voltage"}),r.jsxs("select",{value:f.voltage,onChange:b=>g({...f,voltage:Number(b.target.value)}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg",children:[r.jsx("option",{value:5,children:"5V"}),r.jsx("option",{value:12,children:"12V"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Current (mA)"}),r.jsx("input",{type:"number",min:"100",max:"10000",step:"100",value:f.maxCurrent,onChange:b=>g({...f,maxCurrent:Number(b.target.value)}),className:"input w-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-lg"})]})]}),r.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-900 rounded text-sm",children:[r.jsx("div",{className:"font-medium mb-1",children:Ci[f.pixelType].notes}),r.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Typical: ",k.voltage,"V, ",k.currentPerPixel,"mA per pixel at full white"]})]})]}):r.jsxs("div",{className:"card p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-lg",children:["Output ",e.number,": ",e.name]}),r.jsx(Xe,{id:`output-${e.id}`,checked:e.enabled,onChange:a,label:e.enabled?"Enabled":"Disabled"}),e.enabled&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200",children:"Active"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Pixels"}),r.jsx("div",{className:"font-medium",children:e.pixelCount})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Type"}),r.jsx("div",{className:"font-medium",children:e.pixelType})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Color Order"}),r.jsx("div",{className:"font-medium",children:e.colorOrder})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"GPIO"}),r.jsxs("div",{className:"font-medium",children:["Pin ",e.gpio]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Voltage"}),r.jsxs("div",{className:"font-medium",children:[e.voltage,"V"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Est. Current"}),r.jsxs("div",{className:"font-medium",children:[v.toFixed(0),"mA"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Max Current"}),r.jsxs("div",{className:"font-medium",children:[e.maxCurrent,"mA"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),r.jsx("div",{className:"font-medium capitalize",children:e.status})]})]})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:l,className:"btn btn-secondary btn-sm",children:"Configure"}),e.enabled&&r.jsx(r.Fragment,{children:s?r.jsx("button",{onClick:u,className:"btn btn-secondary btn-sm",children:"Stop Test"}):r.jsx("button",{onClick:o,className:"btn btn-primary btn-sm",children:"Test"})})]})]})}function lr(e){if(!e)return!1;const t=e.split(".");return t.length!==4?!1:t.every(n=>{const s=parseInt(n,10);return s>=0&&s<=255&&n===s.toString()})}function Co(e){return e.length>0&&e.length<=32}function Eo(e){return e===""?!0:e.length>=8&&e.length<=63}function Sp(e){const t=[];return!e.ssid||e.ssid.trim()===""?t.push("SSID is required"):Co(e.ssid)||t.push("SSID must be 1-32 characters"),Eo(e.password)||t.push("Password must be 8-63 characters if provided"),e.dhcp||(!e.ip||e.ip.trim()===""?t.push("IP address is required when DHCP is disabled"):lr(e.ip)||t.push("Invalid IP address format"),!e.gateway||e.gateway.trim()===""?t.push("Gateway is required when DHCP is disabled"):lr(e.gateway)||t.push("Invalid gateway format"),!e.subnet||e.subnet.trim()===""?t.push("Subnet mask is required when DHCP is disabled"):lr(e.subnet)||t.push("Invalid subnet mask format"),!e.dns||e.dns.trim()===""?t.push("DNS server is required when DHCP is disabled"):lr(e.dns)||t.push("Invalid DNS server format")),{valid:t.length===0,errors:t}}function Cp(e){const t=[];return!e.ssid||e.ssid.trim()===""?t.push("AP SSID is required"):Co(e.ssid)||t.push("AP SSID must be 1-32 characters"),Eo(e.password)||t.push("AP password must be 8-63 characters if provided"),(e.channel<0||e.channel>13)&&t.push("WiFi channel must be 0 (auto) or between 1 and 13"),(e.maxClients<0||e.maxClients>8)&&t.push("Max clients must be 0 (auto) or between 1 and 8"),{valid:t.length===0,errors:t}}function Ep(e){return!e||e.length===0||e.length>63||e.startsWith("-")||e.endsWith("-")?!1:/^[a-zA-Z0-9-]+$/.test(e)}function Pp(e){const t=[];return!e.hostname||e.hostname.trim()===""?t.push("Hostname is required"):Ep(e.hostname)||t.push("Hostname must be 1-63 characters, alphanumeric and hyphens only, cannot start/end with hyphen"),{valid:t.length===0,errors:t}}function Tp(e){const t=[];return!e.name||e.name.trim()===""?t.push("Profile name is required"):e.name.length>32&&t.push("Profile name must be 32 characters or less"),!e.ssid||e.ssid.trim()===""?t.push("SSID is required"):Co(e.ssid)||t.push("SSID must be 1-32 characters"),Eo(e.password)||t.push("Password must be 8-63 characters if provided"),e.dhcp||(!e.ip||e.ip.trim()===""?t.push("IP address is required when DHCP is disabled"):lr(e.ip)||t.push("Invalid IP address format"),!e.gateway||e.gateway.trim()===""?t.push("Gateway is required when DHCP is disabled"):lr(e.gateway)||t.push("Invalid gateway format"),!e.subnet||e.subnet.trim()===""?t.push("Subnet mask is required when DHCP is disabled"):lr(e.subnet)||t.push("Invalid subnet mask format"),!e.dns||e.dns.trim()===""?t.push("DNS server is required when DHCP is disabled"):lr(e.dns)||t.push("Invalid DNS server format")),{valid:t.length===0,errors:t}}function Dp(e){const t=[];return(e.maxAttempts<0||e.maxAttempts>100)&&t.push("Max attempts must be 0 (unlimited) or between 1 and 100"),(e.attemptInterval<5||e.attemptInterval>300)&&t.push("Attempt interval must be between 5 and 300 seconds"),{valid:t.length===0,errors:t}}function Fp(){const[e,t]=m.useState(!0),[n,s]=m.useState(null),[a,l]=m.useState(!1),[i,c]=m.useState(null),[o,u]=m.useState({ssid:"",password:"",ip:"",gateway:"",subnet:"",dns:"",dhcp:!0}),[f,g]=m.useState({ssid:"",password:"",ip:"",channel:0,hidden:!1,maxClients:0,keepActive:!1}),[y,v]=m.useState({hostname:"",mdnsEnabled:!0}),[k,b]=m.useState([]),[N,p]=m.useState(null),[h,w]=m.useState(!1),[C,M]=m.useState({enabled:!0,maxAttempts:5,attemptInterval:30,fallbackToAP:!0}),[O,P]=m.useState(null),[D,B]=m.useState(!1),[z,X]=m.useState(!1),[U,q]=m.useState(!1),[V,Z]=m.useState([]),[K,ie]=m.useState(!1),[E,_]=m.useState(null),[F,te]=m.useState(!1),[R,j]=m.useState(!1),[W,Q]=m.useState(!1),[A,Y]=m.useState(0),[ee,ve]=m.useState(!1);m.useEffect(()=>{Me()},[]);const Me=async()=>{t(!0);try{const[T,ne,Ne,We,jr,_t]=await Promise.all([Se.getWiFiConfig(),Se.getAPConfig(),Se.getNetworkStatus(),Se.getHostnameConfig(),Se.getWiFiProfiles(),Se.getAutoReconnectConfig()]);u(T),g(ne),c(Ne),v(We),b(Array.isArray(jr)?jr:[]),M(_t)}catch{P({type:"error",text:"Failed to load network configuration"})}finally{t(!1)}};m.useEffect(()=>{const ne=setInterval(async()=>{try{const Ne=await Se.getNetworkStatus();c(Ne),W&&Ne.wifiConnected&&(Y(We=>We+1),setTimeout(()=>{window.location.reload()},1e3))}catch(Ne){console.error("Failed to refresh network status:",Ne),W&&(Y(We=>We+1),A>=30&&(Q(!1),Y(0),P({type:"error",text:"Device did not reconnect. Please check your settings and refresh manually."})))}},W?2e3:1e4);return()=>clearInterval(ne)},[W,A]);const rt=async()=>{l(!0);try{const T=await Se.scanNetworks();Z(T),ie(!0)}catch{P({type:"error",text:"Failed to scan networks"})}finally{l(!1)}},Oe=T=>{u({...o,ssid:T}),ie(!1)},Ye=()=>{P(null);const T=Sp(o);if(!T.valid){P({type:"error",text:T.errors.join(", ")});return}B(!0)},ke=async()=>{B(!1),s("wifi"),P(null);try{const T=await Se.updateWiFiConfig(o);T.success?(P({type:"success",text:"WiFi configuration saved. Waiting for reconnection..."}),Q(!0),Y(0)):P({type:"error",text:T.message||"Failed to save WiFi configuration"})}catch{P({type:"error",text:"Failed to save WiFi configuration"})}finally{s(null)}},De=async()=>{X(!1),s("ap"),P(null);try{const T=await Se.updateAPConfig(f);T.success?P({type:"success",text:T.message||"Access Point configuration saved successfully"}):P({type:"error",text:T.message||"Failed to save AP configuration"})}catch{P({type:"error",text:"Failed to save AP configuration"})}finally{s(null)}},Ie=()=>{P(null);const T=Cp(f);if(!T.valid){P({type:"error",text:T.errors.join(", ")});return}X(!0)},_e=async()=>{P(null);const T=Pp(y);if(!T.valid){P({type:"error",text:T.errors.join(", ")});return}try{const ne=await Se.updateHostnameConfig(y);ne.success?P({type:"success",text:ne.message||"Hostname configuration saved successfully"}):P({type:"error",text:ne.message||"Failed to save hostname configuration"})}catch{P({type:"error",text:"Failed to save hostname configuration"})}},d=()=>{p({name:"",ssid:"",password:"",ip:"",gateway:"",subnet:"",dns:"8.8.8.8",dhcp:!0,priority:k.length+1}),w(!0)},x=T=>{p(T),w(!0)},S=async()=>{if(!N)return;P(null);const T=Tp(N);if(!T.valid){P({type:"error",text:T.errors.join(", ")});return}try{const ne={name:N.name,ssid:N.ssid,password:N.password,ip:N.ip,gateway:N.gateway,subnet:N.subnet,dns:N.dns,dhcp:N.dhcp,priority:N.priority},Ne=await Se.saveWiFiProfile(ne);if(Ne.success){P({type:"success",text:Ne.message||"WiFi profile saved successfully"}),w(!1),p(null);const We=await Se.getWiFiProfiles();b(Array.isArray(We)?We:[])}else P({type:"error",text:Ne.message||"Failed to save WiFi profile"})}catch{P({type:"error",text:"Failed to save WiFi profile"})}},H=T=>{_(T)},le=async T=>{try{const ne=await Se.deleteWiFiProfile(T);if(ne.success){P({type:"success",text:ne.message||"WiFi profile deleted successfully"});const Ne=await Se.getWiFiProfiles();b(Array.isArray(Ne)?Ne:[])}else P({type:"error",text:ne.message||"Failed to delete WiFi profile"})}catch{P({type:"error",text:"Failed to delete WiFi profile"})}},Pe=async T=>{try{const ne=await Se.connectToProfile(T);ne.success?P({type:"success",text:ne.message||"Connecting to WiFi profile..."}):P({type:"error",text:ne.message||"Failed to connect to WiFi profile"})}catch{P({type:"error",text:"Failed to connect to WiFi profile"})}},yt=async(T,ne)=>{if(ee){console.log("[handleMovePriority] Update already in progress, ignoring click");return}ve(!0),console.log(`[handleMovePriority] Called with id="${T}", direction="${ne}"`);const Ne=[...k].sort((nt,qr)=>nt.priority-qr.priority);console.log("[handleMovePriority] Sorted profiles:",Ne.map(nt=>({id:nt.id,priority:nt.priority})));const We=Ne.findIndex(nt=>nt.id===T);if(We===-1){console.error("[handleMovePriority] Profile not found:",T);return}const jr=Ne[We];console.log(`[handleMovePriority] Current profile at index ${We}, priority ${jr.priority}`);const _t=ne==="up"?We-1:We+1;if(console.log(`[handleMovePriority] Target index: ${_t}`),_t<0||_t>=Ne.length){console.warn(`[handleMovePriority] Cannot move ${ne}, already at boundary`);return}const Ns=Ne[_t];console.log(`[handleMovePriority] Swapping with profile at index ${_t}, priority ${Ns.priority}`);const Ss=Ns.priority;console.log(`[handleMovePriority] Setting profile "${T}" priority from ${jr.priority} to ${Ss}`);try{const nt=await Se.updateProfilePriority(T,Ss);if(nt.success){console.log("[handleMovePriority] Priority update successful, reloading profiles");const qr=await Se.getWiFiProfiles();b(Array.isArray(qr)?qr:[])}else console.error("[handleMovePriority] Priority update failed:",nt.message),P({type:"error",text:nt.message||"Failed to update profile priority"})}catch(nt){console.error("[handleMovePriority] Exception:",nt),P({type:"error",text:"Failed to update profile priority"})}finally{ve(!1)}},Ka=async()=>{P(null);const T=Dp(C);if(!T.valid){P({type:"error",text:T.errors.join(", ")});return}try{const ne=await Se.updateAutoReconnectConfig(C);ne.success?P({type:"success",text:ne.message||"Auto-reconnect settings saved successfully"}):P({type:"error",text:ne.message||"Failed to save auto-reconnect settings"})}catch{P({type:"error",text:"Failed to save auto-reconnect settings"})}};return e?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading network configuration..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Network"}),r.jsx("p",{className:"text-gray-500",children:"Configure network settings"})]}),i&&r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-sm font-medium mb-3",children:"Current Status"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"WiFi Connection"}),r.jsx(Fa,{connected:i.wifiConnected,size:"sm"})]}),i.wifiConnected&&r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"IP Address"}),r.jsx("span",{className:"font-mono",children:i.wifiIP})]}),r.jsx(No,{rssi:i.wifiRSSI,size:"sm"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Access Point"}),r.jsx(Fa,{connected:i.apActive,size:"sm"})]}),i.apActive&&r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Connected Clients"}),r.jsx("span",{className:"font-semibold",children:i.apClients})]})]})]})]}),O&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${O.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:O.text}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-medium",children:"WiFi Station"}),r.jsx("button",{onClick:rt,disabled:a,className:"text-xs px-3 py-1 rounded bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 disabled:opacity-50",children:a?"Scanning...":"Scan"})]}),K&&V.length>0&&r.jsxs("div",{className:"mb-4 p-2 rounded border border-gray-300 dark:border-gray-700 max-h-40 overflow-y-auto",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-gray-500",children:"Available Networks:"}),V.map((T,ne)=>r.jsxs("button",{onClick:()=>Oe(T.ssid),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-800 rounded flex items-center justify-between",children:[r.jsx("span",{children:T.ssid}),r.jsxs("span",{className:"text-xs text-gray-500",children:[T.rssi," dBm ",T.encryption!=="Open"&&""]})]},ne))]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"SSID"}),r.jsx("input",{type:"text",value:o.ssid,onChange:T=>u({...o,ssid:T.target.value}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:F?"text":"password",value:o.password,onChange:T=>u({...o,password:T.target.value}),placeholder:"Leave empty to keep current",className:"w-full px-3 py-2 pr-10 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"}),r.jsx("button",{type:"button",onClick:()=>te(!F),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:F?"Hide password":"Show password",children:F?r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),r.jsx(Xe,{id:"dhcp",checked:o.dhcp,onChange:T=>u({...o,dhcp:T}),label:"Use DHCP"}),!o.dhcp&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"IP Address"}),r.jsx("input",{type:"text",value:o.ip,onChange:T=>u({...o,ip:T.target.value}),placeholder:"192.168.1.100",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gateway"}),r.jsx("input",{type:"text",value:o.gateway,onChange:T=>u({...o,gateway:T.target.value}),placeholder:"192.168.1.1",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subnet Mask"}),r.jsx("input",{type:"text",value:o.subnet,onChange:T=>u({...o,subnet:T.target.value}),placeholder:"255.255.255.0",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"DNS Server"}),r.jsx("input",{type:"text",value:o.dns,onChange:T=>u({...o,dns:T.target.value}),placeholder:"8.8.8.8",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]})]}),r.jsx("button",{onClick:Ye,disabled:n==="wifi",className:"w-full px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50",children:n==="wifi"?"Saving...":"Save WiFi Settings"})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Access Point"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"pb-2 border-b border-gray-200 dark:border-gray-800",children:r.jsx(Xe,{id:"apAdvanced",checked:U,onChange:T=>q(T),label:"Advanced Settings"})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"SSID"}),r.jsx("input",{type:"text",value:f.ssid,onChange:T=>g({...f,ssid:T.target.value}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:R?"text":"password",value:f.password,onChange:T=>g({...f,password:T.target.value}),placeholder:"Leave empty to keep current",className:"w-full px-3 py-2 pr-10 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"}),r.jsx("button",{type:"button",onClick:()=>j(!R),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",title:R?"Hide password":"Show password",children:R?r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 characters"})]}),U&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Channel"}),r.jsxs("select",{value:f.channel,onChange:T=>g({...f,channel:parseInt(T.target.value)}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900",children:[r.jsx("option",{value:0,children:"Auto"}),[1,2,3,4,5,6,7,8,9,10,11,12,13].map(T=>r.jsxs("option",{value:T,children:["Channel ",T]},T))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto recommended"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Clients"}),r.jsxs("select",{value:f.maxClients,onChange:T=>g({...f,maxClients:parseInt(T.target.value)}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900",children:[r.jsx("option",{value:0,children:"Hardware Default (4)"}),[1,2,3,4,5,6,7,8].map(T=>r.jsxs("option",{value:T,children:[T," Client",T>1?"s":""]},T))]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-3 mt-3",children:[r.jsx(Xe,{id:"keepActive",checked:f.keepActive,onChange:T=>g({...f,keepActive:T}),label:"Keep AP Active when WiFi Connected"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1.5 ml-1",children:"When disabled, AP automatically turns off after WiFi connects (recommended for power saving)"})]})]}),r.jsx(Xe,{id:"hidden",checked:f.hidden,onChange:T=>g({...f,hidden:T}),label:"Hidden Network"}),r.jsx("button",{onClick:Ie,disabled:n==="ap",className:"w-full px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50",children:n==="ap"?"Saving...":"Save AP Settings"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"mDNS / Hostname"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hostname"}),r.jsx("input",{type:"text",value:y.hostname,onChange:T=>v({...y,hostname:T.target.value}),placeholder:"jsenseboard",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Will be accessible as ",r.jsxs("strong",{children:[y.hostname||"hostname",".local"]})]})]}),r.jsx(Xe,{id:"mdnsEnabled",checked:y.mdnsEnabled,onChange:T=>v({...y,mdnsEnabled:T}),label:"Enable mDNS"}),r.jsx("button",{onClick:_e,className:"w-full px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Save Hostname Settings"})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-medium",children:"WiFi Profiles"}),r.jsx("button",{onClick:d,className:"text-xs px-3 py-1 rounded bg-brand-600 text-white hover:bg-brand-700",children:"+ Add"})]}),r.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:k.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No WiFi profiles saved yet"}):k.sort((T,ne)=>T.priority-ne.priority).map((T,ne)=>r.jsx("div",{className:"p-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["#",T.priority]}),r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:T.name})]}),r.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["SSID: ",T.ssid]})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:()=>yt(T.id,"up"),disabled:ne===0||ee,className:"px-1.5 py-0.5 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-30",title:"Move up",children:""}),r.jsx("button",{onClick:()=>yt(T.id,"down"),disabled:ne===k.length-1||ee,className:"px-1.5 py-0.5 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-30",title:"Move down",children:""}),r.jsx("button",{onClick:()=>Pe(T.id),className:"px-2 py-0.5 text-xs rounded bg-blue-600 text-white hover:bg-blue-700",children:"Connect"}),r.jsx("button",{onClick:()=>x(T),className:"px-2 py-0.5 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Edit"}),r.jsx("button",{onClick:()=>H(T.id),className:"px-2 py-0.5 text-xs rounded bg-red-600 text-white hover:bg-red-700",children:"Del"})]})]})},T.id))})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Auto-Reconnect"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Xe,{id:"autoReconnectEnabled",checked:C.enabled,onChange:T=>M({...C,enabled:T}),label:"Enable Auto-Reconnect"}),C.enabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Attempts"}),r.jsxs("select",{value:C.maxAttempts,onChange:T=>M({...C,maxAttempts:parseInt(T.target.value)}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900",children:[r.jsx("option",{value:0,children:"Unlimited"}),[3,5,10,15,20,30,50,100].map(T=>r.jsxs("option",{value:T,children:[T," attempts"]},T))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:C.maxAttempts===0?"Will retry indefinitely":`Stop after ${C.maxAttempts} failed attempts`})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Retry Interval"}),r.jsx("select",{value:C.attemptInterval,onChange:T=>M({...C,attemptInterval:parseInt(T.target.value)}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900",children:[5,10,15,30,60,120,180,300].map(T=>r.jsx("option",{value:T,children:T<60?`${T} seconds`:`${T/60} minute${T/60>1?"s":""}`},T))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wait time between reconnection attempts"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-3 mt-3",children:[r.jsx(Xe,{id:"fallbackToAP",checked:C.fallbackToAP,onChange:T=>M({...C,fallbackToAP:T}),label:"Fallback to AP Mode"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1.5 ml-1",children:"Enable Access Point after max attempts reached"})]})]}),r.jsx("button",{onClick:Ka,className:"w-full px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Save Reconnect Settings"})]})]})]}),h&&N&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-6 max-w-md w-full my-8",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[N.id?"Edit":"Add"," WiFi Profile"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Profile Name"}),r.jsx("input",{type:"text",value:N.name||"",onChange:T=>p({...N,name:T.target.value}),placeholder:"Home Network",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"SSID"}),r.jsx("input",{type:"text",value:N.ssid||"",onChange:T=>p({...N,ssid:T.target.value}),className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),r.jsx("input",{type:"password",value:N.password||"",onChange:T=>p({...N,password:T.target.value}),placeholder:"Leave empty to keep current",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsx(Xe,{id:"profileDhcp",checked:N.dhcp??!0,onChange:T=>p({...N,dhcp:T}),label:"Use DHCP"}),!N.dhcp&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"IP Address"}),r.jsx("input",{type:"text",value:N.ip||"",onChange:T=>p({...N,ip:T.target.value}),placeholder:"192.168.1.100",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gateway"}),r.jsx("input",{type:"text",value:N.gateway||"",onChange:T=>p({...N,gateway:T.target.value}),placeholder:"192.168.1.1",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subnet Mask"}),r.jsx("input",{type:"text",value:N.subnet||"",onChange:T=>p({...N,subnet:T.target.value}),placeholder:"255.255.255.0",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"DNS Server"}),r.jsx("input",{type:"text",value:N.dns||"",onChange:T=>p({...N,dns:T.target.value}),placeholder:"8.8.8.8",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"})]})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{onClick:()=>{w(!1),p(null)},className:"flex-1 px-4 py-2 rounded bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Save Profile"})]})]})}),D&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm WiFi Changes"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Changing WiFi settings may disconnect you from the device. Make sure the new settings are correct."}),r.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm mb-4",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"SSID:"})," ",o.ssid]}),r.jsxs("div",{children:[r.jsx("strong",{children:"DHCP:"})," ",o.dhcp?"Enabled":"Disabled"]}),!o.dhcp&&r.jsxs("div",{children:[r.jsx("strong",{children:"IP:"})," ",o.ip]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>B(!1),className:"flex-1 px-4 py-2 rounded bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:ke,className:"flex-1 px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Apply Changes"})]})]})}),z&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm AP Changes"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This will update the Access Point configuration. Connected clients may be disconnected."}),r.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm mb-4",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"SSID:"})," ",f.ssid]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Channel:"})," ",f.channel===0?"Auto":f.channel]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Max Clients:"})," ",f.maxClients===0?"Hardware Default":f.maxClients]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Hidden:"})," ",f.hidden?"Yes":"No"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Keep Active:"})," ",f.keepActive?"Yes (Always on)":"No (Auto-disable)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>X(!1),className:"flex-1 px-4 py-2 rounded bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:De,className:"flex-1 px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Apply Changes"})]})]})}),E&&(()=>{const T=k.find(ne=>ne.id===E);return T?r.jsx(Nn,{title:"Delete WiFi Profile",message:`Delete WiFi profile "${T.name}"? This action cannot be undone.`,onConfirm:()=>{le(E),_(null)},onCancel:()=>_(null),dangerous:!0}):null})()]})}var G=(e=>(e.AUDIO="audio",e.FSEQ="fseq",e.CONFIG="config",e.LOG="log",e.BACKUP="backup",e.TEXT="text",e.OTHER="other",e))(G||{});const Ap=e=>{const t=e.toLowerCase().split(".").pop();return["mp3","wav","ogg","m4a","flac"].includes(t||"")?G.AUDIO:t==="fseq"?G.FSEQ:["json","cfg","conf","ini"].includes(t||"")?G.CONFIG:["log","txt"].includes(t||"")?t==="log"?G.LOG:G.TEXT:["zip","tar","gz","bak"].includes(t||"")?G.BACKUP:G.OTHER},Lp=[{filename:"christmas_carol.mp3",path:"/sd/audio/christmas_carol.mp3",size:3584e3,type:G.AUDIO,mimeType:"audio/mpeg",lastModified:new Date(Date.now()-864e5*2).toISOString()},{filename:"ambient_sound.wav",path:"/sd/audio/ambient_sound.wav",size:8192e3,type:G.AUDIO,mimeType:"audio/wav",lastModified:new Date(Date.now()-864e5*5).toISOString()},{filename:"holiday_lights.fseq",path:"/sd/sequences/holiday_lights.fseq",size:2048e3,type:G.FSEQ,mimeType:"application/octet-stream",lastModified:new Date(Date.now()-864e5*3).toISOString()},{filename:"winter_show.fseq",path:"/sd/sequences/winter_show.fseq",size:4096e3,type:G.FSEQ,mimeType:"application/octet-stream",lastModified:new Date(Date.now()-864e5*7).toISOString()},{filename:"board_config.json",path:"/sd/config/board_config.json",size:2048,type:G.CONFIG,mimeType:"application/json",lastModified:new Date(Date.now()-864e5*10).toISOString()},{filename:"network_settings.json",path:"/sd/config/network_settings.json",size:1024,type:G.CONFIG,mimeType:"application/json",lastModified:new Date(Date.now()-864e5*15).toISOString()},{filename:"system.log",path:"/sd/logs/system.log",size:16384,type:G.LOG,mimeType:"text/plain",lastModified:new Date(Date.now()-864e5).toISOString()},{filename:"error.log",path:"/sd/logs/error.log",size:4096,type:G.LOG,mimeType:"text/plain",lastModified:new Date(Date.now()-36e5).toISOString()},{filename:"backup_20250110.zip",path:"/sd/backups/backup_20250110.zip",size:524288,type:G.BACKUP,mimeType:"application/zip",lastModified:new Date(Date.now()-864e5*30).toISOString()},{filename:"readme.txt",path:"/sd/readme.txt",size:512,type:G.TEXT,mimeType:"text/plain",lastModified:new Date(Date.now()-864e5*60).toISOString()}],Rp={totalBytes:8*1024*1024*1024,usedBytes:1.2*1024*1024*1024,freeBytes:6.8*1024*1024*1024,breakdown:{audio:11776e3,fseq:6144e3,config:3072,log:20480,backup:524288,other:512}},Gr={async getFiles(e){try{let n=await I.fetch("/api/files/list",{method:"GET"});return e&&(n=n.filter(s=>s.type===e)),n}catch(t){console.warn("Failed to fetch files from API, using mock data:",t);let n=Lp;return e&&(n=n.filter(s=>s.type===e)),n}},async getStorageInfo(){try{return await I.fetch("/api/files/storage",{method:"GET"})}catch(e){return console.warn("Failed to fetch storage info from API, using mock data:",e),Rp}},async uploadFile(e,t){try{const n=new FormData;return n.append("file",e),t&&n.append("path",t),await I.fetch("/api/files/upload",{method:"POST",body:n,headers:{}})}catch(n){return console.warn("Failed to upload file via API, simulating success:",n),{success:!0,message:"File uploaded successfully (mock)",file:{filename:e.name,path:t||`/sd/files/${e.name}`,size:e.size,type:Ap(e.name),mimeType:e.type,lastModified:new Date().toISOString()}}}},async deleteFile(e){try{return await I.fetch("/api/files/delete",{method:"DELETE",body:JSON.stringify({path:e})})}catch(t){return console.warn("Failed to delete file via API, simulating success:",t),{success:!0,message:"File deleted successfully (mock)"}}},getDownloadUrl(e){const t=e.startsWith("/")?e.substring(1):e;return`/api/files/download/${encodeURIComponent(t)}`},async previewFile(e){try{return await I.fetch("/api/files/preview",{method:"POST",body:JSON.stringify({path:e})})}catch(t){console.warn("Failed to preview file via API, using mock data:",t);let n="";return e.includes(".json")?n=`{
  "version": "1.0",
  "ledCount": 300,
  "brightness": 80
}`:e.includes(".log")?n=`[2025-01-10 10:23:45] System started
[2025-01-10 10:23:46] WiFi connected
[2025-01-10 10:23:50] LED strip initialized`:n=`This is a mock preview of the file contents.
The actual file preview would be loaded from the ESP32.`,{success:!0,content:n}}}};function Mp(){const[e,t]=m.useState([]),[n,s]=m.useState(null),[a,l]=m.useState(!0),[i,c]=m.useState(!1),[o,u]=m.useState(null),[f,g]=m.useState("all"),[y,v]=m.useState(""),[k,b]=m.useState("name"),[N,p]=m.useState("asc"),[h,w]=m.useState(null),[C,M]=m.useState(""),[O,P]=m.useState(!1),[D,B]=m.useState(null);m.useEffect(()=>{z()},[]);const z=async()=>{try{l(!0),u(null);const[R,j]=await Promise.all([Gr.getFiles(),Gr.getStorageInfo()]);t(R),s(j)}catch(R){u("Failed to load files"),console.error(R)}finally{l(!1)}},X=async R=>{var W;const j=(W=R.target.files)==null?void 0:W[0];if(j)try{c(!0),u(null);const Q=await Gr.uploadFile(j);Q.success&&Q.file&&(t([...e,Q.file]),n&&s({...n,usedBytes:n.usedBytes+Q.file.size,freeBytes:n.freeBytes-Q.file.size})),R.target.value=""}catch(Q){u("Failed to upload file"),console.error(Q)}finally{c(!1)}},U=R=>{B(R)},q=async R=>{try{u(null),(await Gr.deleteFile(R.path)).success&&(t(e.filter(W=>W.path!==R.path)),n&&s({...n,usedBytes:n.usedBytes-R.size,freeBytes:n.freeBytes+R.size}))}catch(j){u("Failed to delete file"),console.error(j)}},V=R=>{const j=Gr.getDownloadUrl(R.path),W=document.createElement("a");W.href=j,W.download=R.filename,document.body.appendChild(W),W.click(),document.body.removeChild(W)},Z=async R=>{if(![G.CONFIG,G.LOG,G.TEXT].includes(R.type)){u("Preview not available for this file type");return}try{P(!0),w(R);const j=await Gr.previewFile(R.path);j.success?M(j.content):u(j.message||"Failed to preview file")}catch(j){u("Failed to preview file"),console.error(j)}finally{P(!1)}},K=R=>R<1024?`${R} B`:R<1024*1024?`${(R/1024).toFixed(1)} KB`:R<1024*1024*1024?`${(R/(1024*1024)).toFixed(1)} MB`:`${(R/(1024*1024*1024)).toFixed(2)} GB`,ie=R=>{if(!R)return"Unknown";const j=new Date(R);return j.toLocaleDateString()+" "+j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},E=R=>{switch(R){case G.AUDIO:return"";case G.FSEQ:return"";case G.CONFIG:return"";case G.LOG:return"";case G.BACKUP:return"";case G.TEXT:return"";default:return""}},_=R=>{const j={[G.AUDIO]:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",[G.FSEQ]:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",[G.CONFIG]:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",[G.LOG]:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200",[G.BACKUP]:"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200",[G.TEXT]:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200",[G.OTHER]:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"};return r.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${j[R]}`,children:R.toUpperCase()})};let F=e;f!=="all"&&(F=F.filter(R=>R.type===f)),y&&(F=F.filter(R=>R.filename.toLowerCase().includes(y.toLowerCase()))),F=[...F].sort((R,j)=>{let W=0;switch(k){case"name":W=R.filename.localeCompare(j.filename);break;case"size":W=R.size-j.size;break;case"date":W=(R.lastModified||"").localeCompare(j.lastModified||"");break}return N==="asc"?W:-W});const te={all:e.length,[G.AUDIO]:e.filter(R=>R.type===G.AUDIO).length,[G.FSEQ]:e.filter(R=>R.type===G.FSEQ).length,[G.CONFIG]:e.filter(R=>R.type===G.CONFIG).length,[G.LOG]:e.filter(R=>R.type===G.LOG).length,[G.BACKUP]:e.filter(R=>R.type===G.BACKUP).length,[G.OTHER]:e.filter(R=>R.type===G.OTHER).length+e.filter(R=>R.type===G.TEXT).length};return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading files..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"File Manager"}),r.jsx("p",{className:"text-gray-500",children:"Manage files on SD card"})]}),o&&r.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200",children:[o,r.jsx("button",{onClick:()=>u(null),className:"ml-4 underline hover:no-underline",children:"Dismiss"})]}),n&&r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-medium",children:"Storage"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[K(n.usedBytes)," used of ",K(n.totalBytes)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(n.usedBytes/n.totalBytes*100),"%"]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[K(n.freeBytes)," free"]})]})]}),r.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-brand-600 transition-all duration-300",style:{width:`${n.usedBytes/n.totalBytes*100}%`}})})]}),r.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[r.jsxs("label",{className:"flex-shrink-0",children:[r.jsx("input",{type:"file",onChange:X,disabled:i,className:"hidden"}),r.jsx("div",{className:"px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 cursor-pointer flex items-center gap-2 disabled:opacity-50",children:i?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload File"]})})]}),r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Search files...",value:y,onChange:R=>v(R.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800"})}),r.jsxs("select",{value:`${k}-${N}`,onChange:R=>{const[j,W]=R.target.value.split("-");b(j),p(W)},className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800",children:[r.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),r.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),r.jsx("option",{value:"size-asc",children:"Size (Small)"}),r.jsx("option",{value:"size-desc",children:"Size (Large)"}),r.jsx("option",{value:"date-desc",children:"Date (Newest)"}),r.jsx("option",{value:"date-asc",children:"Date (Oldest)"})]})]}),r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[r.jsxs("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f==="all"?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:["All ",r.jsxs("span",{className:"ml-1",children:["(",te.all,")"]})]}),r.jsxs("button",{onClick:()=>g(G.AUDIO),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.AUDIO?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" Audio ",r.jsxs("span",{className:"ml-1",children:["(",te[G.AUDIO],")"]})]}),r.jsxs("button",{onClick:()=>g(G.FSEQ),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.FSEQ?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" FSEQ ",r.jsxs("span",{className:"ml-1",children:["(",te[G.FSEQ],")"]})]}),r.jsxs("button",{onClick:()=>g(G.CONFIG),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.CONFIG?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" Config ",r.jsxs("span",{className:"ml-1",children:["(",te[G.CONFIG],")"]})]}),r.jsxs("button",{onClick:()=>g(G.LOG),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.LOG?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" Logs ",r.jsxs("span",{className:"ml-1",children:["(",te[G.LOG],")"]})]}),r.jsxs("button",{onClick:()=>g(G.BACKUP),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.BACKUP?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" Backups ",r.jsxs("span",{className:"ml-1",children:["(",te[G.BACKUP],")"]})]}),r.jsxs("button",{onClick:()=>g(G.OTHER),className:`px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${f===G.OTHER?"bg-brand-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[" Other ",r.jsxs("span",{className:"ml-1",children:["(",te[G.OTHER],")"]})]})]}),F.length===0?r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-8 bg-white/60 dark:bg-gray-950/60 text-center text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),r.jsx("p",{children:y||f!=="all"?"No files match your filters":"No files found"})]}):r.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-950/60 overflow-hidden",children:r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:F.map(R=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"text-2xl flex-shrink-0",children:E(R.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium truncate",children:R.filename}),_(R.type)]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[r.jsx("span",{children:K(R.size)}),r.jsx("span",{className:"hidden sm:inline",children:ie(R.lastModified)})]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[[G.CONFIG,G.LOG,G.TEXT].includes(R.type)&&r.jsx("button",{onClick:()=>Z(R),className:"p-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",title:"Preview",children:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsx("button",{onClick:()=>V(R),className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",title:"Download",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),r.jsx("button",{onClick:()=>U(R),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Delete",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},R.path))})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:E(h.type)}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:h.filename}),r.jsx("p",{className:"text-sm text-gray-500",children:h.path})]})]}),r.jsx("button",{onClick:()=>{w(null),M("")},className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:O?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading preview..."})}):r.jsx("pre",{className:"text-sm bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto font-mono whitespace-pre-wrap break-words",children:C})})]})}),D&&r.jsx(Nn,{title:"Delete File",message:`Delete "${D.filename}"? This action cannot be undone.`,onConfirm:()=>{q(D),B(null)},onCancel:()=>B(null),dangerous:!0})]})}function Op(){return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"About"}),r.jsx("p",{className:"text-gray-500",children:"Information about JSense Board"})]}),r.jsx("div",{className:"max-w-2xl space-y-4",children:r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Resources"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("a",{href:"https://GetJBoards.com",target:"_blank",rel:"noopener noreferrer",className:"block text-brand-600 hover:underline",children:" GetJBoards.com"}),r.jsx("a",{href:"https://Facebook.com/GetJBoards",target:"_blank",rel:"noopener noreferrer",className:"block text-brand-600 hover:underline",children:" Facebook Page"}),r.jsx("a",{href:"https://github.com/pixelpropshop/JSenseFirmware",target:"_blank",rel:"noopener noreferrer",className:"block text-brand-600 hover:underline",children:" GitHub Repository"}),r.jsx("a",{href:"https://github.com/pixelpropshop/JSenseFirmware/wiki",target:"_blank",rel:"noopener noreferrer",className:"block text-brand-600 hover:underline",children:" Documentation"}),r.jsx("a",{href:"https://github.com/pixelpropshop/JSenseFirmware/issues",target:"_blank",rel:"noopener noreferrer",className:"block text-brand-600 hover:underline",children:" Report Issues"})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800 text-xs text-gray-500",children:[r.jsxs("p",{className:"mb-2",children:[r.jsx("strong",{children:"Open Source:"})," This project is open source and uses various third-party libraries."]}),r.jsx("p",{children:" 2025 Pixel Prop Shop. Licensed under MIT License."})]})]})})]})}const Ip={available:!0,currentTime:new Date().toISOString(),isTimeSynced:!0,ntpEnabled:!0},_p={enabled:!0,timezone:"America/Phoenix",timeFormat:"12h",dateFormat:"MM/DD/YYYY",syncPriority:"ntp",lastSync:new Date().toISOString()},Bp={available:!0,width:128,height:64,currentScreen:"clock",isActive:!0},$p={enabled:!0,brightness:80,timeout:"5m",autoSleep:!0,rotation:0,defaultScreen:"rotating",screenSaver:!1},Up=[{value:"America/New_York",label:"Eastern (ET)"},{value:"America/Chicago",label:"Central (CT)"},{value:"America/Denver",label:"Mountain (MT)"},{value:"America/Phoenix",label:"Arizona (MST)"},{value:"America/Los_Angeles",label:"Pacific (PT)"},{value:"America/Anchorage",label:"Alaska (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii (HST)"},{value:"UTC",label:"UTC"},{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEST)"}];class zp{async getRTCStatus(){try{return await I.fetch("/api/hardware/rtc/status")}catch{return console.log("Mock: Using RTC status mock data"),Ip}}async getRTCConfig(){try{return await I.fetch("/api/hardware/rtc")}catch{return console.log("Mock: Using RTC config mock data"),_p}}async updateRTCConfig(t){try{return await I.fetch("/api/hardware/rtc",{method:"POST",body:JSON.stringify(t)})}catch{return console.log("Mock: RTC configuration updated"),{success:!0,message:"RTC configuration updated successfully"}}}async syncRTCTime(){try{return await I.fetch("/api/hardware/rtc/sync",{method:"POST"})}catch{return console.log("Mock: Time synchronized"),{success:!0,message:"Time synchronized successfully",currentTime:new Date().toISOString()}}}async setManualTime(t){try{return await I.fetch("/api/hardware/rtc/set-time",{method:"POST",body:JSON.stringify({time:t})})}catch{return console.log("Mock: Manual time set"),{success:!0,message:"Time set successfully"}}}async getOLEDStatus(){try{return await I.fetch("/api/hardware/oled/status")}catch{return console.log("Mock: Using OLED status mock data"),Bp}}async getOLEDConfig(){try{return await I.fetch("/api/hardware/oled")}catch{return console.log("Mock: Using OLED config mock data"),$p}}async updateOLEDConfig(t){try{return await I.fetch("/api/hardware/oled",{method:"POST",body:JSON.stringify(t)})}catch{return console.log("Mock: OLED configuration updated"),{success:!0,message:"OLED configuration updated successfully"}}}async testOLEDDisplay(){try{return await I.fetch("/api/hardware/oled/test",{method:"POST"})}catch{return console.log("Mock: Test pattern displayed"),{success:!0,message:"Test pattern displayed on OLED"}}}}const Bt=new zp;function Wp(){const{autoCheckEnabled:e,setAutoCheckEnabled:t,checkInterval:n,setCheckInterval:s}=ko(),[a,l]=m.useState(null),[i,c]=m.useState(!0),[o,u]=m.useState(!1),[f,g]=m.useState(null),[y,v]=m.useState(null),[k,b]=m.useState(!1),[N,p]=m.useState(""),[h,w]=m.useState(!1),[C,M]=m.useState(""),[O,P]=m.useState(!1),[D,B]=m.useState(null),[z,X]=m.useState(!1),[U,q]=m.useState(!1),[V,Z]=m.useState(0),[K,ie]=m.useState(null),[E,_]=m.useState(null),[F,te]=m.useState(null),[R,j]=m.useState(null),[W,Q]=m.useState(null),[A,Y]=m.useState(null),[ee,ve]=m.useState(!1),[Me,rt]=m.useState(0);m.useEffect(()=>{Oe(),Ye(),ke()},[]);const Oe=async()=>{try{c(!0);const L=await Ce.getSystemInfo();l(L)}catch(L){console.error("Failed to load system info:",L)}finally{c(!1)}},Ye=async()=>{try{const L=await Xt.getOTAStatus();ie(L)}catch(L){console.error("Failed to load OTA status:",L)}},ke=async()=>{try{const[L,re,se,st]=await Promise.all([Bt.getRTCStatus(),Bt.getRTCConfig(),Bt.getOLEDStatus(),Bt.getOLEDConfig()]);te(L),j(re),Q(se),Y(st)}catch(L){console.error("Failed to load hardware configs:",L)}},De=async L=>{if(R)try{const re={...R,...L};await Bt.updateRTCConfig(re),j(re),v({type:"success",text:"RTC configuration updated"})}catch(re){v({type:"error",text:"Failed to update RTC configuration"}),console.error(re)}},Ie=async()=>{try{v({type:"success",text:"Syncing RTC..."}),await Bt.syncRTCTime(),await ke(),v({type:"success",text:"RTC synchronized successfully"})}catch(L){v({type:"error",text:"Failed to sync RTC"}),console.error(L)}},_e=async()=>{try{const L=new Date;await Bt.setManualTime(L.toISOString()),await ke(),v({type:"success",text:"RTC time set manually"})}catch(L){v({type:"error",text:"Failed to set manual time"}),console.error(L)}},d=async L=>{if(A)try{const re={...A,...L};await Bt.updateOLEDConfig(re),Y(re),v({type:"success",text:"OLED configuration updated"})}catch(re){v({type:"error",text:"Failed to update OLED configuration"}),console.error(re)}},x=async()=>{try{v({type:"success",text:"Testing OLED display..."}),await Bt.testOLEDDisplay(),v({type:"success",text:"OLED test completed"})}catch(L){v({type:"error",text:"Failed to test OLED"}),console.error(L)}},S=async()=>{if(a)try{P(!0),v(null);const L=await Xt.checkForUpdates(a.productName,a.firmwareVersion);B(L),L.updateAvailable?v({type:"success",text:`Update available! Latest version: ${L.latestVersion}`}):v({type:"success",text:"You have the latest firmware version."})}catch(L){console.error("Failed to check for updates:",L),v({type:"error",text:"Failed to check for updates. Please check your internet connection."})}finally{P(!1)}},H=async L=>{a&&_({title:"Download and Install Firmware",message:`Download and install firmware version ${L}? Device will restart after update.`,onConfirm:()=>le(L)})},le=async L=>{var re;if(a)try{q(!0),Z(0),v({type:"success",text:"Downloading firmware from GitHub..."});const se=await Xt.downloadFirmware(a.productName,L,Sr=>{const _0=Math.round(Sr.loaded/Sr.total*100);Z(_0)});v({type:"success",text:"Download complete. Installing firmware..."});const st=new File([se],`firmware-${L}.bin`,{type:"application/octet-stream"}),kr=(re=D==null?void 0:D.allVersions)==null?void 0:re.find(Sr=>Sr.version===L),Xa=kr==null?void 0:kr.checksum;u(!0),g(null);const Nr=await Ce.uploadFirmware(st,Sr=>{g(Sr)},Xa);Nr.success?(v({type:"success",text:Nr.message}),setTimeout(()=>{window.location.reload()},3e3)):v({type:"error",text:Nr.message||Nr.error||"Firmware update failed"})}catch(se){v({type:"error",text:se instanceof Error?se.message:"Failed to download firmware"}),console.error(se)}finally{q(!1),Z(0),u(!1),g(null)}},Pe=async L=>{var se;const re=(se=L.target.files)==null?void 0:se[0];if(re){if(!re.name.endsWith(".bin")){v({type:"error",text:"Please select a valid .bin firmware file"}),L.target.value="";return}if(k&&Da()){w(!0);try{const st=await F0(re);M(st)}catch(st){console.error("Failed to calculate checksum:",st),v({type:"error",text:"Checksum calculation failed. Continuing without verification."})}w(!1)}else k&&!Da()&&v({type:"error",text:"Checksum calculation requires HTTPS. Continuing without verification."});_({title:"Upload Firmware",message:`Upload firmware "${re.name}" (${Ce.formatBytes(re.size)})? Device will restart after update.`,onConfirm:()=>Ka(re,L.target)})}},yt=async()=>new Promise(L=>{let re=15;ve(!0),rt(re);const se=setInterval(()=>{re--,rt(re),re<=0&&clearInterval(se)},1e3);setTimeout(async()=>{let st=0;const kr=20,Xa=async()=>{try{return await Ce.getSystemInfo(),!0}catch{return!1}},Nr=setInterval(async()=>{st++,(await Xa()||st>=kr)&&(clearInterval(Nr),clearInterval(se),ve(!1),L())},1e3)},1e4)}),Ka=async(L,re)=>{try{u(!0),g(null),v(null);const se=k&&N?N:void 0,st=await Ce.uploadFirmware(L,kr=>{g(kr)},se);st.success?(M(""),p(""),re.value="",v({type:"success",text:" Firmware uploaded successfully! Device is rebooting..."}),await yt(),window.location.reload()):(v({type:"error",text:st.message||st.error||"Firmware update failed"}),re.value="")}catch(se){v({type:"error",text:se instanceof Error?se.message:"Failed to upload firmware"}),console.error(se),re.value=""}finally{u(!1),g(null)}},T=()=>{_({title:"Restart Device",message:"Restart the device? You will lose connection temporarily.",onConfirm:ne})},ne=async()=>{try{v(null);const L=await Ce.restartDevice();L.success?(v({type:"success",text:"Device restarting... Please wait 10-15 seconds."}),setTimeout(()=>{window.location.reload()},15e3)):v({type:"error",text:L.message||"Failed to restart device"})}catch(L){v({type:"error",text:"Failed to restart device"}),console.error(L)}},Ne=()=>{_({title:" Factory Reset",message:"This will erase ALL settings and configurations. Are you sure?",dangerous:!0,secondConfirm:" FINAL WARNING - This action cannot be undone. Proceed with factory reset?",onConfirm:We})},We=async()=>{try{v(null);const L=await Ce.factoryReset();L.success?(v({type:"success",text:"Factory reset initiated. Device will restart with default settings."}),setTimeout(()=>{window.location.reload()},15e3)):v({type:"error",text:L.message||"Failed to perform factory reset"})}catch(L){v({type:"error",text:"Failed to perform factory reset"}),console.error(L)}},jr=async()=>{try{v(null);const L=await Ce.exportConfig(),re=URL.createObjectURL(L),se=document.createElement("a");se.href=re,se.download=`jsense-config-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(re),v({type:"success",text:"Configuration exported successfully"})}catch(L){v({type:"error",text:"Failed to export configuration"}),console.error(L)}},_t=async L=>{var se;const re=(se=L.target.files)==null?void 0:se[0];if(re){if(!re.name.endsWith(".json")){v({type:"error",text:"Please select a valid .json configuration file"}),L.target.value="";return}_({title:"Import Configuration",message:`Import configuration from "${re.name}"? This will update RTC and OLED settings. Device may need to restart for some changes to take effect.`,onConfirm:()=>Ns(re,L.target)})}},Ns=async(L,re)=>{try{v(null);const se=await Ce.importConfig(L);se.success?(v({type:"success",text:se.message||"Configuration imported successfully"}),await ke()):v({type:"error",text:se.message||"Failed to import configuration"}),re.value=""}catch(se){v({type:"error",text:se instanceof Error?se.message:"Failed to import configuration"}),console.error(se)}},Ss=()=>{_({title:"Clear System Logs",message:"Clear all system logs?",onConfirm:nt})},nt=async()=>{try{v(null);const L=await Ce.clearLogs();L.success?v({type:"success",text:"System logs cleared successfully"}):v({type:"error",text:L.message||"Failed to clear logs"})}catch(L){v({type:"error",text:"Failed to clear logs"}),console.error(L)}},qr=()=>{_({title:"Rollback Firmware",message:`Roll back to previous firmware version ${(K==null?void 0:K.backupVersion)||""}? Device will restart.`,dangerous:!0,onConfirm:M0})},M0=async()=>{try{v(null);const L=await Xt.rollbackFirmware();L.success?(v({type:"success",text:L.message}),setTimeout(()=>{window.location.reload()},3e3)):v({type:"error",text:L.message||"Failed to rollback firmware"})}catch(L){v({type:"error",text:"Failed to rollback to previous firmware"}),console.error(L)}},O0=async()=>{try{v(null);const L=await Xt.markBootValid();L.success?(v({type:"success",text:"Firmware validated successfully"}),await Ye()):v({type:"error",text:L.message||"Failed to validate firmware"})}catch(L){v({type:"error",text:"Failed to validate firmware boot"}),console.error(L)}},I0=async()=>{try{v(null);const L=await Xt.enableSafeBoot();L.success?v({type:"success",text:L.message}):v({type:"error",text:L.message||"Failed to enable safe boot"})}catch(L){v({type:"error",text:"Failed to enable safe boot mode"}),console.error(L)}};return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading system information..."})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Settings"}),r.jsx("p",{className:"text-gray-500",children:"Device configuration and system administration"})]}),y&&r.jsxs("div",{className:`mb-4 p-3 rounded-lg ${y.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:[y.text,r.jsx("button",{onClick:()=>v(null),className:"ml-4 underline hover:no-underline",children:"Dismiss"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[a&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"System Information"}),r.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsx("dt",{className:"text-gray-500",children:"Product Name"}),r.jsx("dd",{children:a.productName}),r.jsx("dt",{className:"text-gray-500",children:"Hostname"}),r.jsx("dd",{children:a.hostname}),r.jsx("dt",{className:"text-gray-500",children:"Firmware Version"}),r.jsx("dd",{children:a.firmwareVersion}),r.jsx("dt",{className:"text-gray-500",children:"Build Date"}),r.jsxs("dd",{children:[a.buildDate,a.buildTime&&` ${a.buildTime}`]}),r.jsx("dt",{className:"text-gray-500",children:"Chip Model"}),r.jsxs("dd",{children:[a.chipModel,a.chipRevision&&` (Rev ${a.chipRevision})`]}),r.jsx("dt",{className:"text-gray-500",children:"Flash Size"}),r.jsx("dd",{children:Ce.formatBytes(a.flashSize)}),r.jsx("dt",{className:"text-gray-500",children:"CPU Frequency"}),r.jsxs("dd",{children:[a.cpuFrequency," MHz"]}),r.jsx("dt",{className:"text-gray-500",children:"MAC Address (WiFi)"}),r.jsx("dd",{className:"font-mono text-xs",children:a.macAddressWiFi}),a.macAddressAP&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{className:"text-gray-500",children:"MAC Address (AP)"}),r.jsx("dd",{className:"font-mono text-xs",children:a.macAddressAP})]})]})]}),F&&R&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"RTC Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${F.available?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:F.available?" Available":" Not Available"})]}),F.available&&r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("p",{children:["Current Time: ",new Date(F.currentTime).toLocaleString()]}),r.jsxs("p",{children:["Is Synced: ",F.isTimeSynced?"Yes":"No"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Timezone"}),r.jsx("select",{value:R.timezone,onChange:L=>De({timezone:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Up.map(L=>r.jsx("option",{value:L.value,children:L.label},L.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Format"}),r.jsxs("select",{value:R.timeFormat,onChange:L=>De({timeFormat:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"12h",children:"12-hour"}),r.jsx("option",{value:"24h",children:"24-hour"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date Format"}),r.jsxs("select",{value:R.dateFormat,onChange:L=>De({dateFormat:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Sync Priority"}),r.jsxs("select",{value:R.syncPriority,onChange:L=>De({syncPriority:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"ntp",children:"NTP (Internet)"}),r.jsx("option",{value:"rtc",children:"RTC Hardware"}),r.jsx("option",{value:"manual",children:"Manual Only"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:Ie,className:"w-full px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:" Sync Time Now"}),r.jsx("button",{onClick:_e,className:"w-full px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition-colors",children:" Set to Browser Time"})]})]})]}),W&&A&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"OLED Display Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W.available?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:W.available?" Available":" Not Available"})]}),W.available&&r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("p",{children:["Resolution: ",W.width," x ",W.height]}),r.jsxs("p",{children:["Active: ",W.isActive?"Yes":"No"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Display"}),r.jsx("button",{onClick:()=>d({enabled:!A.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${A.enabled?"bg-brand-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${A.enabled?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Screen Saver"}),r.jsx("button",{onClick:()=>d({screenSaver:!A.screenSaver}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${A.screenSaver?"bg-brand-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${A.screenSaver?"translate-x-6":"translate-x-1"}`})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Brightness: ",A.brightness]}),r.jsx("input",{type:"range",min:"0",max:"255",value:A.brightness,onChange:L=>d({brightness:parseInt(L.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Screen Timeout"}),r.jsxs("select",{value:A.timeout,onChange:L=>d({timeout:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"always-on",children:"Always On"}),r.jsx("option",{value:"30s",children:"30 seconds"}),r.jsx("option",{value:"1m",children:"1 minute"}),r.jsx("option",{value:"5m",children:"5 minutes"}),r.jsx("option",{value:"10m",children:"10 minutes"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rotation"}),r.jsxs("select",{value:A.rotation,onChange:L=>d({rotation:parseInt(L.target.value)}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"0",children:"0"}),r.jsx("option",{value:"90",children:"90"}),r.jsx("option",{value:"180",children:"180"}),r.jsx("option",{value:"270",children:"270"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Screen"}),r.jsxs("select",{value:A.defaultScreen,onChange:L=>d({defaultScreen:L.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"clock",children:"Clock"}),r.jsx("option",{value:"ip-address",children:"IP Address"}),r.jsx("option",{value:"status",children:"Status"}),r.jsx("option",{value:"sequence",children:"Sequence"}),r.jsx("option",{value:"rotating",children:"Rotating"})]})]})]}),r.jsx("button",{onClick:x,className:"w-full px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors",children:" Test Display"})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Automatic Update Check"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Automatic Update Checks"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically check for firmware updates when you open the app"})]}),r.jsx("button",{onClick:()=>t(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e?"bg-brand-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e?"translate-x-6":"translate-x-1"}`})})]}),e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Check Frequency"}),r.jsxs("select",{value:n,onChange:L=>s(parseInt(L.target.value)),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"1",children:"Every hour"}),r.jsx("option",{value:"3",children:"Every 3 hours"}),r.jsx("option",{value:"6",children:"Every 6 hours"}),r.jsx("option",{value:"12",children:"Every 12 hours"}),r.jsx("option",{value:"24",children:"Once a day"})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"How often to check for new firmware versions while the app is open"})]}),r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[" ",e?`The app will check for updates automatically every ${n} hour${n!==1?"s":""} while open. You'll see a notification badge on the Settings icon and a toast notification when updates are available.`:"Automatic update checks are disabled. You can manually check for updates using the button above."]})})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Firmware Update"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:S,disabled:O||!a,className:`w-full px-4 py-2 rounded-lg text-white transition-colors ${O?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:O?"Checking for Updates...":" Check for Updates"}),D&&r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Current Version: ",D.currentVersion]}),r.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Latest Version: ",D.latestVersion]})]}),D.updateAvailable&&r.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded-full",children:"Update Available"})]}),D.latestStable&&D.updateAvailable&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Latest Release Notes:"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 whitespace-pre-line",children:D.latestStable.changelog}),r.jsxs("button",{onClick:()=>H(D.latestVersion),disabled:U||o,className:"mt-2 w-full px-4 py-2 rounded-lg bg-brand-600 hover:bg-brand-700 text-white transition-colors",children:[" Download and Install v",D.latestVersion]})]}),D.allVersions&&D.allVersions.length>1&&r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>X(!z),className:"text-sm text-brand-600 hover:underline",children:[z?"":""," View All Versions (",D.allVersions.length,")"]}),z&&r.jsx("div",{className:"mt-2 space-y-2 max-h-64 overflow-y-auto scrollbar-thin",children:D.allVersions.map(L=>{const re=Xt.formatVersionBadge(L,D.currentVersion);return r.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-medium text-sm",children:["v",L.version]}),re.text&&r.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${re.color==="blue"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":re.color==="green"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:re.text}),L.stable&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",children:"Stable"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:L.buildDate})]}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 whitespace-pre-line",children:L.changelog}),re.text!=="Current"&&r.jsxs("button",{onClick:()=>H(L.version),disabled:U||o,className:"w-full px-3 py-1.5 rounded-lg text-sm bg-brand-600 hover:bg-brand-700 text-white transition-colors disabled:bg-gray-400",children:["Install v",L.version]})]},L.version)})})]})]}),U&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Downloading firmware from GitHub... ",V,"%"]}),r.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-600 transition-all duration-300",style:{width:`${V}%`}})})]})]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Or upload a firmware file (.bin) manually. The device will automatically restart after the update."}),r.jsxs("label",{className:"block",children:[r.jsx("input",{type:"file",accept:".bin",onChange:Pe,disabled:o,className:"hidden"}),r.jsx("div",{className:`px-4 py-2 rounded-lg text-center cursor-pointer transition-colors ${o?"bg-gray-400 cursor-not-allowed":"bg-brand-600 hover:bg-brand-700 text-white"}`,children:o?"Uploading Firmware...":" Upload Firmware File (.bin)"})]}),o&&f&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${f.stage==="verifying"?"bg-yellow-500":f.stage==="uploading"?"bg-blue-500":f.stage==="installing"?"bg-purple-500":"bg-green-500"}`}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:f.stage==="verifying"?" Verifying":f.stage==="uploading"?" Uploading":f.stage==="installing"?" Installing":" Complete"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.message}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[f.progress,"%"]})]}),r.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-brand-600 transition-all duration-300",style:{width:`${f.progress}%`}})})]}),f.bytesUploaded!==void 0&&f.totalBytes!==void 0&&r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{children:[Ce.formatBytes(f.bytesUploaded)," / ",Ce.formatBytes(f.totalBytes)]}),f.timeRemaining!==void 0&&f.timeRemaining>0&&r.jsxs("span",{children:["~",f.timeRemaining,"s remaining"]})]})]}),r.jsxs("button",{onClick:()=>b(!k),className:"text-sm text-brand-600 hover:underline",children:[k?"":""," Advanced Options"]}),k&&r.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expected SHA256 Checksum (Optional)"}),r.jsx("input",{type:"text",value:N,onChange:L=>p(L.target.value),placeholder:"Enter expected checksum to verify file integrity",className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",disabled:o}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If provided, the file will be verified before upload"})]}),C&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File Checksum"}),r.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded border border-gray-300 dark:border-gray-700",children:r.jsx("p",{className:"text-xs font-mono break-all text-gray-700 dark:text-gray-300",children:C})}),N&&r.jsx("p",{className:`mt-1 text-xs ${C.toLowerCase()===N.toLowerCase()?"text-green-600":"text-red-600"}`,children:C.toLowerCase()===N.toLowerCase()?" Checksum matches":" Checksum does not match"})]}),h&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calculating checksum..."})]})]})]})]}),K&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"Firmware Backup & Recovery"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg space-y-3",children:[r.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Current Version"}),r.jsx("dd",{className:"font-medium",children:K.currentVersion})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Current Partition"}),r.jsx("dd",{className:"font-mono text-xs",children:K.currentPartition})]})]}),K.rollbackAvailable&&r.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Backup Version"}),r.jsx("dd",{className:"font-medium text-blue-600 dark:text-blue-400",children:K.backupVersion})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Backup Partition"}),r.jsx("dd",{className:"font-mono text-xs",children:K.backupPartition})]})]}),r.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Boot Count"}),r.jsx("dd",{children:K.bootCount})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-gray-500",children:"Last Boot"}),r.jsx("dd",{className:K.lastBootSuccess?"text-green-600":"text-red-600",children:K.lastBootSuccess?" Success":" Failed"})]})]})]}),K.rollbackAvailable?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:qr,className:"w-full px-4 py-2 rounded-lg bg-orange-600 hover:bg-orange-700 text-white transition-colors",children:[" Rollback to v",K.backupVersion]}),!K.safeBoot&&r.jsx("button",{onClick:I0,className:"w-full px-4 py-2 rounded-lg bg-yellow-600 hover:bg-yellow-700 text-white transition-colors",children:" Enable Safe Boot (Test Backup)"}),K.bootCount<=3&&r.jsx("button",{onClick:O0,className:"w-full px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition-colors",children:" Confirm Firmware Working"})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No backup firmware available. A backup will be created after your next firmware update."}),K.safeBoot&&r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:" Safe boot enabled. Device will boot from backup firmware on next restart."})})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:"System Actions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:jr,className:"w-full px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:" Export Configuration"}),r.jsxs("label",{className:"block",children:[r.jsx("input",{type:"file",accept:".json",onChange:_t,className:"hidden"}),r.jsx("div",{className:"w-full px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition-colors text-center cursor-pointer",children:" Import Configuration"})]}),r.jsx("button",{onClick:Ss,className:"w-full px-4 py-2 rounded-lg bg-yellow-600 hover:bg-yellow-700 text-white transition-colors",children:"Clear System Logs"}),r.jsx("button",{onClick:T,className:"w-full px-4 py-2 rounded-lg bg-orange-600 hover:bg-orange-700 text-white transition-colors",children:"Restart Device"}),r.jsx("button",{onClick:Ne,className:"w-full px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:" Factory Reset"})]}),r.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:[r.jsx("strong",{children:"Note:"})," Configuration files include RTC and OLED settings that can be backed up and restored."]}),r.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:[r.jsx("strong",{children:"Warning:"})," Factory reset will erase all settings, WiFi credentials, and configurations. This action cannot be undone."]})]})]}),ee&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-md w-full p-8 border border-gray-200 dark:border-gray-800 text-center",children:[r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4",children:r.jsxs("svg",{className:"w-8 h-8 text-blue-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),r.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-gray-100",children:" Device Rebooting"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Installing firmware and restarting device..."}),Me>0?r.jsxs("p",{className:"text-sm text-gray-500",children:["Waiting for device to restart... (",Me,"s)"]}):r.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Checking if device is online..."}),r.jsx("div",{className:"mt-4 w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600 animate-pulse",style:{width:"100%"}})})]})}),E&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-md w-full p-6 border border-gray-200 dark:border-gray-800",children:[r.jsx("h3",{className:`text-lg font-semibold mb-3 ${E.dangerous?"text-red-600":""}`,children:E.title}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:E.message}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>{_(null)},className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>{E.secondConfirm?_({title:E.title,message:E.secondConfirm,dangerous:!0,onConfirm:E.onConfirm}):(E.onConfirm(),_(null))},className:`px-4 py-2 rounded-lg text-white transition-colors ${E.dangerous?"bg-red-600 hover:bg-red-700":"bg-brand-600 hover:bg-brand-700"}`,children:"Confirm"})]})]})})]})}function Vp(){const e=Vr(),[t,n]=m.useState(!0),[s,a]=m.useState(!1),[l,i]=m.useState(null),[c,o]=m.useState(null),[u,f]=m.useState([]),[g,y]=m.useState(!1),[v,k]=m.useState(null),[b,N]=m.useState(!1),[p,h]=m.useState([]),[w,C]=m.useState(null),[M,O]=m.useState(!1),[P,D]=m.useState(null),[B,z]=m.useState(""),[X,U]=m.useState(!1),[q,V]=m.useState(""),[Z,K]=m.useState("{}"),[ie,E]=m.useState(!1),[_,F]=m.useState(null),[te,R]=m.useState(!1);m.useEffect(()=>{j()},[]),m.useEffect(()=>{if((v==null?void 0:v.type)==="success"){const x=setTimeout(()=>{k(null)},5e3);return()=>clearTimeout(x)}},[v]);const j=async(x=!1)=>{x?a(!0):n(!0),i(null);try{const[S,H]=await Promise.all([wt.getThisDevice(),wt.getPeers()]);o(S),f(H)}catch(S){const le=`Failed to load JBoard network data: ${(S==null?void 0:S.message)||(S==null?void 0:S.toString())||"Unknown error occurred"}`;x?k({type:"error",text:le}):i(le)}finally{x?a(!1):n(!1)}},W=async()=>{y(!0),k(null),h([]),N(!0);const x=setTimeout(()=>{y(!1),k({type:"error",text:"Scan timeout - no response from network"})},3e4);try{const S=await wt.startScan();clearTimeout(x),S.success&&S.devices?(h(S.devices),S.devices.length===0&&k({type:"success",text:"Scan complete - no new devices found"})):(k({type:"error",text:S.message||"Scan failed"}),N(!1))}catch(S){clearTimeout(x);const H=(S==null?void 0:S.message)||(S==null?void 0:S.toString())||"Unknown error";k({type:"error",text:`Failed to start scan: ${H}`}),N(!1)}finally{y(!1)}},Q=x=>{D(x),z(x.name),O(!0)},A=()=>{O(!1),D(null),z("")},Y=async()=>{if(P){C(P.mac);try{const x=B.trim()||P.name,S=await wt.pairDevice(P.mac,x);if(S.success){k({type:"success",text:`Paired with ${x}`});const H=p.filter(le=>le.mac!==P.mac);h(H),A(),H.length===0&&N(!1),await j(!0),C(null)}else k({type:"error",text:S.message||"Failed to pair"}),C(null)}catch(x){const S=(x==null?void 0:x.message)||(x==null?void 0:x.toString())||"Unknown error";k({type:"error",text:`Failed to pair device: ${S}`}),C(null)}}},ee=()=>{N(!1),h([])},ve=x=>{F(x)},Me=async x=>{try{const S=await wt.unpairDevice(x);S.success?(k({type:"success",text:"Device unpaired"}),await j(!0)):k({type:"error",text:S.message||"Failed to unpair"})}catch(S){const H=(S==null?void 0:S.message)||(S==null?void 0:S.toString())||"Unknown error";k({type:"error",text:`Failed to unpair device: ${H}`})}},rt=()=>{if(!q.trim())return;if(!/^[a-zA-Z0-9_]+$/.test(q)){k({type:"error",text:"Command type must contain only letters, numbers, and underscores"});return}if(q.length>50){k({type:"error",text:"Command type must be 50 characters or less"});return}R(!0)},Oe=async()=>{E(!0),k(null);try{let x={};if(Z.trim())try{x=JSON.parse(Z)}catch{k({type:"error",text:"Invalid JSON in data field"}),E(!1);return}const S=await wt.broadcast(q,x);S.success?(k({type:"success",text:`Broadcast sent to ${u.length} device${u.length!==1?"s":""}`}),V(""),K("{}"),U(!1)):k({type:"error",text:S.message||"Failed to send broadcast"})}catch(x){const S=(x==null?void 0:x.message)||(x==null?void 0:x.toString())||"Unknown error";k({type:"error",text:`Network error while broadcasting: ${S}`})}finally{E(!1)}},Ye=x=>{switch(x){case Qe.JSENSE_BOARD:return"JSense Board";case Qe.LED_CONTROLLER:return"LED Controller";case Qe.SENSOR_HUB:return"Sensor Hub";case Qe.AUDIO_REACTIVE:return"Audio Reactive";case Qe.EFFECTS_CONTROLLER:return"Effects Controller";default:return"Unknown Device"}},ke=(x,S)=>(x&S)!==0,De=x=>{const S=Math.floor((Date.now()-new Date(x).getTime())/1e3);return S<5?"Just now":S<60?`${S}s ago`:S<3600?`${Math.floor(S/60)}m ago`:S<86400?`${Math.floor(S/3600)}h ago`:`${Math.floor(S/86400)}d ago`},Ie=x=>Math.floor((Date.now()-new Date(x).getTime())/1e3)>300,_e=x=>Math.floor((Date.now()-new Date(x).getTime())/1e3)>3600,d=x=>x>-50?{label:"Excellent",color:"green",badgeClass:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200"}:x>-70?{label:"Good",color:"yellow",badgeClass:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200"}:{label:"Weak",color:"red",badgeClass:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"};return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading JBoard network..."})}):l?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[r.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center px-4",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Failed to Load Network Data"}),r.jsx("p",{className:"text-sm",children:l})]}),r.jsx("button",{onClick:()=>j(),className:"px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:"Retry"})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"JBoard Network"}),r.jsx("p",{className:"text-gray-500",children:"Manage peer-to-peer device connections"})]}),v&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${v.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:v.text}),c&&r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-3",children:"This Device"}),r.jsxs("div",{className:"grid gap-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Name:"}),r.jsx("span",{className:"font-medium",children:c.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Type:"}),r.jsx("span",{className:"font-medium",children:Ye(c.type)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"MAC Address:"}),r.jsx("span",{className:"font-mono text-xs",children:c.mac})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"IP Address:"}),r.jsx("span",{className:"font-mono text-xs",children:c.ipAddress})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Firmware:"}),r.jsx("span",{className:"font-mono text-xs",children:c.firmwareVersion})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Status:"}),r.jsx("span",{className:c.isListening?"text-green-600 dark:text-green-400 flex items-center gap-1":"text-gray-600",children:c.isListening?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),"Listening"]}):" Offline"})]})]})]}),u.length>0&&r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-950/60 overflow-hidden",children:[r.jsxs("button",{onClick:()=>U(!X),"aria-label":"Toggle broadcast section",className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12 2a10 10 0 1 0 10 10H12V2z"}),r.jsx("path",{d:"M12 2v10l8.66 5"})]}),r.jsx("h2",{className:"text-lg font-medium",children:"Broadcast to All Devices"}),r.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-brand-100 dark:bg-brand-900/30 text-brand-800 dark:text-brand-200",children:[u.length," device",u.length!==1?"s":""]})]}),r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:`transform transition-transform ${X?"rotate-180":""}`,children:r.jsx("path",{d:"M6 9l6 6 6-6"})})]}),X&&r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Send a command or message to all paired devices simultaneously"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Command/Message Type"}),r.jsx("input",{type:"text",value:q,onChange:x=>V(x.target.value),placeholder:"e.g., CHAT_MESSAGE, set_brightness, reboot",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data (JSON)"}),r.jsx("textarea",{value:Z,onChange:x=>K(x.target.value),placeholder:'{"text": "Hello all devices"}',rows:4,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-brand-600"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter command parameters or message data as JSON"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:rt,disabled:ie||!q.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 flex items-center justify-center gap-2",children:ie?"Broadcasting...":r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M12 2a10 10 0 1 0 10 10H12V2z"}),r.jsx("path",{d:"M12 2v10l8.66 5"})]}),"Broadcast to All"]})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2",children:"Quick Broadcasts"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>{V("CHAT_MESSAGE"),K('{"text": "Hello from '+((c==null?void 0:c.name)||"JSense Board")+'!"}')},className:"text-xs px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:"Send Hello"}),r.jsx("button",{onClick:()=>{V("sync_time"),K('{"timestamp": '+Date.now()+"}")},className:"text-xs px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:"Sync Time"}),r.jsx("button",{onClick:()=>{V("status_request"),K("{}")},className:"text-xs px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:"Request Status"})]})]})]})]}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onKeyDown:x=>{x.key==="Escape"&&ee()},children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Scan Results"}),r.jsx("button",{onClick:ee,"aria-label":"Close scan results",className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),r.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:g?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Scanning for devices..."})]}):p.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsxs("svg",{className:"mx-auto h-12 w-12 mb-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.35-4.35"})]}),r.jsx("p",{children:"No unpaired devices found"}),r.jsx("p",{className:"text-sm mt-2",children:"Make sure devices are in pairing mode"})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Found ",p.length," device",p.length!==1?"s":""]}),p.map(x=>r.jsx("div",{className:"p-4 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-medium",children:x.name}),r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:Ye(x.type)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:["MAC: ",r.jsx("span",{className:"font-mono",children:x.mac})]}),r.jsxs("div",{children:["IP: ",r.jsx("span",{className:"font-mono",children:x.ipAddress||"N/A"})]}),r.jsxs("div",{children:["Firmware: ",r.jsx("span",{className:"font-mono",children:x.firmwareVersion})]}),r.jsxs("div",{children:["Signal: ",x.rssi," dBm"]}),r.jsx("div",{style:{gridColumn:"span 2"},children:r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${d(x.rssi).badgeClass}`,children:d(x.rssi).label})})]})]}),r.jsx("button",{onClick:()=>Q(x),disabled:w!==null,className:"ml-4 px-4 py-2 text-sm rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:w===x.mac?"Pairing...":"Pair"})]})},x.mac))]})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-2",children:[r.jsx("button",{onClick:W,disabled:g,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:g?"Scanning...":"Scan Again"}),r.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Close"})]})]})}),M&&P&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onKeyDown:x=>{x.key==="Escape"&&w===null&&A(),x.key==="Enter"&&w===null&&Y()},children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Pair Device"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Customize the device name before pairing"})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 space-y-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:Ye(P.type)})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:["MAC: ",r.jsx("span",{className:"font-mono",children:P.mac})]}),r.jsxs("div",{children:["IP: ",r.jsx("span",{className:"font-mono",children:P.ipAddress||"N/A"})]}),r.jsxs("div",{children:["Firmware: ",r.jsx("span",{className:"font-mono",children:P.firmwareVersion})]}),r.jsxs("div",{children:["Signal: ",P.rssi," dBm"]}),r.jsx("div",{style:{gridColumn:"span 2"},children:r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${d(P.rssi).badgeClass}`,children:d(P.rssi).label})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Device Name"}),r.jsx("input",{type:"text",value:B,onChange:x=>z(x.target.value),placeholder:"Enter custom name",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600",maxLength:32,onKeyDown:x=>{x.key==="Enter"&&w===null&&(x.preventDefault(),Y())},autoFocus:!0}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[B.length,"/32 characters"]})]}),P.capabilities>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Capabilities"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[ke(P.capabilities,we.LED_CONTROL)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",children:"LED Control"}),ke(P.capabilities,we.SENSOR_DATA)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",children:"Sensors"}),ke(P.capabilities,we.AUDIO_PLAYBACK)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200",children:"Audio"}),ke(P.capabilities,we.WEB_INTERFACE)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:"Web Interface"}),ke(P.capabilities,we.BATTERY_POWERED)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200",children:"Battery"})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-2",children:[r.jsx("button",{onClick:A,disabled:w!==null,className:"px-4 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"}),r.jsx("button",{onClick:Y,disabled:w!==null,className:"px-4 py-2 text-sm rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:w?"Pairing...":"Pair Device"})]})]})}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Connected Devices"}),s&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-brand-600"}),r.jsx("span",{children:"Refreshing..."})]})]}),r.jsx("button",{onClick:W,disabled:g||s,className:"text-sm px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2",children:g?"Scanning...":"Scan for Devices"})]}),u.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:'No paired devices found. Click "Scan for Devices" to discover nearby JBoards.'}):r.jsx("div",{className:"space-y-3",children:u.map(x=>{const S=Ie(x.lastSeen),H=_e(x.lastSeen);return r.jsx("div",{onClick:()=>!H&&e(`/jboard-network/${x.mac}`),className:`p-4 rounded-lg border transition-colors ${H?"cursor-not-allowed":"cursor-pointer"} ${H?"border-gray-400 dark:border-gray-600 bg-gray-100 dark:bg-gray-900/50 opacity-60":S?"border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/20 hover:bg-yellow-100 dark:hover:bg-yellow-900/30":"border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-medium truncate max-w-[200px]",title:x.name,children:x.name}),r.jsx("span",{className:"text-xs text-gray-500",children:Ye(x.type)}),H&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:"Offline"}),S&&!H&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200",children:"Stale"})]}),r.jsxs("div",{className:"grid gap-1 text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:["MAC: ",r.jsx("span",{className:"font-mono",children:x.mac})]}),r.jsxs("div",{children:["IP: ",r.jsx("span",{className:"font-mono",children:x.ipAddress||"N/A"})]}),r.jsxs("div",{children:["Firmware: ",r.jsx("span",{className:"font-mono",children:x.firmwareVersion})]}),r.jsxs("div",{children:["Signal: ",x.rssi," dBm"]}),r.jsxs("div",{className:H?"text-red-600 dark:text-red-400":S?"text-yellow-600 dark:text-yellow-400":"",children:["Last Seen: ",De(x.lastSeen)]}),ke(x.capabilities,we.BATTERY_POWERED)&&r.jsx("div",{children:"Power: Battery"})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:le=>{le.stopPropagation(),ve(x.mac)},"aria-label":`Unpair ${x.name}`,className:"px-3 py-1 text-xs rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2",children:"Unpair"})})]})},x.mac)})})]}),_&&r.jsx(Nn,{title:"Unpair Device",message:"Unpair this device?",onConfirm:()=>{Me(_),F(null)},onCancel:()=>F(null),dangerous:!0}),te&&r.jsx(Nn,{title:"Confirm Broadcast",message:`Send "${q}" to all ${u.length} connected device${u.length!==1?"s":""}? This action cannot be undone.`,onConfirm:()=>{R(!1),Oe()},onCancel:()=>R(!1),dangerous:!0})]})}function qp(){const{mac:e}=j0(),t=Vr(),[n,s]=m.useState(null),[a,l]=m.useState(null),[i,c]=m.useState(!0),[o,u]=m.useState(!1),[f,g]=m.useState(null),[y,v]=m.useState(""),[k,b]=m.useState("{}"),[N,p]=m.useState([]),[h,w]=m.useState(""),[C,M]=m.useState(!1),O=m.useRef(null);m.useEffect(()=>{P(),D(),B();const E=setInterval(()=>{B()},3e3);return()=>clearInterval(E)},[e]),m.useEffect(()=>{z()},[N]);const P=async()=>{c(!0);try{const _=(await wt.getPeers()).find(F=>F.mac===e);_?s(_):g({type:"error",text:"Device not found"})}catch{g({type:"error",text:"Failed to load device"})}finally{c(!1)}},D=async()=>{try{const E=await wt.getThisDevice();l(E)}catch(E){console.error("Failed to load this device:",E)}},B=async()=>{if(!(!e||!a))try{const _=(await wt.getMessages(100)).filter(F=>F.from===a.mac&&F.to===e||F.from===e&&F.to===a.mac);p(_)}catch(E){console.error("Failed to load messages:",E)}},z=()=>{var E;(E=O.current)==null||E.scrollIntoView({behavior:"smooth"})},X=async()=>{if(!(!n||!y.trim())){u(!0),g(null);try{let E={};k.trim()&&(E=JSON.parse(k));const _=await wt.sendMessage(n.mac,y,E);_.success?(g({type:"success",text:"Command sent successfully"}),v(""),b("{}")):g({type:"error",text:_.message||"Failed to send command"})}catch{g({type:"error",text:"Invalid JSON or send failed"})}finally{u(!1)}}},U=E=>{switch(E){case Qe.JSENSE_BOARD:return"JSense Board";case Qe.LED_CONTROLLER:return"LED Controller";case Qe.SENSOR_HUB:return"Sensor Hub";case Qe.AUDIO_REACTIVE:return"Audio Reactive";case Qe.EFFECTS_CONTROLLER:return"Effects Controller";default:return"Unknown Device"}},q=E=>n?(n.capabilities&E)!==0:!1,V=async()=>{if(!(!n||!h.trim()||!a)){M(!0);try{const E=await wt.sendMessage(n.mac,"CHAT_MESSAGE",{text:h.trim()});E.success?(w(""),await B()):g({type:"error",text:E.message||"Failed to send message"})}catch{g({type:"error",text:"Failed to send message"})}finally{M(!1)}}},Z=E=>{const _=Math.floor((Date.now()-new Date(E).getTime())/1e3);return _<60?`${_}s ago`:_<3600?`${Math.floor(_/60)}m ago`:`${Math.floor(_/3600)}h ago`},K=E=>{const _=new Date(E),F=new Date;return _.toDateString()===F.toDateString()?_.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):_.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},ie=E=>{var _;return E.type==="CHAT_MESSAGE"&&((_=E.payload)!=null&&_.text)?E.payload.text:`[${E.type}]`};return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading device details..."})}):n?r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/jboard-network"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold",children:n.name}),r.jsx("p",{className:"text-sm text-gray-500",children:U(n.type)})]})]}),f&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${f.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:f.text}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-3",children:"Device Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"IP Address:"}),r.jsx("span",{className:"font-mono",children:n.ipAddress})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Firmware:"}),r.jsx("span",{className:"font-mono",children:n.firmwareVersion})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Signal:"}),r.jsxs("span",{children:[n.rssi," dBm (",n.rssi>-50?"Excellent":n.rssi>-70?"Good":"Weak",")"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Last Seen:"}),r.jsx("span",{children:Z(n.lastSeen)})]})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-3",children:"Capabilities"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[q(we.LED_CONTROL)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",children:"LED Control"}),q(we.SENSOR_DATA)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200",children:"Sensors"}),q(we.AUDIO_PLAYBACK)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200",children:"Audio"}),q(we.WEB_INTERFACE)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:"Web Interface"}),q(we.BATTERY_POWERED)&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200",children:"Battery Powered"})]})]})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-950/60",children:[r.jsx("h2",{className:"text-lg font-medium mb-3",children:"Send Command"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Command"}),r.jsx("input",{type:"text",value:y,onChange:E=>v(E.target.value),placeholder:"e.g., set_brightness, set_color, reboot",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data (JSON)"}),r.jsx("textarea",{value:k,onChange:E=>b(E.target.value),placeholder:'{"value": 75}',rows:4,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-brand-600"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter command parameters as JSON"})]}),r.jsx("button",{onClick:X,disabled:o||!y.trim(),className:"w-full px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50",children:o?"Sending...":"Send Command"})]}),q(we.LED_CONTROL)&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-sm font-medium mb-2",children:"Quick Commands"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>{v("set_brightness"),b('{"value": 100}')},className:"text-xs px-3 py-1 rounded border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800",children:"Max Brightness"}),r.jsx("button",{onClick:()=>{v("set_brightness"),b('{"value": 0}')},className:"text-xs px-3 py-1 rounded border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800",children:"Lights Off"}),r.jsx("button",{onClick:()=>{v("set_color"),b('{"r": 255, "g": 0, "b": 0}')},className:"text-xs px-3 py-1 rounded border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800",children:"Red"}),r.jsx("button",{onClick:()=>{v("reboot"),b("{}")},className:"text-xs px-3 py-1 rounded border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Reboot Device"})]})]})]}),r.jsxs("div",{className:"mt-4 rounded-lg border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-950/60 overflow-hidden flex flex-col",style:{height:"500px"},children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Message History"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Chat and command history with this device"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[N.length===0?r.jsx("div",{className:"text-center text-gray-500 py-8",children:"No messages yet. Send a message to start chatting."}):N.map(E=>{const _=a&&E.from===a.mac;return r.jsx("div",{className:`flex ${_?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-lg px-3 py-2 ${_?"bg-brand-600 text-white":"bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-gray-100"}`,children:[r.jsx("div",{className:"text-sm break-words",children:ie(E)}),r.jsxs("div",{className:`text-xs mt-1 flex items-center gap-1 ${_?"text-white/70":"text-gray-500"}`,children:[r.jsx("span",{children:K(E.timestamp)}),_&&r.jsx("span",{children:E.status==="delivered"?"":E.status==="sent"?"":""})]})]})},E.id)}),r.jsx("div",{ref:O})]}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:h,onChange:E=>w(E.target.value),onKeyPress:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),V())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-600",disabled:C}),r.jsx("button",{onClick:V,disabled:C||!h.trim(),className:"px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 disabled:opacity-50 flex items-center gap-2",children:C?"Sending...":r.jsxs(r.Fragment,{children:[r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})}),"Send"]})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"Device not found"}),r.jsx("button",{onClick:()=>t("/jboard-network"),className:"px-4 py-2 rounded bg-brand-600 text-white hover:bg-brand-700",children:"Back to JBoard Network"})]})}function Hp(){const{showToast:e}=jo();return m.useEffect(()=>{},[e]),r.jsxs(Ch,{children:[r.jsx(Yh,{}),r.jsx(lh,{children:r.jsxs(He,{path:"/",element:r.jsx(Jh,{}),children:[r.jsx(He,{index:!0,element:r.jsx(Kh,{})}),r.jsx(He,{path:"effects",element:r.jsx(Zh,{})}),r.jsx(He,{path:"sequences",element:r.jsx(tp,{})}),r.jsx(He,{path:"sequences/new",element:r.jsx(Yc,{})}),r.jsx(He,{path:"sequences/edit/:id",element:r.jsx(Yc,{})}),r.jsx(He,{path:"audio",element:r.jsx(np,{})}),r.jsx(He,{path:"sensors",element:r.jsx(pp,{})}),r.jsx(He,{path:"pixels",element:r.jsx(jp,{})}),r.jsx(He,{path:"network",element:r.jsx(Fp,{})}),r.jsx(He,{path:"jboard-network",element:r.jsx(Vp,{})}),r.jsx(He,{path:"jboard-network/:mac",element:r.jsx(qp,{})}),r.jsx(He,{path:"files",element:r.jsx(Mp,{})}),r.jsx(He,{path:"about",element:r.jsx(Op,{})}),r.jsx(He,{path:"settings",element:r.jsx(Wp,{})})]})})]})}function Gp(){return r.jsx(Eh,{children:r.jsx(Fh,{children:r.jsx(Hp,{})})})}Pl.createRoot(document.getElementById("root")).render(r.jsx(dd.StrictMode,{children:r.jsx(gh,{children:r.jsx(Gp,{})})}));
